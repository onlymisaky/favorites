> æœ¬æ–‡ç”± [ç®€æ‚¦ SimpRead](http://ksria.com/simpread/) è½¬ç ï¼Œ åŸæ–‡åœ°å€ [mp.weixin.qq.com](https://mp.weixin.qq.com/s/11PMoorLTfaKXGgYftpScA)

```
å¤§å‚æŠ€æœ¯Â Â é«˜çº§å‰ç«¯Â Â Nodeè¿›é˜¶

ç‚¹å‡»ä¸Šæ–¹Â ç¨‹åºå‘˜æˆé•¿æŒ‡åŒ—ï¼Œå…³æ³¨å…¬ä¼—å·

å›å¤1ï¼ŒåŠ å…¥é«˜çº§Nodeäº¤æµç¾¤

```

ä½œè€…ï¼šå‰ç«¯äº†äº† liaoliao

é“¾æ¥ï¼šhttps://juejin.cn/post/7137192060045492231

### å®æˆ˜ç›®çš„

æ ¹æ®ä¸åŒçš„äº§å“é…åˆæ¥å£å±•ç¤ºç›¸åº”çš„æè¿°ã€‚æ ¹æ®é€‰æ‹©çš„åœºæ™¯åŠå…¶ç‰©å“å®ç°å¯è§†åŒ–çš„äº§å“å±•ç¤ºæ•ˆæœã€‚æ•ˆæœå±•ç¤º

> æ”¯æŒä¸åŒä½ç½®å±•ç¤ºä¸åŒæè¿°ï¼šé…åˆæ•°æ®é…ç½®æ¸²æŸ“ä¸åŒæ¡¢çš„æ•ˆæœ

![](https://mmbiz.qpic.cn/sz_mmbiz_gif/9Z5K66tFPiax49af9tF6YQg4iaFwUckibQYVHaeGpbjcvEzpL0QAIHjMTmG9oF6KnyzmMSP7Qia6SO5yzUV9swPxew/640?wx_fmt=gif&from=appmsg)

> æ ¹æ®é€‰ä¸­çš„äº§å“ï¼Œåˆ‡æ¢ç›¸åº”äº§å“æ•ˆæœ

![](https://mmbiz.qpic.cn/sz_mmbiz_gif/9Z5K66tFPiax49af9tF6YQg4iaFwUckibQYXn99Wn7TRicI0XRoIWzKosoqO32eHWtAk9jMgO1zDELgElvlxzMPHyA/640?wx_fmt=gif&from=appmsg)

> æ ¹æ®é€‰ä¸­åœºæ™¯ï¼Œåˆ‡æ¢ç›¸åº”çš„åœºæ™¯

![](https://mmbiz.qpic.cn/sz_mmbiz_gif/9Z5K66tFPiax49af9tF6YQg4iaFwUckibQYeukIoKfRfPsrffSnsicWjKSJwkbc7pqKpWT489ibH3Tx2d2icQ6JGGKRg/640?wx_fmt=gif&from=appmsg)

### å®ç°æ€è·¯

> å°è£…ä¸€ä¸ª Three çš„å‡½æ•°ï¼Œæ”¯æŒè®¾ç½®ç›¸æœºã€åœºæ™¯ã€æ¸²æŸ“å‡½æ•°ï¼Œæ·»åŠ æ¨¡å‹è§£æå™¨ï¼Œæ·»åŠ ç‰©å“ï¼Œæ•´åˆæ¸²æŸ“æ•ˆæœï¼Œæ·»åŠ äº‹ä»¶ç›‘å¬ï¼Œå®Œå–„æ¨¡å‹åŠ¨ç”»å±•ç¤º

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/9Z5K66tFPiax49af9tF6YQg4iaFwUckibQYLFGtO55EFZNFRZVJX9T4NkaErq2llkT9amfYJUkxHkFflwB4DTvvBA/640?wx_fmt=other&from=appmsg)

### å…·ä½“å®ç°

> ä½¿ç”¨ vite æ­å»ºä¸€ä¸ªé¡¹ç›®ï¼Œåå®‰è£… Three æ”¯æŒï¼Œè¿›è¡Œå…·ä½“å®ç°

#### å‡†å¤‡ vue é¡¹ç›®

*   ä½¿ç”¨ Vite + Vue[1] æ­å»º
    

```
#Â npmÂ 6.x
npmÂ initÂ vite@latestÂ my-vue-appÂ --templateÂ vue

# npm 7+, éœ€è¦é¢å¤–çš„åŒæ¨ªçº¿ï¼š
npmÂ initÂ vite@latestÂ my-vue-appÂ --Â --templateÂ vue

#Â yarn
yarnÂ createÂ viteÂ my-vue-appÂ --templateÂ vue

#Â pnpm
pnpmÂ createÂ viteÂ my-vue-appÂ --Â --templateÂ vue


```

*   æ ¹æ®è‡ªå·±çš„ç¯å¢ƒé€‰æ‹©è‡ªå·±çš„æ­å»ºä»£ç 
    

```
npmÂ initÂ vite@latestÂ my-vue-appÂ --Â --templateÂ vue


```

*   æ ¹æ®æç¤ºåˆ›å»ºé¡¹ç›®
    

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/9Z5K66tFPiax49af9tF6YQg4iaFwUckibQYkYRw2WISToupdeJdBZZjMjDM8cZDsBYNtMkibs8iaAgp2icsePlj1Yiczg/640?wx_fmt=other&from=appmsg)![](https://mmbiz.qpic.cn/sz_mmbiz_png/9Z5K66tFPiax49af9tF6YQg4iaFwUckibQYdyhVwXRVuVoL4DRLgqEKyicCnRjeSTLKaIyZmvPWicxwhj76cOCib1XoQ/640?wx_fmt=png&from=appmsg)

*   ç¡®è®¤é¡¹ç›®æ­£å¸¸è®¿é—®
    

![](https://mmbiz.qpic.cn/sz_mmbiz_png/9Z5K66tFPiax49af9tF6YQg4iaFwUckibQYFZDibz0yiamo9pXVnA5PWN2W2v4ff6QlRc1dz7uDRHOfJIpnXWPgBdzw/640?wx_fmt=png&from=appmsg)

#### å®‰è£… Three

```
npmÂ installÂ --saveÂ three


```

![](https://mmbiz.qpic.cn/sz_mmbiz_png/9Z5K66tFPiax49af9tF6YQg4iaFwUckibQYbcRJAak9t0aR19Jz0Fuv1tDBUGMBKwuE9zWlh5mHEub8Us1ib8eveQA/640?wx_fmt=png&from=appmsg)

#### åˆ é™¤æ— ç”¨ä»£ç ï¼Œæ·»åŠ æ¸²æŸ“èŠ‚ç‚¹

> å¢åŠ ä¸€ä¸ªåœºæ™¯å±•ç¤ºçš„ divï¼Œç”¨äºæ¸²æŸ“ 3D ä¿¡æ¯

![](https://mmbiz.qpic.cn/sz_mmbiz_png/9Z5K66tFPiax49af9tF6YQg4iaFwUckibQY9cOxNQ1phNNblyLQUnGnANmUlnrHVphf5rBfEjs3YPnyjrPYmCtpicw/640?wx_fmt=png&from=appmsg)

### Three å®æˆ˜

#### åŠ è½½åœºæ™¯åŠæ§åˆ¶å™¨

##### åˆå§‹åŒ–åœºæ™¯ HDR å›¾ç‰‡

```
//Â åˆå§‹åŒ–åœºæ™¯
Â Â initScene()Â {
Â Â Â Â this.sceneÂ =Â newÂ THREE.Scene();
Â Â Â Â this.setEnvMap("001");
Â Â }
Â //Â åœºæ™¯è®¾ç½®
Â Â setEnvMap(hdr)Â {
Â Â Â Â newÂ RGBELoader().setPath("./hdr/").load(`${hdr}.hdr`,Â (texture)Â =>Â {
Â Â Â Â Â Â texture.mappingÂ =Â THREE.EquirectangularRefractionMapping;
Â Â Â Â Â Â this.scene.backgroundÂ =Â texture;
Â Â Â Â Â Â this.scene.environmentÂ =Â texture;
Â Â Â Â });
Â Â }


```

##### ç¡®å®šç›¸æœºä½ç½®

```
Â initCamera()Â {
Â Â Â Â this.cameraÂ =Â newÂ THREE.PerspectiveCamera(
Â Â Â Â Â Â 45,Â //Â è§’åº¦
Â Â Â Â Â Â window.innerWidthÂ /Â window.innerHeight,Â //Â æ¯”ä¾‹
Â Â Â Â Â Â 0.25,Â //Â è¿‘
Â Â Â Â Â Â 200Â //Â è¿œ
Â Â Â Â );
Â Â Â Â //Â ç›¸æœºä½ç½®
Â Â Â Â this.camera.position.set(-1.8,Â 0.6,Â 2.7);
Â Â }


```

##### æ¸²æŸ“ï¼šæ ¹æ®ç›¸æœºä½ç½®å’Œåœºæ™¯å›¾æ¸²æŸ“åˆå§‹ç”»é¢

```
render()Â {
Â Â Â Â this.renderer.render(this.scene,Â this.camera);
}


```

##### åŠ¨ç”»ï¼šæ¸²æŸ“åˆå§‹ç”»é¢

```
animate()Â {
Â Â Â Â this.renderer.setAnimationLoop(this.render.bind(this));
}


```

> æ­¤æ—¶ï¼Œè¿™ä¸ªé¡µé¢åªèƒ½å±•ç¤ºå‡ºéƒ¨åˆ†çš„é™æ€ç”»é¢ï¼Œè¦æƒ³é€šè¿‡é¼ æ ‡æ§åˆ¶ç›¸æœºçš„ä½ç½®ï¼Œåˆ™éœ€è¦å¢åŠ æ§åˆ¶å™¨

![](https://mmbiz.qpic.cn/sz_mmbiz_png/9Z5K66tFPiax49af9tF6YQg4iaFwUckibQYVmOYqY0tVCVkWwZIqQ2kDlhseIe7HExKCb0UdtvJNOAe7w9JIpicdRQ/640?wx_fmt=png&from=appmsg)

##### å¼•å…¥æ§åˆ¶å™¨

```
//Â æ§åˆ¶å™¨
Â Â initControls()Â {
Â Â Â Â this.controlsÂ =Â newÂ OrbitControls(this.camera,Â this.renderer.domElement);
Â Â }


```

> åŠ å…¥æ§åˆ¶å™¨åï¼Œåˆ™å¯ä»¥é€šè¿‡é¼ æ ‡çš„æ»‘åŠ¨æ§åˆ¶ç›¸æœºçš„è§’åº¦

![](https://mmbiz.qpic.cn/sz_mmbiz_gif/9Z5K66tFPiax49af9tF6YQg4iaFwUckibQY471eXGqGuY58zvsssQbSjupWU3EGEy1PkPU6PsPyWZKgNTBv4A18gg/640?wx_fmt=gif&from=appmsg)

#### å¢åŠ äº§å“æ¨¡å‹

##### å¼•å…¥æ¨¡å‹è§£æå™¨

```
importÂ {Â GLTFLoaderÂ }Â fromÂ "three/examples/jsm/loaders/GLTFLoader";


```

##### æ·»åŠ æ¨¡å‹åˆ°åœºæ™¯é‡Œ

```
setModel(modelName)Â {
Â Â Â Â constÂ loaderÂ =Â newÂ GLTFLoader().setPath("/gltf/");
Â Â Â Â loader.load(modelName,Â (gltf)Â =>Â {
Â Â Â Â Â Â this.modelÂ =Â gltf.scene.children[0];
Â Â Â Â Â Â this.scene.add(gltf.scene);
Â Â Â Â });
Â Â }
Â Â //Â æ·»åŠ æ¨¡å‹
Â Â asyncÂ addMesh()Â {
Â Â Â Â letÂ resÂ =Â awaitÂ this.setModel("bag2.glb");
Â Â }


```

> æ¨¡å‹å·²ç»åŠ å…¥åˆ°åœºæ™¯é‡Œï¼Œä½†æ˜¯æ¨¡å‹ä¸åœ¨åœºæ™¯ä¸­é—´ğŸ¤”ï¸ï¼Œæ¨¡å‹æ¯”è¾ƒäº®ï¼ŒçœŸå®ç‰©å“çœ‹ä¸æ¸…æ¥š

![](https://mmbiz.qpic.cn/sz_mmbiz_png/9Z5K66tFPiax49af9tF6YQg4iaFwUckibQYp9fAp8vIvNQueCzQeYKKUYVonAF5hlGGpHArcDFKpem3ZqGO6oY03g/640?wx_fmt=png&from=appmsg)

> æ‰“å°ä¸€ä¸‹æ¨¡å‹è§£æåçš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¨¡å‹æœ‰è‡ªå·±çš„ç›¸æœºåœºæ™¯åŠ¨ç”»ç­‰ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå½“å‰ç›¸åº”çš„è®¾ç½®è°ƒæ•´æˆæ¨¡å‹çš„è®¾ç½®

![](https://mmbiz.qpic.cn/sz_mmbiz_png/9Z5K66tFPiax49af9tF6YQg4iaFwUckibQYISodWt6fibBlia5PC0bLFBowDM9FcKagDOkVumNxc3CCE2L4fugyYcKg/640?wx_fmt=png&from=appmsg)

##### æ¨¡å‹è°ƒæ•´

*   è°ƒæ•´ç›¸æœºä¸ºæ¨¡å‹ç›¸æœº
    

```
setModel(modelName)Â {
...
//Â ä¿®æ”¹ç›¸æœºä¸ºæ¨¡å‹ç›¸æœº
this.cameraÂ =Â gltf.cameras[0];
...
}


```

> è°ƒæ•´åæ¨¡å‹ä½ç½®åœ¨ç”»é¢ä¸­é—´

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/9Z5K66tFPiax49af9tF6YQg4iaFwUckibQYcIatKhHY2DDI0RmyX5wT2KY8CQoZ2CIoCvEGAuEAjX9icqcWffGn8Ow/640?wx_fmt=other&from=appmsg)

*   è°ƒæ•´åœºæ™¯å…¶ä»–é…ç½®
    

```
//Â è®¾ç½®æ¨¡å‹
Â Â setModel(modelName)Â {
Â Â Â Â returnÂ newÂ Promise((resolve,Â reject)Â =>Â {
Â Â Â Â Â Â constÂ loaderÂ =Â newÂ GLTFLoader().setPath("./gltf/");
Â Â Â Â Â Â loader.load(modelName,Â (gltf)Â =>Â {
Â Â Â Â Â Â Â Â console.log(gltf);
Â Â Â Â Â Â Â Â this.modelÂ &&Â this.model.removeFromParent();
Â Â Â Â Â Â Â Â this.modelÂ =Â gltf.scene.children[0];
Â Â Â Â Â Â Â Â ifÂ (modelNameÂ ===Â "bag2.glb"Â &&Â !this.dish)Â {
Â Â Â Â Â Â Â Â Â Â this.dishÂ =Â gltf.scene.children[5];
Â Â Â Â Â Â Â Â Â Â //Â ä¿®æ”¹ç›¸æœºä¸ºæ¨¡å‹ç›¸æœº
Â Â Â Â Â Â Â Â Â Â this.cameraÂ =Â gltf.cameras[0];
Â Â Â Â Â Â Â Â Â Â //Â è°ƒç”¨åŠ¨ç”»
Â Â Â Â Â Â Â Â Â Â this.mixerÂ =Â newÂ THREE.AnimationMixer(gltf.scene.children[1]);
Â Â Â Â Â Â Â Â Â Â this.animateActionÂ =Â this.mixer.clipAction(gltf.animations[0]);
Â Â Â Â Â Â Â Â Â Â //Â è®¾ç½®åŠ¨ç”»æ’­æ”¾æ—¶é•¿
Â Â Â Â Â Â Â Â Â Â this.animateAction.setDuration(20).setLoop(THREE.LoopOnce);
Â Â Â Â Â Â Â Â Â Â //Â è®¾ç½®æ’­æ”¾ååœæ­¢
Â Â Â Â Â Â Â Â Â Â this.animateAction.clampWhenFinishedÂ =Â true;
Â Â Â Â Â Â Â Â Â Â //Â Â Â è®¾ç½®ç¯å…‰
Â Â Â Â Â Â Â Â Â Â this.spotlight1Â =Â gltf.scene.children[2].children[0];
Â Â Â Â Â Â Â Â Â Â this.spotlight1.intensityÂ =Â 1;
Â Â Â Â Â Â Â Â Â Â this.spotlight2Â =Â gltf.scene.children[3].children[0];
Â Â Â Â Â Â Â Â Â Â this.spotlight2.intensityÂ =Â 1;
Â Â Â Â Â Â Â Â Â Â this.spotlight3Â =Â gltf.scene.children[4].children[0];
Â Â Â Â Â Â Â Â Â Â this.spotlight3.intensityÂ =Â 1;

Â Â Â Â Â Â Â Â Â Â //Â this.scene.add(this.dish);
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â this.scene.add(gltf.scene);
Â Â Â Â Â Â Â Â resolve(`${this.modelName}æ¨¡å‹æ·»åŠ æˆåŠŸ`);
Â Â Â Â Â Â });
Â Â Â Â });
Â Â }


```

> è°ƒæ•´å‚æ•°åçš„äº§å“å±•ç¤ºæ•ˆæœ

![](https://mmbiz.qpic.cn/sz_mmbiz_png/9Z5K66tFPiax49af9tF6YQg4iaFwUckibQYaadYtkDBWotFPFL1ru5LxffvIsr6c2xW9D2TiaR83h8C76WCeMaBLcg/640?wx_fmt=png&from=appmsg)

*   å®šæ—¶å™¨å’Œæ»šè½®ç›‘å¬åŠ¨ç”»
    

```
//Â æ·»åŠ å®šæ—¶å™¨
render()Â {
Â Â Â Â varÂ deltaÂ =Â this.clock.getDelta();
Â Â Â Â this.mixerÂ &&Â this.mixer.update(delta);
Â Â Â Â this.renderer.render(this.scene,Â this.camera);
Â }
Â Â 
//Â ç›‘å¬æ»šè½®äº‹ä»¶
Â Â Â Â window.addEventListener("mousewheel",Â this.onMouseWheel.bind(this));
Â Â Â Â 
//Â ç›‘å¬æ»šè½®äº‹ä»¶
Â Â onMouseWheel(e)Â {
Â Â Â Â letÂ timeScaleÂ =Â e.deltaYÂ >Â 0Â ?Â 1Â :Â -1;
Â Â Â Â this.animateAction.setEffectiveTimeScale(timeScale);
Â Â Â Â this.animateAction.pausedÂ =Â false;
Â Â Â Â this.animateAction.play();
Â Â Â Â ifÂ (this.timeoutId)Â {
Â Â Â Â Â Â clearTimeout(this.timeoutId);
Â Â Â Â }
Â Â Â Â this.timeoutIdÂ =Â setTimeout(()Â =>Â {
Â Â Â Â Â Â this.animateAction.halt(0.3);
Â Â Â Â },Â 300);
Â Â }


```

> åœºæ™¯å’Œäº§å“æ¨¡å‹éƒ½æ·»åŠ æˆåŠŸï¼Œç»“åˆåŠ¨ç”»ï¼Œå¯ä»¥è¿›è¡Œäº§å“çš„é¢„è§ˆ

![](https://mmbiz.qpic.cn/sz_mmbiz_gif/9Z5K66tFPiax49af9tF6YQg4iaFwUckibQYPFPKvyUjgNxAkHtj7jgvEkMnrOgnRibSbyXUWjQnKEjibQeVRn4MedvA/640?wx_fmt=gif&from=appmsg)

#### æ·»åŠ çª—å£ç›‘å¬äº‹ä»¶

> è°ƒæ•´é¡µé¢çª—å£æ—¶ï¼Œä¿è¯åœºæ™¯çš„å…¨å±å±•ç¤º

```
//Â ç›‘å¬åœºæ™¯å¤§å°æ”¹å˜ï¼Œè°ƒæ•´æ¸²æŸ“å°ºå¯¸
Â Â window.addEventListener("resize",Â this.onWindowResize.bind(this));
//Â ç›‘å¬å°ºå¯¸
Â Â onWindowResize()Â {
Â Â Â Â this.camera.aspectÂ =Â window.innerWidthÂ /Â window.innerHeight;
Â Â Â Â this.camera.updateProjectionMatrix();
Â Â Â Â this.renderer.setSize(window.innerWidth,Â window.innerHeight);
Â Â }


```

#### ä¼˜åŒ–åŠ è½½

> æ¨¡å‹åŠ è½½æˆåŠŸååœ¨å±•ç¤º

```
Â constructor(selector,Â onFinish)Â {
Â Â Â Â this.onFinishÂ =Â onFinish;
Â Â }
//Â æ·»åŠ ç‰©å“å¢åŠ å›è°ƒå‡½æ•°
asyncÂ addMesh()Â {
Â Â Â Â letÂ resÂ =Â awaitÂ this.setModel("bag2.glb");
Â Â Â Â this.onFinish(res);
}


```

#### å¢åŠ å•†å“çš„ä»‹ç»

> æ ¹æ® duration å’Œ time è®¡ç®—å½“å‰å¤„äºå“ªéƒ¨é—¨èŠ‚ç‚¹

![](https://mmbiz.qpic.cn/sz_mmbiz_png/9Z5K66tFPiax49af9tF6YQg4iaFwUckibQYOdpXBcJicEd89p4jzR2ib2rM2qmrwHGQRAP1Cgtk5czWW2uL2aNKHuaw/640?wx_fmt=png&from=appmsg)![](https://mmbiz.qpic.cn/sz_mmbiz_png/9Z5K66tFPiax49af9tF6YQg4iaFwUckibQYkwcdGMBYV9xIZpUoonvnjC7E7mB6RgGtFPMUooJLMtwwYSnZxPvEfQ/640?wx_fmt=png&from=appmsg)

```
window.addEventListener("mousewheel",Â (e)Â =>Â {
Â Â letÂ durationÂ =Â data.base3d.animateAction._clip.duration;
Â Â letÂ timeÂ =Â data.base3d.animateAction.time;
Â Â letÂ indexÂ =Â Math.floor((timeÂ /Â duration)Â *Â 4);
Â Â data.descIndexÂ =Â index;
});


```

![](https://mmbiz.qpic.cn/sz_mmbiz_gif/9Z5K66tFPiax49af9tF6YQg4iaFwUckibQY8D1MX9fy6eq0oK8jX5dVMa7avicoMWrknTlY8hkmRLYp6foHxoqrAWg/640?wx_fmt=gif&from=appmsg)

#### å¢åŠ é€‰æ‹©åœºæ™¯å’Œäº§å“

##### åˆ›å»ºæ•°æ®å¢åŠ æ“ä½œçš„ dom

```
<template>
Â Â <divÂ class="loading"Â v-show="data.isLoading">
Â Â Â Â <LoadingÂ :progress="data.progress"></Loading>
Â Â </div>
Â Â <divÂ class="product"Â id="product"Â v-show="!data.isLoading">
Â Â Â Â <div
Â Â Â Â Â Â class="desc"
Â Â Â Â Â Â :class="{Â active:Â data.descIndexÂ ==Â iÂ }"
Â Â Â Â Â Â v-if="data.products[data.pIndex]"
Â Â Â Â Â Â v-for="(desc,Â i)Â inÂ data.products[data.pIndex].desc"
Â Â Â Â >
Â Â Â Â Â Â <h1Â class="title">{{Â desc.titleÂ }}</h1>
Â Â Â Â Â Â <pÂ class="content">{{Â desc.contentÂ }}</p>
Â Â Â Â </div>
Â Â </div>
Â Â <divÂ class="prod-list">
Â Â Â Â <h1><SketchOutlined></SketchOutlined>äº§å“æ¨è</h1>
Â Â Â Â <divÂ class="products">
Â Â Â Â Â Â <div
Â Â Â Â Â Â Â Â class="prod-item"
Â Â Â Â Â Â Â Â :class="{Â active:Â pIÂ ==Â data.pIndexÂ }"
Â Â Â Â Â Â Â Â v-for="(prod,Â pI)Â inÂ data.products"
Â Â Â Â Â Â Â Â @click="changeModel(prod,Â pI)"
Â Â Â Â Â Â >
Â Â Â Â Â Â Â Â <divÂ class="prod-title">
Â Â Â Â Â Â Â Â Â Â {{Â prod.titleÂ }}
Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â Â Â <divÂ class="img">
Â Â Â Â Â Â Â Â Â Â <imgÂ :src="prod.imgsrc"Â :alt="prod.title"Â />
Â Â Â Â Â Â Â Â </div>
Â Â Â Â Â Â </div>
Â Â Â Â </div>
Â Â </div>
Â Â <divÂ class="scene"Â id="scene"Â v-show="!data.isLoading"></div>
Â Â <divÂ class="scene-list">
Â Â Â Â <h3><RadarChartOutlined></RadarChartOutlined>Â åˆ‡æ¢ä½¿ç”¨åœºæ™¯</h3>

Â Â Â Â <divÂ class="scenes">
Â Â Â Â Â Â <div
Â Â Â Â Â Â Â Â class="scene-item"
Â Â Â Â Â Â Â Â v-for="(scene,Â index)Â inÂ data.scenes"
Â Â Â Â Â Â Â Â @click="changeHdr(scene,Â index)"
Â Â Â Â Â Â >
Â Â Â Â Â Â Â Â <img
Â Â Â Â Â Â Â Â Â Â :class="{Â active:Â indexÂ ==Â data.sceneIndexÂ }"
Â Â Â Â Â Â Â Â Â Â :src="`./hdr/${scene}.jpg`"
Â Â Â Â Â Â Â Â Â Â :alt="scene"
Â Â Â Â Â Â Â Â />
Â Â Â Â Â Â </div>
Â Â Â Â </div>
Â Â </div>
</template>
<scriptÂ setup>
importÂ Base3DÂ fromÂ "../utils/base3d";
importÂ {Â reactive,Â onMountedÂ }Â fromÂ "vue";
constÂ infoListÂ =Â [
Â Â {
Â Â Â Â id:Â 7589,
Â Â Â Â title:Â "GUCCIÂ å¤é©°æ–°æ¬¾å¥³åŒ…",
Â Â Â Â imgsrc:Â "./imgs/bag.png",
Â Â Â Â price:Â 17899,
Â Â Â Â modelPath:Â "./gltf/",
Â Â Â Â modelName:Â "bag2.glb",
Â Â Â Â desc:Â [
Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â title:Â "ä¸ä¸€æ¬¾å…¨æ–°çš„é‚®å·®åŒ…è®¾è®¡ã€‚",
Â Â Â Â Â Â Â Â content:Â "è¯¥ç³»åˆ—æ‰‹è¢‹åŒæ—¶æ¨å‡ºæ‘©ç™»å»“å½¢çš„æ°´æ¡¶åŒ…æ¬¾å¼",
Â Â Â Â Â Â },
Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â title:Â "å‘60å¹´å‰å¤é©°çš„ç»å…¸æ‰‹è¢‹è‡´æ•¬ã€‚",
Â Â Â Â Â Â Â Â content:Â "GucciÂ 1955é©¬è¡”æ‰£ç³»åˆ—æ‰‹è¢‹å»¶ç»­ç»å…¸æ‰‹è¢‹çº¿æ¡ä¸é€ å‹",
Â Â Â Â Â Â },
Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â title:Â "æ‰‹è¢‹ç»“æ„è®¾è®¡ç²¾å·§",
Â Â Â Â Â Â Â Â content:Â "æ­é…å¯è°ƒèŠ‚é•¿åº¦çš„è‚©å¸¦ï¼Œè‚©èƒŒæˆ–æ–œæŒçš†å®œã€‚",
Â Â Â Â Â Â },
Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â title:Â "GUCCIÂ 1955é©¬è¡”æ‰£ç³»åˆ—æ‰‹è¢‹",
Â Â Â Â Â Â Â Â content:
Â Â Â Â Â Â Â Â Â Â "æ ‡å¿—æ€§çš„é©¬è¡”æ‰£è®¾è®¡æºäºé©¬æœ¯è¿åŠ¨ï¼Œç”±é‡‘å±åŒç¯å’Œä¸€æ¡è¡”é“¾ç»„åˆè€Œæˆã€‚",
Â Â Â Â Â Â },
Â Â Â Â ],
Â Â },
Â Â {
Â Â Â Â id:Â 7590,
Â Â Â Â title:Â "MacbookÂ Pro",
Â Â Â Â imgsrc:Â "./imgs/macpro.jpg",
Â Â Â Â price:Â 25899,
Â Â Â Â modelPath:Â "./gltf/",
Â Â Â Â modelName:Â "Macbookpro2.glb",
Â Â Â Â desc:Â [
Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â title:Â "è¶…é«˜é€ŸM1Â Proå’ŒM1Â MaxèŠ¯ç‰‡",
Â Â Â Â Â Â Â Â content:Â "å¸¦æ¥é¢ è¦†æ€§è¡¨ç°å’ŒæƒŠäººç»­èˆª",
Â Â Â Â Â Â },
Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â title:Â "ç‚«ç›®çš„Liquidè§†ç½‘è†œXDRæ˜¾ç¤ºå±",
Â Â Â Â Â Â Â Â content:Â "Macbookproå„ç±»å¼ºå¤§ç«¯å£ä¹Ÿéƒ½æ•´è£…å°±ä½",
Â Â Â Â Â Â },
Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â title:Â "æˆ˜åŠ›æ›´çŒ›ï¼Œè€åŠ›ä¹Ÿæ›´å¼ºï¼",
Â Â Â Â Â Â Â Â content:Â "æ— è®ºæ˜¯å‰ªè¾‘8Kè§†é¢‘ã€ç¼–è¯‘ä»£ç éƒ½èƒ½éšæ—¶éšåœ°è½»æ¾æå®š",
Â Â Â Â Â Â },
Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â title:Â "Proåˆ°MAXï¼Œéœ¸æ°”ä¸å°é¡¶",
Â Â Â Â Â Â Â Â content:Â "å›¾å½¢å¤„ç†å™¨é€Ÿåº¦æœ€é«˜æå‡è‡³4å€ï¼Œæœºå™¨å­¦ä¹ æ€§èƒ½æå‡è‡³5å€",
Â Â Â Â Â Â },
Â Â Â Â ],
Â Â },
Â Â {
Â Â Â Â id:Â 7591,
Â Â Â Â title:Â "æ°´æ™¶å‡‰é‹å¥³ç»†è·Ÿ",
Â Â Â Â imgsrc:Â "./imgs/womenshoes.jpg",
Â Â Â Â price:Â 17899,
Â Â Â Â modelPath:Â "./gltf/",
Â Â Â Â modelName:Â "shoes.glb",
Â Â Â Â desc:Â [
Â Â Â Â Â Â {Â title:Â "ç™½å˜å¥³ç¥å­£",Â content:Â "æ€§æ„Ÿæ½®å“ã€ä¼˜é›…è½»æ·‘èŒƒï¼"Â },
Â Â Â Â Â Â {Â title:Â "èˆ’é€‚ã€ç„•æ–°",Â content:Â "æ‰‹æ„Ÿå…‰æ»‘ã€å¯Œæœ‰å¼¹æ€§ã€èˆ’é€‚ä¸€æ•´å¤©"Â },
Â Â Â Â Â Â {Â title:Â "ä¸ªæ€§ã€é­…åŠ›",Â content:Â "æ°´æ™¶æ­é…é‡‘å±ï¼Œå‡¸æ˜¾æŸ”ç¾æ°”è´¨"Â },
Â Â Â Â Â Â {Â title:Â "å…¨é€ã€é«˜ç«¯æ°´æ™¶",Â content:Â "æ¯ä¸€å¤„çš„ç»†èŠ‚ï¼Œéƒ½å¾ˆåˆ°ä½!"Â },
Â Â Â Â ],
Â Â },
];
constÂ hdrÂ =Â ["000",Â "001",Â "002",Â "003",Â "004",Â "005"];
constÂ dataÂ =Â reactive({
Â Â products:Â [],
Â Â isLoading:Â true,
Â Â scenes:Â [],
Â Â pIndex:Â 0,
Â Â sceneIndex:Â 0,
Â Â base3d:Â {},
Â Â descIndex:Â 0,
Â Â progress:Â 0,
});
functionÂ LoadingFinish()Â {
Â Â data.isLoadingÂ =Â false;
}
onMounted(()Â =>Â {
Â Â data.productsÂ =Â infoList;
Â Â data.scenesÂ =Â hdr;
Â Â data.base3dÂ =Â newÂ Base3D("#scene",Â LoadingFinish);
Â Â data.base3d.onProgress((e)Â =>Â {
Â Â Â Â letÂ progressNumÂ =Â e.loadedÂ /Â e.total;
Â Â Â Â progressNumÂ =Â progressNum.toFixed(2)Â *Â 100;
Â Â Â Â data.progressÂ =Â progressNum;
Â Â Â Â //Â console.log(progressNum);
Â Â });
});

window.addEventListener("mousewheel",Â (e)Â =>Â {
Â Â console.log("ğŸš€.animateAction",Â data.base3d.animateAction);
Â Â letÂ durationÂ =Â data.base3d.animateAction._clip.duration;
Â Â letÂ timeÂ =Â data.base3d.animateAction.time;
Â Â letÂ indexÂ =Â Math.floor((timeÂ /Â duration)Â *Â 4);
Â Â data.descIndexÂ =Â index;
});

</script>

<styleÂ scoped>
.descÂ {
Â Â position:Â fixed;
Â Â z-index:Â 100000;
Â Â background-color:Â rgba(255,Â 255,Â 255,Â 0.5);
Â Â width:Â 600px;
Â Â top:Â 100px;
Â Â left:Â 50%;
Â Â margin-left:Â -300px;
Â Â transition:Â allÂ 0.5s;
Â Â transform:Â translate(-100vw,Â 0);
Â Â padding:Â 15px;
}
.desc.activeÂ {
Â Â transform:Â translate(0,Â 0);
}
.prod-list,
.scene-listÂ {
Â Â display:Â block;
Â Â position:Â fixed;
Â Â top:Â 0;
Â Â z-index:Â 999;
Â Â width:Â auto;
}
h1Â {
Â Â font-size:Â 20px;
Â Â font-weight:Â 900;
Â Â padding:Â 10pxÂ 25pxÂ 0;
}
.prod-listÂ {
Â Â left:Â 0;
}
.scene-listÂ {
Â Â right:Â 0;
}
.productsÂ {
Â Â display:Â flex;
Â Â flex-direction:Â column;
Â Â justify-content:Â center;
Â Â align-items:Â center;
}
.prod-itemÂ {
Â Â display:Â flex;
Â Â flex-direction:Â column;
Â Â justify-content:Â center;
Â Â align-items:Â center;
Â Â width:Â 250px;
Â Â background-color:Â rgba(255,Â 255,Â 255,Â 0.5);
Â Â border-radius:Â 20px;
Â Â overflow:Â hidden;
Â Â margin:Â 10pxÂ 0;
Â Â box-shadow:Â 2pxÂ 2pxÂ 5pxÂ #666;
Â Â transition:Â allÂ 0.3s;
}
.prod-itemÂ imgÂ {
Â Â width:Â 190px;
}
.prod-titleÂ {
Â Â padding:Â 0Â 20px;
}
.scene-itemÂ {
Â Â padding:Â 6pxÂ 0;
}
.scene-itemÂ imgÂ {
Â Â width:Â 250px;
Â Â border-radius:Â 10px;
Â Â box-shadow:Â 2pxÂ 2pxÂ 10pxÂ #666;
Â Â transition:Â allÂ 0.3s;
}
img.activeÂ {
Â Â box-shadow:Â 2pxÂ 2pxÂ 5pxÂ #666,Â 0pxÂ 0pxÂ 10pxÂ red;
}
img:hoverÂ {
Â Â transform:Â translate(0px,Â -5px);
Â Â box-shadow:Â 2pxÂ 2pxÂ 5pxÂ #666,Â 0pxÂ 0pxÂ 10pxÂ orangered;
}
</style>


```

![](https://mmbiz.qpic.cn/sz_mmbiz_png/9Z5K66tFPiax49af9tF6YQg4iaFwUckibQYjH2HLQtypmEMSWvBesgSrPrelBpkIlqggbx4cDTH2BapczBv5f4YGw/640?wx_fmt=png&from=appmsg)

##### å¢åŠ æ“ä½œäº‹ä»¶

```
functionÂ changeModel(prod,Â pI)Â {
Â Â data.pIndexÂ =Â pI;
Â Â data.base3d.setModel(prod.modelName);
}
functionÂ changeHdr(scene,Â index)Â {
Â Â data.sceneIndexÂ =Â index;
Â Â data.base3d.setEnvMap(scene);
}


```

#### å¤§åŠŸå‘Šæˆ

> æ”¯æŒä¸åŒä½ç½®å±•ç¤ºä¸åŒæè¿°ï¼šé…åˆæ•°æ®é…ç½®æ¸²æŸ“ä¸åŒæ¡¢çš„æ•ˆæœ

![](https://mmbiz.qpic.cn/sz_mmbiz_gif/9Z5K66tFPiax49af9tF6YQg4iaFwUckibQYhLYHamR0TNf2nHzmaDXcaRESOTMJLrUXWmHXKxMhHTLiavjxaCkOtaA/640?wx_fmt=gif&from=appmsg)

> æ ¹æ®é€‰ä¸­çš„äº§å“ï¼Œåˆ‡æ¢ç›¸åº”äº§å“æ•ˆæœ

![](https://mmbiz.qpic.cn/sz_mmbiz_gif/9Z5K66tFPiax49af9tF6YQg4iaFwUckibQYjnz4pOX4W8NFsePcBP8cnsecTFic5uibAN4eawmmDJyS0dB6Po8K3gyg/640?wx_fmt=gif&from=appmsg)

> æ ¹æ®é€‰ä¸­åœºæ™¯ï¼Œåˆ‡æ¢ç›¸åº”çš„åœºæ™¯

![](https://mmbiz.qpic.cn/sz_mmbiz_gif/9Z5K66tFPiax49af9tF6YQg4iaFwUckibQYUjKT1Vu3r56XUvFMvJNI6awlKuNEwnl1az0gCRrjx8DMq2JmiaYmalw/640?wx_fmt=gif&from=appmsg)

### æ€»ç»“

*   é€šè¿‡ç±»çš„æ–¹å¼åˆ›å»ºçš„æ–¹æ³•ï¼Œèƒ½å¤Ÿå¾ˆå¥½çš„ä¿å­˜äº†åˆ›å»ºè¿‡ç¨‹ä¸­ 3D æ¨¡å‹çš„æ‰€å…·å¤‡çš„å±æ€§å’ŒåŠŸèƒ½ï¼Œåœ¨å®ä¾‹åŒ–åï¼Œå¯ä»¥å¾ˆä¾¿æ·çš„è·å–åˆ°ç›¸åº”çš„å±æ€§
    
*   åœ¨åˆ›å»ºåœºæ™¯ / æ¨¡å‹æ—¶ï¼Œå¯ä»¥æ ¹æ®è¦çªå‡ºçš„æ•ˆæœè°ƒæ•´ç›¸åº”çš„å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è®¤çœŸè§‚å¯Ÿåˆ›å»ºå‡ºæ¥çš„å®ä¾‹å¯¹è±¡ä¸­åŒ…å«çš„å±æ€§å’Œæ–¹æ³•ï¼Œæ–¹ä¾¿æˆ‘ä»¬æ¸²æŸ“ä½¿ç”¨
    

![](https://mmbiz.qpic.cn/sz_mmbiz_png/9Z5K66tFPiax49af9tF6YQg4iaFwUckibQYZcx6Ujuw5fdQXsG74HmuWy6fiaP6q47exL2kMwbia15E6UnE7z72F2dg/640?wx_fmt=png&from=appmsg)

### å‚è€ƒåŒ… / æ”¯æŒ

*   Three.js[2]
    
*   æœ¬é¡¹ç›®å‚è€ƒè§†é¢‘ [3]
    
*   æºç  [4]
    

å‚è€ƒèµ„æ–™

[1]

vite ä¸­æ–‡ç½‘: _https://vitejs.cn/guide/#scaffolding-your-first-vite-project_

[2]

Three.js: _http://www.webgl3d.cn/Three.js/_

[3]

threejs æ‰“é€ æ²‰æµ¸å¼å•†åŸ 2022 å…¨æ–° Vue3 ä¼ä¸šé¡¹ç›®å®æˆ˜: _https://www.bilibili.com/video/BV15T4y1175F/?p=21&vd_source=797532e4fa3575d6c48e18321f8de472_

[4]

æºç : _https://gitee.com/yueliangliaoliao/vue-three_

### æœ€å  

Node ç¤¾ç¾¤

```
æˆ‘ç»„å»ºäº†ä¸€ä¸ªæ°›å›´ç‰¹åˆ«å¥½çš„ Node.js ç¤¾ç¾¤ï¼Œé‡Œé¢æœ‰å¾ˆå¤š Node.jså°ä¼™ä¼´ï¼Œå¦‚æœä½ å¯¹Node.jså­¦ä¹ æ„Ÿå…´è¶£çš„è¯ï¼ˆåç»­æœ‰è®¡åˆ’ä¹Ÿå¯ä»¥ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€èµ·è¿›è¡ŒNode.jsç›¸å…³çš„äº¤æµã€å­¦ä¹ ã€å…±å»ºã€‚ä¸‹æ–¹åŠ  è€ƒæ‹‰ å¥½å‹å›å¤ã€ŒNodeã€å³å¯ã€‚

Â Â Â â€œåˆ†äº«ã€ç‚¹èµã€åœ¨çœ‹â€ æ”¯æŒä¸€ä¸‹

```