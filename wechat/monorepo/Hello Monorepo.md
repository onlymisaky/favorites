> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [mp.weixin.qq.com](https://mp.weixin.qq.com/s/kFJqZrJVu5jh5HNOhsOEfg)

> ❝
> 
> 「前端充电宝」全新系列文章：**「Hello World」**，每篇分享一个热门、全新的前端技术！
> 
> ❞

为了解决代码共享、重复和一致性等问题，越来越多的团队转向了 Monorepo。本文就来了解一下什么是 Monorepo，它们可以带来哪些好处，以及常用的 Monorepo 开发工具。帮助我们更好地理解和应用这一代码管理策略。让我们一起进入 Monorepo 的世界，打破传统的代码管理方式，迎接更高效的开发体验！

什么是 Monorepo ？
--------------

Monorepo 是一个包含多个独立项目，并且具有明确定义的关系的单个代码库。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/EO58xpw5UMPTB5QqOoYEyHaCiciaPMnxeNOENWsVEWDEypxz0u6CRBQP9XqxXDOrvb55tI8hQkG9Q3xDSMTvDIfA/640?wx_fmt=png)一个真正的 Monorepo 不仅仅是将多个项目的代码放在同一个代码库中。它还需要这些项目之间有明确定义的关系。如果这些项目之间没有良好定义的关系，那么就不能称之为 Monorepo。

类似地，如果一个代码库中包含了一个庞大的应用，而没有对其进行分割和封装，那么这只是一个大型的代码库，而不是真正的 Monorepo。即使你给它取一个花里胡哨的名字，也不能改变它的本质。

事实上，一个优秀的 Monorepo 正好与庞大的代码库相反，它应该具有良好的结构和模块化。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/EO58xpw5UMPTB5QqOoYEyHaCiciaPMnxeNI7Eyv5zv5hScqDHI1EXicDr9x53ZXnenRyNDBOGBFriaEa6byaxnHS2A/640?wx_fmt=png)

Monorepo 解决了什么问题？
-----------------

### Polyrepo

为了讨论的方便，假设多个代码库（"polyrepo"）是与单一代码库（"monorepo"）相对应的概念。polyrepo 表示多代码库，是当前开发应用的标准方式：**每个团队、应用或项目都有一个代码库**。通常情况下，每个代码库只有一个构建产物，并且拥有简单的构建流程。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/EO58xpw5UMPTB5QqOoYEyHaCiciaPMnxeNPuiaMeB01Gc79egrianIhjDvDSrodNeRNKoE3Djs0e9pQYAHNCHmg1KA/640?wx_fmt=png)行业之所以采用多代码库的方式进行开发，有一个重要原因：**团队自治**。团队希望能够自主决定使用哪些库，何时部署应用或库，以及谁可以贡献或使用他们的代码。

团队自治是一种组织架构和开发模式的趋势，它赋予了团队更大的自主权和灵活性。每个团队拥有自己的代码库，可以根据自己的需求和优先级进行独立的决策和开发。这种方式能够提高团队的效率和创造力，同时也减少了团队之间的依赖和冲突。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/EO58xpw5UMPTB5QqOoYEyHaCiciaPMnxeNibP4W5K1JTyysyY16vGVyonrQq6kWMvoZCWeMxSBjQK5VBSu3BUIePA/640?wx_fmt=png)这些都是好的方面，那么为什么需要采取不同的方式呢？因为这种自治是通过隔离来实现的，而隔离却会损害协作。具体来说，在多代码库环境中存在以下常见问题：

*   **繁琐的代码共享**：要在多个代码库之间共享代码，可能需要为共享代码创建一个专门的代码库。这样就需要设置工具和持续集成（CI）环境，将贡献者添加到代码库中，并设置包发布，以便其他代码库可以依赖它。更不用说在多个代码库之间解决不兼容的第三方库版本的问题了…
    
*   **大量代码重复**：由于不愿意费事设置共享的代码库，团队通常会在每个代码库中编写自己的常见服务和组件的实现，这导致了很多代码重复。这种做法不仅浪费了时间，而且在组件和服务发生变化时增加了维护、安全性和质量控制的负担。
    
*   **对共享库和消费者进行成本高昂的跨存储库更改**：在多个代码库中进行共享库的跨库更改是具有挑战性且成本较高的。当一个共享库需要进行关键 bug 修复或重大变更时，开发人员需要在各个代码库中逐一应用这些修改，而这些代码库之间可能存在孤立的修订历史。这也意味着必须在每个代码库中进行相应的测试和验证，确保更改不会引入新的问题。
    
*   **工具不一致**：工具链的不一致性会给开发人员带来额外的负担。不同的项目使用不同的命令和工具，可能需要花费时间和精力来适应和记忆这些差异。而且，当需要在多个项目之间进行切换时，频繁地切换命令和工具可能会导致混淆和错误。
    

### Monorepo

在多代码库环境（"polyrepo"）中工作时，可能会遇到一些问题。那单一代码库（"monorepo"）是如何解决这些问题的呢？

*   **创建新项目无需额外开销**：创建新项目无需额外的开销。如果所有消费者都在同一个代码库中，可以直接在现有的开发环境中创建和设置新项目，避免了额外的资源和配置成本。
    
*   **原子提交跨项目**：每次提交都能确保所有项目能够协同工作。当在同一次提交中修复所有问题时，不存在破坏性变更的问题，因为所有修改都是一起完成的。
    
*   **同一版本的所有内容**：可以避免因项目依赖冲突而导致的不兼容性问题。所有项目都共享同一份代码库，使用相同的第三方库版本，减少了版本管理和冲突解决的复杂性。
    
*   **开发灵活性**：可以建立一种统一的构建和测试应用程序的方式，即使这些应用程序使用不同的工具和技术。开发人员可以自信地为其他团队的应用程序做出贡献，并验证其更改是安全的。
    

Monorepo 工具有哪些？
---------------

Monorepo 拥有许多优势，但为了使其发挥作用，需要使用正确的工具。随着工作空间的扩大，这些工具必须帮助开发者保持高效、可理解和可管理。

那 Monorepo 工具应该提供些什么呢？

*   本地计算缓存
    
*   本地任务编排
    
*   分布式计算缓存
    
*   分布式任务执行
    
*   透明远程执行
    
*   检测受影响的项目 / 包
    
*   工作区分析
    
*   依赖图可视化
    
*   代码共享
    
*   一致的工具
    
*   代码生成
    
*   项目约束和可见性
    

> **注意**：除了功能以外，还有其他因素会影响使用体验。尽管一个工具可能在某些方面功能不如其他工具强大，但由于用户体验、成熟度、文档、编辑器支持等因素的差异，用户可能会更喜欢使用它。有些功能可以很容易地通过自定义实现来添加，而有些功能则无法通过简单的修改来实现。因此，除了关注功能外，还需要综合考虑其他因素来选择适合自己需求的工具。

比较流行的 Monorepo 工具如下：

<table data-line="63" width="NaN"><thead data-line="54"><tr data-line="54"><th data-line="54" data-style="border-top-width: 1px; border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;"><strong data-line="54">工具</strong></th><th data-line="54" data-style="border-top-width: 1px; border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;"><strong data-line="54">开发团队</strong></th><th data-line="54" data-style="border-top-width: 1px; border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;"><strong data-line="54">简介</strong></th></tr></thead><tbody data-line="63"><tr data-line="56"><td data-line="56" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Bazel</td><td data-line="56" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">谷歌</td><td data-line="56" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">快速、可扩展、多语言且可扩展的构建系统。</td></tr><tr data-line="57" data-style="background-color: rgb(246, 248, 250);"><td data-line="57" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Gradle Build Tool</td><td data-line="57" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Gradle</td><td data-line="57" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">专为多项目构建而设计的快速、灵活的多语言构建系统。</td></tr><tr data-line="58"><td data-line="58" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Lage</td><td data-line="58" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">微软</td><td data-line="58" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">JS monorepos 中的任务运行器。</td></tr><tr data-line="59" data-style="background-color: rgb(246, 248, 250);"><td data-line="59" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Lerna</td><td data-line="59" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Nrwl</td><td data-line="59" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">一个用于管理具有多个包的 JavaScript 项目的工具。</td></tr><tr data-line="60"><td data-line="60" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Nx</td><td data-line="60" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Nrwl</td><td data-line="60" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">下一代构建系统具有一流的 monorepo 支持和强大的集成。</td></tr><tr data-line="61" data-style="background-color: rgb(246, 248, 250);"><td data-line="61" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Pants</td><td data-line="61" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Pants Build</td><td data-line="61" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">一个快速、可扩展、用户友好的构建系统，适用于各种规模的代码库。</td></tr><tr data-line="62"><td data-line="62" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Rush</td><td data-line="62" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">微软</td><td data-line="62" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">适合拥有大量团队和项目的大型单一仓库。属于 Rush Stack 项目系列的一部分。</td></tr><tr data-line="63" data-style="background-color: rgb(246, 248, 250);"><td data-line="63" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Turborepo</td><td data-line="63" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Vercel</td><td data-line="63" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">JavaScript 和 TypeScript 代码库的高性能构建系统</td></tr></tbody></table>

接下来将逐个功能来比较各个 Monorepo 工具在这些功能上的表现。

### 本地计算缓存

本地计算缓存是指在进行任务执行时，将任务的输入、输出和中间结果存储在本地机器上，以便在后续的构建或测试过程中可以直接使用这些已经计算过的结果，而不需要重新执行相同的任务。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/EO58xpw5UMPTB5QqOoYEyHaCiciaPMnxeNSiaXGZOK1yzpUUP7MT0IhbibicnxXLIuOFofias3WTQuF9ExODnia7dibGzQ/640?wx_fmt=png)<table data-line="79" width="NaN"><thead data-line="70"><tr data-line="70"><th data-line="70" data-style="border-top-width: 1px; border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;"><strong data-line="70">工具</strong></th><th data-line="70" data-style="border-top-width: 1px; border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;"><strong data-line="70">是否支持</strong></th></tr></thead><tbody data-line="79"><tr data-line="72"><td data-line="72" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Bazel</td><td data-line="72" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅</td></tr><tr data-line="73" data-style="background-color: rgb(246, 248, 250);"><td data-line="73" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Gradle Build Tool</td><td data-line="73" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅ Gradle Build Tool 本身提供本地构建缓存。Gradle Enterprise 添加了对复制和管理的支持。</td></tr><tr data-line="74"><td data-line="74" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Lage</td><td data-line="74" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅</td></tr><tr data-line="75" data-style="background-color: rgb(246, 248, 250);"><td data-line="75" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Lerna</td><td data-line="75" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅ &nbsp;Lerna v6 具有由 Nx 提供支持的内置本地计算缓存。</td></tr><tr data-line="76"><td data-line="76" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Nx</td><td data-line="76" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅</td></tr><tr data-line="77" data-style="background-color: rgb(246, 248, 250);"><td data-line="77" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Pants</td><td data-line="77" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅ 像 React 一样，Nx 在从其缓存中恢复结果时进行了树差异比较，这使得它在平均情况下比其他工具更快</td></tr><tr data-line="78"><td data-line="78" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Rush</td><td data-line="78" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅ 利用系统 tar 命令更快地恢复文件。</td></tr><tr data-line="79" data-style="background-color: rgb(246, 248, 250);"><td data-line="79" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Turborepo</td><td data-line="79" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅</td></tr></tbody></table>

### 本地任务编排

本地任务编排是指在执行任务时，按照规定的顺序和并行方式来管理和执行这些任务。任务之间可能存在依赖关系，需要按照正确的顺序进行执行，同时还可以利用并行计算的优势，提高任务的执行效率。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/EO58xpw5UMPTB5QqOoYEyHaCiciaPMnxeNAPibP67ibYkicAUnDtx1NkoicXGQoOcNI8eQXxTrFFicBbrItLcpCgEpDug/640?wx_fmt=png)<table data-line="94" width="NaN"><thead data-line="85"><tr data-line="85"><th data-line="85" data-style="border-top-width: 1px; border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;"><strong data-line="85">工具</strong></th><th data-line="85" data-style="border-top-width: 1px; border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;"><strong data-line="85">是否支持</strong></th></tr></thead><tbody data-line="94"><tr data-line="87"><td data-line="87" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Bazel</td><td data-line="87" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅</td></tr><tr data-line="88" data-style="background-color: rgb(246, 248, 250);"><td data-line="88" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Gradle Build Tool</td><td data-line="88" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅ Gradle Build Tool 通过配置提供对并行任务的支持，并通过其灵活的 Groovy 或 Kotlin DSL 提供任务编排支持。</td></tr><tr data-line="89"><td data-line="89" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Lage</td><td data-line="89" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅</td></tr><tr data-line="90" data-style="background-color: rgb(246, 248, 250);"><td data-line="90" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Lerna</td><td data-line="90" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅ Lerna v6 充分利用了 Nx 来高效地协调和并行执行任务。</td></tr><tr data-line="91"><td data-line="91" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Nx</td><td data-line="91" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅</td></tr><tr data-line="92" data-style="background-color: rgb(246, 248, 250);"><td data-line="92" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Pants</td><td data-line="92" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅</td></tr><tr data-line="93"><td data-line="93" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Rush</td><td data-line="93" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅ 支持此功能。命令可以被建模为简单的脚本，也可以作为独立的 “阶段”（例如构建、测试等）。</td></tr><tr data-line="94" data-style="background-color: rgb(246, 248, 250);"><td data-line="94" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Turborepo</td><td data-line="94" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅</td></tr></tbody></table>

### 分布式计算缓存

分布式计算缓存允许在不同的环境中共享缓存结果。通过共享缓存，整个组织中的不同部门或团队可以共享已经计算过的结果，避免重复构建或测试相同的内容。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/EO58xpw5UMPTB5QqOoYEyHaCiciaPMnxeNXPr2YZw4LCT9icqugrJosDB7XR9OTbiay0H7GN6OwymlUGlJxrWibkHfQ/640?wx_fmt=png)<table data-line="109" width="NaN"><thead data-line="100"><tr data-line="100"><th data-line="100" data-style="border-top-width: 1px; border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;"><strong data-line="100">工具</strong></th><th data-line="100" data-style="border-top-width: 1px; border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;"><strong data-line="100">是否支持</strong></th></tr></thead><tbody data-line="109"><tr data-line="102"><td data-line="102" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Bazel</td><td data-line="102" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅</td></tr><tr data-line="103" data-style="background-color: rgb(246, 248, 250);"><td data-line="103" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Gradle Build Tool</td><td data-line="103" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅ Gradle Build Tool 提供远程分布式缓存。Gradle Enterprise 添加了对复制和管理的支持。</td></tr><tr data-line="104"><td data-line="104" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Lage</td><td data-line="104" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅</td></tr><tr data-line="105" data-style="background-color: rgb(246, 248, 250);"><td data-line="105" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Lerna</td><td data-line="105" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅ Lerna v6 可以连接到 Nx Cloud 以启用分布式缓存。</td></tr><tr data-line="106"><td data-line="106" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Nx</td><td data-line="106" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅</td></tr><tr data-line="107" data-style="background-color: rgb(246, 248, 250);"><td data-line="107" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Pants</td><td data-line="107" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅</td></tr><tr data-line="108"><td data-line="108" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Rush</td><td data-line="108" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅ Rush 内置了对 Azure 和 AWS 存储的支持，并具有允许自定义缓存提供程序的插件 API。</td></tr><tr data-line="109" data-style="background-color: rgb(246, 248, 250);"><td data-line="109" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Turborepo</td><td data-line="109" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅</td></tr></tbody></table>

### 分布式任务执行

分布式任务执行是指将一个命令分布到多台机器上执行的能力，同时在很大程度上保持在单台机器上运行时的开发人员体验。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/EO58xpw5UMPTB5QqOoYEyHaCiciaPMnxeNKvnNaGK6kstnBvc6ib8gf8SwDG5kCOv9Eic1VmmhBklyhHG4rxabpsXg/640?wx_fmt=png)<table data-line="124" width="NaN"><thead data-line="115"><tr data-line="115"><th data-line="115" data-style="border-top-width: 1px; border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;"><strong data-line="115">工具</strong></th><th data-line="115" data-style="border-top-width: 1px; border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;"><strong data-line="115">是否支持</strong></th></tr></thead><tbody data-line="124"><tr data-line="117"><td data-line="117" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Bazel</td><td data-line="117" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅ Bazel 的实现是最复杂的一种，可以扩展到包含数十亿行代码的存储库，设置起来也很困难。</td></tr><tr data-line="118" data-style="background-color: rgb(246, 248, 250);"><td data-line="118" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Gradle Build Tool</td><td data-line="118" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">⚠️ &nbsp;Gradle Enterprise 可以分布式执行测试任务。</td></tr><tr data-line="119"><td data-line="119" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Lage</td><td data-line="119" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">❌</td></tr><tr data-line="120" data-style="background-color: rgb(246, 248, 250);"><td data-line="120" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Lerna</td><td data-line="120" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅ Lerna v6 可以连接到 Nx Cloud 以实现分布式任务执行。</td></tr><tr data-line="121"><td data-line="121" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Nx</td><td data-line="121" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅ Nx 的实现并不像 Bazel 那样复杂，但可以通过小的配置更改来打开它。</td></tr><tr data-line="122" data-style="background-color: rgb(246, 248, 250);"><td data-line="122" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Pants</td><td data-line="122" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅ Pant 的实现与 Bazel 类似，并使用相同的远程执行 API。</td></tr><tr data-line="123"><td data-line="123" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Rush</td><td data-line="123" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">⚠️ Rush 通过选择性地与 Microsoft 的 BuildXL 加速器集成来提供此功能。</td></tr><tr data-line="124" data-style="background-color: rgb(246, 248, 250);"><td data-line="124" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Turborepo</td><td data-line="124" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">❌</td></tr></tbody></table>

### 透明远程执行

透明的远程执行功能允许开发人员在本地开发环境中执行命令，并将这些命令自动透明地分发到多台远程机器上进行执行。开发人员可以像在单台机器上运行命令一样，在本地环境中编写和执行命令，而无需手动切换到远程机器或修改代码。

<table data-line="138" width="NaN"><thead data-line="129"><tr data-line="129"><th data-line="129" data-style="border-top-width: 1px; border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;"><strong data-line="129">工具</strong></th><th data-line="129" data-style="border-top-width: 1px; border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;"><strong data-line="129">是否支持</strong></th></tr></thead><tbody data-line="138"><tr data-line="131"><td data-line="131" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Bazel</td><td data-line="131" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅ 这是 Bazel 和其他工具最大的区别</td></tr><tr data-line="132" data-style="background-color: rgb(246, 248, 250);"><td data-line="132" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Gradle Build Tool</td><td data-line="132" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">❌</td></tr><tr data-line="133"><td data-line="133" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Lage</td><td data-line="133" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">❌</td></tr><tr data-line="134" data-style="background-color: rgb(246, 248, 250);"><td data-line="134" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Lerna</td><td data-line="134" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">❌</td></tr><tr data-line="135"><td data-line="135" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Nx</td><td data-line="135" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">❌</td></tr><tr data-line="136" data-style="background-color: rgb(246, 248, 250);"><td data-line="136" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Pants</td><td data-line="136" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅ Pant 的实现与 Bazel 类似，并使用相同的远程执行 API。</td></tr><tr data-line="137"><td data-line="137" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Rush</td><td data-line="137" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">❌</td></tr><tr data-line="138" data-style="background-color: rgb(246, 248, 250);"><td data-line="138" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Turborepo</td><td data-line="138" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">❌</td></tr></tbody></table>

### 检测受影响的项目 / 包

在进行构建或测试操作时，通过检测变更的内容，确定可能受到变更影响的项目或包，从而只针对受影响的项目进行构建或测试。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/EO58xpw5UMPTB5QqOoYEyHaCiciaPMnxeNvmw0Pq4Wla1ZnSoS66tWSCibO5GzichcWVapWNZicI9dl2XKnIxZ6qBRw/640?wx_fmt=png)<table data-line="153" width="NaN"><thead data-line="144"><tr data-line="144"><th data-line="144" data-style="border-top-width: 1px; border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;"><strong data-line="144">工具</strong></th><th data-line="144" data-style="border-top-width: 1px; border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;"><strong data-line="144">是否支持</strong></th></tr></thead><tbody data-line="153"><tr data-line="146"><td data-line="146" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Bazel</td><td data-line="146" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">⚠️ Bazel 没有内置支持，但是第三方工具（如 target-determinator）使用 Bazel 的查询语言提供了这个功能。</td></tr><tr data-line="147" data-style="background-color: rgb(246, 248, 250);"><td data-line="147" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Gradle Build Tool</td><td data-line="147" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅ Gradle Build Tool 本身提供增量构建和最新检测。</td></tr><tr data-line="148"><td data-line="148" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Lage</td><td data-line="148" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅</td></tr><tr data-line="149" data-style="background-color: rgb(246, 248, 250);"><td data-line="149" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Lerna</td><td data-line="149" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅</td></tr><tr data-line="150"><td data-line="150" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Nx</td><td data-line="150" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅ 支持，它的实现不仅查看更改了哪些文件，还查看更改的性质。</td></tr><tr data-line="151" data-style="background-color: rgb(246, 248, 250);"><td data-line="151" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Pants</td><td data-line="151" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅</td></tr><tr data-line="152"><td data-line="152" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Rush</td><td data-line="152" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅ 用于项目选择的命令行参数可以检测哪些项目受到 Git diff 的影响。Rush 还为自动化场景提供了 PackageChangeAnalyzer API。</td></tr><tr data-line="153" data-style="background-color: rgb(246, 248, 250);"><td data-line="153" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Turborepo</td><td data-line="153" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅</td></tr></tbody></table>

### 工作区分析

工作区是指包含多个项目或代码库的根目录。工作区分析通过解析工作区中的项目、文件和依赖关系，生成一个项目图，展示了项目之间的相互关系和依赖。这个项目图可以帮助开发人员更好地理解整个工作区的结构和组织，并能够快速定位和处理相关的项目。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/EO58xpw5UMPTB5QqOoYEyHaCiciaPMnxeNibHiaWVL308UeJELOnwhY1pibaf7MAgfyQvfE5PDdhdokdNNPOYWNJM0Q/640?wx_fmt=png)<table data-line="168" width="NaN"><thead data-line="159"><tr data-line="159"><th data-line="159" data-style="border-top-width: 1px; border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;"><strong data-line="159">工具</strong></th><th data-line="159" data-style="border-top-width: 1px; border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;"><strong data-line="159">是否支持</strong></th></tr></thead><tbody data-line="168"><tr data-line="161"><td data-line="161" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Bazel</td><td data-line="161" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">⚠️ Bazel 允许开发人员编写 BUILD 文件。一些公司构建了分析工作区源并生成 BUILD 文件的工具。</td></tr><tr data-line="162" data-style="background-color: rgb(246, 248, 250);"><td data-line="162" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Gradle Build Tool</td><td data-line="162" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅ 可以使用 build.gradle（Groovy 脚本）或 build.gradle.kts（Kotlin 脚本）来编写构建任务。</td></tr><tr data-line="163"><td data-line="163" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Lage</td><td data-line="163" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅</td></tr><tr data-line="164" data-style="background-color: rgb(246, 248, 250);"><td data-line="164" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Lerna</td><td data-line="164" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅</td></tr><tr data-line="165"><td data-line="165" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Nx</td><td data-line="165" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅ 默认情况下，Nx 分析 package.json、JavaScript 和 TypeScript 文件。它是可插拔的，可以扩展以支持其他平台（例如 Go、Java、Rust）。</td></tr><tr data-line="166" data-style="background-color: rgb(246, 248, 250);"><td data-line="166" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Pants</td><td data-line="166" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅ 这是 Pants 的最大差异化点。它使用静态分析来自动推断出支持的所有语言和框架的文件级依赖关系。</td></tr><tr data-line="167"><td data-line="167" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Rush</td><td data-line="167" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅ Rush 项目和单仓库项目具有相同的<code data-line="167">package.json</code>文件和构建脚本。通过创建 "rig packages"，可以在整个单体存储库（monorepo）之间共享工具和配置。</td></tr><tr data-line="168" data-style="background-color: rgb(246, 248, 250);"><td data-line="168" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Turborepo</td><td data-line="168" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅ Turborepo 分析 package.json 文件。</td></tr></tbody></table>

### 依赖图可视化

依赖关系图可视化工具可以将项目和 / 或任务之间的依赖关系以图形化的方式呈现出来。这个可视化过程是交互式的，也就是说可以对图中的节点进行搜索、过滤、隐藏、聚焦或突出显示，以及进行查询操作。

<table data-line="182" width="NaN"><thead data-line="173"><tr data-line="173"><th data-line="173" data-style="border-top-width: 1px; border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;"><strong data-line="173">工具</strong></th><th data-line="173" data-style="border-top-width: 1px; border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;"><strong data-line="173">是否支持</strong></th></tr></thead><tbody data-line="182"><tr data-line="175"><td data-line="175" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Bazel</td><td data-line="175" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅ Bazel 的实现支持自定义查询语言来过滤掉不感兴趣的节点。</td></tr><tr data-line="176" data-style="background-color: rgb(246, 248, 250);"><td data-line="176" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Gradle Build Tool</td><td data-line="176" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">⚠️ Gradle Build Scan 提供丰富的依赖关系信息，并且第三方工具可用于项目 / 任务图。</td></tr><tr data-line="177"><td data-line="177" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Lage</td><td data-line="177" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">⚠️ Lage 没有附带可视化工具，可以编写自己的可视化工具。</td></tr><tr data-line="178" data-style="background-color: rgb(246, 248, 250);"><td data-line="178" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Lerna</td><td data-line="178" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">⚠️ Lerna 没有附带可视化工具，可以编写自己的可视化工具。</td></tr><tr data-line="179"><td data-line="179" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Nx</td><td data-line="179" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅ Nx 配备了交互式可视化工具，可用于过滤和探索大型工作区。</td></tr><tr data-line="180" data-style="background-color: rgb(246, 248, 250);"><td data-line="180" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Pants</td><td data-line="180" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">⚠️ Pants 并没有自带可视化工具，但它可以生成一个包含代码库详细图结构的 JSON 文件，该文件可以被处理成可用于可视化工具的输入数据。</td></tr><tr data-line="181"><td data-line="181" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Rush</td><td data-line="181" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">⚠️ Rush 没有附带可视化工具，可以编写自己的可视化工具。</td></tr><tr data-line="182" data-style="background-color: rgb(246, 248, 250);"><td data-line="182" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Turborepo</td><td data-line="182" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅ Turborepo 使用 Graphviz 生成执行计划的静态图像和 HTML 文件。该实现不是交互式的。</td></tr></tbody></table>

### 代码共享

代码共享是指通过一些方式来方便地分享代码库中独立的代码片段。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/EO58xpw5UMPTB5QqOoYEyHaCiciaPMnxeNGj69ZOF61xy5s1xp6ZaACmn46wll7EESzZicibFSynFbG4FPRvtmoLXA/640?wx_fmt=png)<table data-line="197" width="NaN"><thead data-line="188"><tr data-line="188"><th data-line="188" data-style="border-top-width: 1px; border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;"><strong data-line="188">工具</strong></th><th data-line="188" data-style="border-top-width: 1px; border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;"><strong data-line="188">是否支持</strong></th></tr></thead><tbody data-line="197"><tr data-line="190"><td data-line="190" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Bazel</td><td data-line="190" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅ 可以将任何文件夹标记为一个项目，并通过 Bazel 的构建规则来实现该项目的共享。</td></tr><tr data-line="191" data-style="background-color: rgb(246, 248, 250);"><td data-line="191" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Gradle Build Tool</td><td data-line="191" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅ 可以发布可共享的构件并从多个仓库中引用依赖项。</td></tr><tr data-line="192"><td data-line="192" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Lage</td><td data-line="192" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅ 支持，只有 npm 包可以共享。</td></tr><tr data-line="193" data-style="background-color: rgb(246, 248, 250);"><td data-line="193" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Lerna</td><td data-line="193" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅ 支持，只有 npm 包可以共享。</td></tr><tr data-line="194"><td data-line="194" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Nx</td><td data-line="194" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅ 支持，任何文件夹都可以标记为一个项目，并且可以进行共享。Nx 插件帮助配置 WebPack、Rollup、TypeScript 和其他工具，以实现共享而不影响开发人员的工作环境。</td></tr><tr data-line="195" data-style="background-color: rgb(246, 248, 250);"><td data-line="195" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Pants</td><td data-line="195" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅ 支持打包、发布和使用代码构件，使用底层语言和框架的标准惯用法。</td></tr><tr data-line="196"><td data-line="196" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Rush</td><td data-line="196" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅ 支持，不鼓励从未声明为 npm 依赖的文件夹导入代码。这确保了项目可以在单体仓库之间轻松移动。对于创建包是过于繁琐的情况，"packlets" 提供了一个轻量级的替代方案。</td></tr><tr data-line="197" data-style="background-color: rgb(246, 248, 250);"><td data-line="197" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Turborepo</td><td data-line="197" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅ 支持，只有 npm 包可以共享。</td></tr></tbody></table>

### 一致的工具

这样的工具可以帮助开发人员在不同的技术栈之间切换时更加轻松和无缝。不管是使用 JavaScript 框架，还是使用 Go、Rust、Java 等其他技术，开发人员都可以获得相同的工具支持和开发体验。这种一致性的工具能够简化开发流程，减少学习成本，并提高团队的协作效率。

例如，该工具可以分析`package.json`和 JS/TS 文件，以确定 JavaScript 项目的依赖关系以及构建和测试方法。但是，对于 Rust，它会分析`Cargo.toml`文件，对于 Java，它会分析`Gradle`文件。因此，该工具需要具备插件化的能力。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/EO58xpw5UMPTB5QqOoYEyHaCiciaPMnxeNSd7hg3PvKdhWb4egqw4HN58US83XdEX3MibSN2o9SbiaARa0AFoxXSsg/640?wx_fmt=png)<table data-line="214" width="NaN"><thead data-line="205"><tr data-line="205"><th data-line="205" data-style="border-top-width: 1px; border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;"><strong data-line="205">工具</strong></th><th data-line="205" data-style="border-top-width: 1px; border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;"><strong data-line="205">是否支持</strong></th></tr></thead><tbody data-line="214"><tr data-line="207"><td data-line="207" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Bazel</td><td data-line="207" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅ Bazel 的构建规则就像是不同技术和框架的插件。</td></tr><tr data-line="208" data-style="background-color: rgb(246, 248, 250);"><td data-line="208" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Gradle Build Tool</td><td data-line="208" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅ 通过插件生态系统可以扩展其功能，例如使用 CMake 进行本地构建或使用 Webpack 进行打包。</td></tr><tr data-line="209"><td data-line="209" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Lage</td><td data-line="209" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">❌ 只能运行 npm 脚本。</td></tr><tr data-line="210" data-style="background-color: rgb(246, 248, 250);"><td data-line="210" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Lerna</td><td data-line="210" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">❌ 只能运行 npm 脚本。</td></tr><tr data-line="211"><td data-line="211" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Nx</td><td data-line="211" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅ Nx 是可插拔的。它默认能够调用 npm 脚本，但也可以扩展以调用其他工具（例如 Gradle）。</td></tr><tr data-line="212" data-style="background-color: rgb(246, 248, 250);"><td data-line="212" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Pants</td><td data-line="212" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅ Pants 具有强大的插件 API，可以提供统一的用户体验（UX），适用于不同的语言和框架。它内置了多个插件，包括 Python、Java、Scala、Go、Shell 和 Docker 等，同时还有更多的插件正在开发中。还可以使用相同的 API 编写自定义的构建规则。</td></tr><tr data-line="213"><td data-line="213" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Rush</td><td data-line="213" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">❌ Rush 只针对 TypeScript/JavaScript 项目进行构建，并推荐一种解耦的方法，即使用本地工具链或 BuildXL 单独构建原生组件。理想情况下，Node.js 是单体库开发者所需的唯一先决条件。</td></tr><tr data-line="214" data-style="background-color: rgb(246, 248, 250);"><td data-line="214" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Turborepo</td><td data-line="214" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">❌ Turborepo 只能运行 npm 脚本，但不必安装 Node.js。</td></tr></tbody></table>

### 代码生成

原生支持生成代码。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/EO58xpw5UMPTB5QqOoYEyHaCiciaPMnxeNXt9PcssswNE4XtRDWut1RGMmMsjuaIPtyoAs6CbFohGrgK78IwpOXA/640?wx_fmt=png)<table data-line="229" width="NaN"><thead data-line="220"><tr data-line="220"><th data-line="220" data-style="border-top-width: 1px; border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;"><strong data-line="220">工具</strong></th><th data-line="220" data-style="border-top-width: 1px; border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;"><strong data-line="220">是否支持</strong></th></tr></thead><tbody data-line="229"><tr data-line="222"><td data-line="222" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Bazel</td><td data-line="222" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">⚠️ 可以使用外部代码生成器。</td></tr><tr data-line="223" data-style="background-color: rgb(246, 248, 250);"><td data-line="223" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Gradle Build Tool</td><td data-line="223" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">⚠️ 可以使用外部代码生成器。</td></tr><tr data-line="224"><td data-line="224" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Lage</td><td data-line="224" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">⚠️ 可以使用外部代码生成器。</td></tr><tr data-line="225" data-style="background-color: rgb(246, 248, 250);"><td data-line="225" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Lerna</td><td data-line="225" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">⚠️ 可以使用外部代码生成器。</td></tr><tr data-line="226"><td data-line="226" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Nx</td><td data-line="226" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅ Nx 具有强大的代码生成能力。它使用虚拟文件系统，并提供编辑器集成。Nx 插件提供了流行框架的生成器，还可以使用其他生成器。</td></tr><tr data-line="227" data-style="background-color: rgb(246, 248, 250);"><td data-line="227" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Pants</td><td data-line="227" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">✅ Pants 内置了适用于流行的代码生成框架的插件，包括 Protobuf/gRPC、Thrift、Scrooge、Avro 和 SOAP。它还提供了插件 API 支持，以便轻松地添加新的代码生成器。Pants 支持从单个 codegen 源生成多种语言的代码。它能够通过对 codegen 源的静态分析来推断依赖关系，并在这些源发生变化时正确地使生成的代码失效。</td></tr><tr data-line="228"><td data-line="228" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Rush</td><td data-line="228" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">⚠️ Rush 的维护者建议将项目模板作为单体库中的普通项目进行维护，以确保它们能够在编译时没有错误。通过一个社区插件，可以使用项目脚手架命令来生成项目模板。</td></tr><tr data-line="229" data-style="background-color: rgb(246, 248, 250);"><td data-line="229" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Turborepo</td><td data-line="229" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">⚠️ 可以使用外部代码生成器。</td></tr></tbody></table>

### 项目约束和可见性

Rush 支持定义规则来约束仓库内的依赖关系。例如，开发人员可以将某些项目标记为私有项目，只有他们团队内的人才能依赖这些项目。开发人员还可以根据使用的技术（例如 React 或 Nest.js）标记项目，并确保后端项目不导入前端项目。

![](https://mmbiz.qpic.cn/sz_mmbiz_png/EO58xpw5UMPTB5QqOoYEyHaCiciaPMnxeNicpCehP8WAKDmdLTyQV9JewtVWIPr5ClzVW2GZPURZw9JibMXiaSAIr2A/640?wx_fmt=png)<table data-line="244" width="NaN"><thead data-line="235"><tr data-line="235"><th data-line="235" data-style="border-top-width: 1px; border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;"><strong data-line="235">工具</strong></th><th data-line="235" data-style="border-top-width: 1px; border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;"><strong data-line="235">是否支持</strong></th></tr></thead><tbody data-line="244"><tr data-line="237"><td data-line="237" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Bazel</td><td data-line="237" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅ Bazel 支持可见性规则，这有助于将私有内容与公共内容、可共享的内容等进行分隔。</td></tr><tr data-line="238" data-style="background-color: rgb(246, 248, 250);"><td data-line="238" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Gradle Build Tool</td><td data-line="238" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">⚠️ 本身不原生支持这样的规则，但其丰富的插件功能允许开发人员开发类似的规则。</td></tr><tr data-line="239"><td data-line="239" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Lage</td><td data-line="239" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">⚠️ 可以使用一组自定义规则和额外配置的代码检查工具（linter）来确保满足某些约束条件。</td></tr><tr data-line="240" data-style="background-color: rgb(246, 248, 250);"><td data-line="240" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Lerna</td><td data-line="240" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">⚠️ 可以使用一组自定义规则和额外配置的代码检查工具（linter）来确保满足某些约束条件。</td></tr><tr data-line="241"><td data-line="241" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Nx</td><td data-line="241" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅ 开发人员可以根据自己的需求对项目进行任意方式的注释，并建立不变量，而 Nx 将确保这些注释的有效性。它允许开发人员注释哪些是私有的、哪些是公开的、哪些是实验性的、哪些是稳定的等等。Nx 还允许为每个包定义公共 API，这样其他开发人员就无法深层导入到这些包中。</td></tr><tr data-line="242" data-style="background-color: rgb(246, 248, 250);"><td data-line="242" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Pants</td><td data-line="242" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">⚠️ 虽然原生支持尚未实现，但可以编写自定义插件来强制执行此类规则。</td></tr><tr data-line="243"><td data-line="243" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">Rush</td><td data-line="243" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background-image: inherit; background-position: inherit; background-size: inherit; background-repeat: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; min-width: 85px;">✅ Rush 可以根据项目类型选择性地要求在引入新的 NPM 依赖（内部或外部）时进行审批。它还支持针对 NPM 发布的版本策略。</td></tr><tr data-line="244" data-style="background-color: rgb(246, 248, 250);"><td data-line="244" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">Turborepo</td><td data-line="244" data-style="border-color: rgb(223, 226, 229); padding: 10px 16px; line-height: 24px; background: inherit; min-width: 85px;">⚠️ 可以使用一组自定义规则和额外配置的代码检查工具（linter）来确保满足某些约束条件。</td></tr></tbody></table>

小结
--

综上，Monorepo 是一种代码管理策略，它将一个项目的所有代码存储在一个单独的版本控制库中。Monorepo 解决了多个问题：解决了代码共享与重复的困扰，提供更好的可追踪性和一致性。通过使用 Monorepo，开发团队可以更好地组织、共享和管理代码，提高开发效率和协作质量。选择合适的 Monorepo 工具并灵活运用，能够帮助开发者更好地应对复杂的软件开发需求，推动项目的成功完成。

> 参考：https://monorepo.tools/

### 往期推荐

[5 个前端开源项目带你在 Web 上体验 Windows](http://mp.weixin.qq.com/s?__biz=MzU2MTIyNDUwMA==&mid=2247522356&idx=1&sn=89ac97681037899a40ef5fae01edfb83&chksm=fc7ed66fcb095f79c17cab0a1f6abd660d544aec09f13bdc4af9def1acf8328725e301ba6013&scene=21#wechat_redirect)

[程序员必读：提问的智慧，告诉你应如何提问！](http://mp.weixin.qq.com/s?__biz=MzU2MTIyNDUwMA==&mid=2247522224&idx=1&sn=811fb9517367090e2199fe10e4b4dbdf&chksm=fc7ed9ebcb0950fd857b8b7634df8d3d953ff3f042f7423f981fd1351049d21f854d9cb10386&scene=21#wechat_redirect)

[前端整洁架构](http://mp.weixin.qq.com/s?__biz=MzU2MTIyNDUwMA==&mid=2247522189&idx=1&sn=ed51dd3619221573faec0cb439b5c5d3&chksm=fc7ed9d6cb0950c0e23e42f8e937e37c910d293254fcc03cc86a14a9e4efcea8ab0408975748&scene=21#wechat_redirect)

[前端如何安全的渲染 HTML 字符串?](http://mp.weixin.qq.com/s?__biz=MzU2MTIyNDUwMA==&mid=2247522144&idx=1&sn=13994c52e8d949bd81dc6f615d8789c9&chksm=fc7ed93bcb09502d16ef93c6eca02be62ad1fb6091446530deb467dc04db18a87f8648925843&scene=21#wechat_redirect)

[如何在页面上优雅的展示代码？](http://mp.weixin.qq.com/s?__biz=MzU2MTIyNDUwMA==&mid=2247517960&idx=2&sn=02fbb6e5e32bd2f46bb96d53a2fa2444&chksm=fc7ec953cb09404545cfb7a81abe7b3863bca5a213ba84c8e19eec75e2bb56f0c60248421151&scene=21#wechat_redirect)

[10 个处理 JavaScript 对象的实用技巧！](http://mp.weixin.qq.com/s?__biz=MzU2MTIyNDUwMA==&mid=2247516210&idx=1&sn=8db7c6ae5821b69140f201811eb7e6a4&chksm=fc7ece69cb09477f187f60a1d9458846feaf53f896aeae0abf022ede66d4404906f74074c9e4&scene=21#wechat_redirect)

[JavaScript 日期时间操作完整指南！](http://mp.weixin.qq.com/s?__biz=MzU2MTIyNDUwMA==&mid=2247515609&idx=1&sn=6a054dba4f912c948dec797639abe6a0&chksm=fc7ef382cb097a9484ac53ba2459f2e1ad7151d9c06df63d3929e07d9dcf2d0cac07e7e26794&scene=21#wechat_redirect)