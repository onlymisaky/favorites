> æœ¬æ–‡ç”± [ç®€æ‚¦ SimpRead](http://ksria.com/simpread/) è½¬ç ï¼Œ åŸæ–‡åœ°å€ [mp.weixin.qq.com](https://mp.weixin.qq.com/s/u2rmres-Cliady8UHcmgog)

æˆ‘ä»¬çœ‹ä¸€äº›é’ˆå¯¹ã€Šå¦‚ä½•æå‡åº”ç”¨é¦–å±åŠ è½½ä½“éªŒã€‹çš„æ–‡ç« ï¼Œæåˆ°çš„å¿…ä¸å¯å°‘çš„æªæ–½ï¼Œä¾¿æ˜¯`å‡å°‘é¦–å±å¹•åŠ è½½èµ„æºçš„å¤§å°`ï¼Œè€Œå‡å°‘èµ„æºå¤§å°å¿…ç„¶ä¼šæƒ³åˆ°`æŒ‰éœ€åŠ è½½`æªæ–½ã€‚æœ¬æ–‡æåˆ°çš„ä¾¿æ˜¯ä¸€ä¸ªåŸºäº webpack æ’ä»¶ [1] ä¸ react ç»„ä»¶ [2] å®ç°çš„ä¸€å¥—`ç ”å‘é«˜åº¦è‡ªå®šä¹‰ã€ç»„ä»¶æŒ‰éœ€åŠ è½½`çš„èµ„æº`é¢„åŠ è½½æ–¹æ¡ˆ`. ç®€å•æ¥è¯´æ˜¯ä¸ºäº†é€šè¿‡é…ç½® webpack æ’ä»¶åŠå°‘é‡ä¸šåŠ¡ä»£ç å³å¯å®ç° Code Splitting + ç»„ä»¶æ‡’åŠ è½½ + ç»„ä»¶é¢„åŠ è½½ã€‚

ğŸ§ ä¸ºä»€ä¹ˆè¦åšè¿™ä¹ˆä¸€å¥—é¢„åŠ è½½æ–¹æ¡ˆï¼Ÿå®ƒå­˜åœ¨çš„å¿…è¦æ€§åœ¨å“ªé‡Œï¼ŸğŸ§

å¸¸è§„ç»„ä»¶æŒ‰éœ€åŠ è½½æ–¹æ¡ˆç¼ºç‚¹
============

*   React.lazy ç»„ä»¶æŒ‰éœ€åŠ è½½ - ç»„ä»¶`æ¸²æŸ“æ—¶`åŠ è½½ç»„ä»¶èµ„æº
    

```
react.lazy(()Â =>Â import("xxxx/component"));
```

ä¼˜ç‚¹ï¼šæ‹†åˆ†ç»„ä»¶ä»£ç ï¼ŒæŒ‰éœ€åŠ è½½, å‡å°‘é¦–å±çš„èµ„æºåŠ è½½å¤§å°åŠæ•°é‡ï¼Œæå‡é¡µé¢é¦–å±æ¸²æŸ“é€Ÿåº¦ã€‚

*   import åŠ¨æ€åŠ è½½ - æ‰§è¡Œä»£ç  `import()` æ—¶åŠ è½½ç»„ä»¶èµ„æº
    

```
useEffect(()Â =>Â {Â Â import("xxxx/component").then((loadScript)Â =>Â {});},Â []);
```

ä¼˜ç‚¹ï¼šæ‹†åˆ†ç»„ä»¶ä»£ç , å¼€å‘è€…å¯ä»¥æ›´ç»†ç²’åº¦åœ°æ§åˆ¶ç»„ä»¶æŒ‰éœ€åŠ è½½çš„æ—¶æœºã€‚

#### å…±æœ‰ç¼ºç‚¹ï¼š

ä»£ç æ‹†åˆ†åï¼Œ`ç»„ä»¶èµ„æºå¼‚æ­¥åŠ è½½å­˜åœ¨è€—æ—¶`ï¼Œå½“`ç»„ä»¶èµ„æºç‰¹åˆ«å¤§æˆ–ç½‘ç»œä¸ç¨³å®šæ—¶`éƒ½æœ‰å¯èƒ½ä¼šå‡ºç° loading æ—¶é—´è¿‡é•¿å¯¼è‡´ç»„ä»¶è¿Ÿè¿Ÿæ— æ³•æ¸²æŸ“åˆ°è§†å›¾ä¸Šï¼Œä»¥è‡³äº`å½±å“ç”¨æˆ·ä½“éªŒ`ã€‚

å¦‚å›¾æ˜¯æˆ‘ä»¬é¡¹ç›®ä¸­å®é™…å‡ºç°çš„åœºæ™¯ä¹‹ä¸€ï¼š

![](https://mmbiz.qpic.cn/sz_mmbiz_png/VicflqIDTUVXsNDTF6eEicblZm9SZKWXPYtxdzhtMxW5VwD3wbgsZyKOtlZYR9KLRYCOp1BibkIvE5wk0ZPDYGsibw/640?wx_fmt=png)image.png![](https://mmbiz.qpic.cn/sz_mmbiz_png/VicflqIDTUVXsNDTF6eEicblZm9SZKWXPYAb6UngpOYZAsN6bJtCcrQdWiaaj10cdiakxagysDHDWtXuFCwJwr1icxw/640?wx_fmt=png)image.png

ç”±äºèµ„æºåŠ è½½å­˜åœ¨è¿‘`4s`çš„è€—æ—¶ï¼Œç»„ä»¶æ¸²æŸ“è¢«å»¶è¿Ÿï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œä¾¿å¯¼è‡´äº†æˆ‘ä»¬è™½ç„¶é€šè¿‡å‡å°‘äº†é¦–å±èµ„æºæå‡äº†é¦–å±åŠ è½½ä½“éªŒï¼Œä½†å´è®©ç”¨æˆ·åœ¨åç»­ä½¿ç”¨è¿‡ç¨‹ä¸­å‡ºç°äº†`ä½“éªŒæ–­å±‚`ï¼Œç”šè‡³æ˜¯é¡µé¢ç™½å±çš„æƒ…å†µï¼Œè¿™å¯¹ç”¨æˆ·è€Œè¨€æ˜¯ä¸èƒ½æ¥å—çš„ç”¨æˆ·ä½“éªŒã€‚

ä¸”è¿™ç§æƒ…å†µå¹¶éç½‘ç»œä¸å¥½æˆ–èµ„æºè¿‡å¤§ç­‰æç«¯æƒ…å†µä¸‹æ‰ä¼šå‡ºç°ï¼Œéšç€åº”ç”¨ä½¿ç”¨é‡çš„ä¸Šå‡ï¼Œè¯¥æƒ…å†µä¼šå¤šæ¬¡å‡ºç°ï¼Œå½±å“ç”¨æˆ·ä½“éªŒï¼Œä»¥ä¸‹ä¸ºç½‘ç»œæ³¢åŠ¨çš„åœºæ™¯ä¹‹ä¸€ï¼š![](https://mmbiz.qpic.cn/sz_mmbiz_png/VicflqIDTUVXsNDTF6eEicblZm9SZKWXPYoe2N6KBoxicvJSGUpvXYszRSVznm2Aa1uO8xK5n9QyezXOVKdWtgtXw/640?wx_fmt=png)

é‚£ä¹ˆå¦‚æœè¦ä¿è¯ä¸€ä¸ª spa åº”ç”¨çš„åç»­äº¤äº’ä½“éªŒï¼Œè¦ä¹ˆå°±æ˜¯ä¸æ‹†åŒ…ï¼Œè¦ä¹ˆå°±éœ€è¦å¼•å…¥ç»„ä»¶é¢„åŠ è½½æœºåˆ¶ã€‚é¢„åŠ è½½çš„å¿…è¦æ€§ï¼šè®©è¢«æ‡’åŠ è½½çš„`ç»„ä»¶èµ„æºæå‰è¿›è¡Œå¯¹åº”çš„èµ„æºè¯·æ±‚`ï¼Œè€Œä¸æ˜¯æ¸²æŸ“æ—¶è¯·æ±‚ä»¥å‡å°‘ç»„ä»¶æ¸²æŸ“æ—¶é—´ï¼Œ`ä¿è¯åº”ç”¨ä¸ä¼šå› ä¸ºç»„ä»¶æ‹†åŒ…å½±å“ç”¨æˆ·ä½“éªŒ`ã€‚

> `react.lazy`æœ‰ä¸€ä¸ªå±€é™å°±æ˜¯å¿…é¡»æ”¾åœ¨`<Suspense>`ç»„ä»¶å†…ï¼Œæ— æ³•ç‹¬ç«‹æ¸²æŸ“`<LazyComponent />`ã€‚![](https://mmbiz.qpic.cn/sz_mmbiz_png/VicflqIDTUVXsNDTF6eEicblZm9SZKWXPY0jdwg9A8MW26zxDlaYxQBrhEAVCQRSFLm4B17n8MPzV9ibLQiaTPg1Gw/640?wx_fmt=png)

ä¸ºä»€ä¹ˆä¸æ˜¯ react-lodable[3]?
=======================

å…¶å® react ç¤¾åŒºæä¾›çš„ react-lodable è§£å†³äº†ä»¥ä¸Šä¸¤ä¸ªé—®é¢˜ï¼š

*   ä¸å¼ºä¾èµ– `<Suspense>`ï¼Œå¯ç‹¬ç«‹æ¸²æŸ“`<LazyComponent />`
    
*   æä¾›äº†`preload`é¢„åŠ è½½æ–¹æ¡ˆï¼Œå‡å°‘å¼‚æ­¥åŠ è½½è€—æ—¶ï¼Œä¿è¯ç”¨æˆ·ä½“éªŒã€‚![](https://mmbiz.qpic.cn/sz_mmbiz_png/VicflqIDTUVXsNDTF6eEicblZm9SZKWXPYqibUVGsm9pQRbCQ0u0iabgnqpuuW8ibBkUwA9NbJJcZAUj0UoejJV2G2w/640?wx_fmt=png)
    

ä½†æ˜¯æœ‰ä¸ªé—®é¢˜æ˜¯`æ¨¡å—è¿‡å¤š`æ—¶ï¼Œ`ä¾µå…¥å¼çš„ä»£ç ä¹Ÿå˜å¤šäº†`ï¼Œä¸”çœ‹èµ·æ¥`é‡å¤ä¸”å†—ä½™`ï¼ŒåŒæ—¶è¢«é¢„åŠ è½½çš„æ¨¡å—å¹¶æ²¡æœ‰è¿›è¡Œ`ç»Ÿä¸€ç®¡ç†`ï¼Œåç»­ç»´æŠ¤ä¹Ÿä¸ä¼šå¾ˆæ–¹ä¾¿ï¼Œä¸ç›´è§‚ã€‚

é‚£ä¹ˆæˆ‘ä»¬åœ¨ webpack ç¼–è¯‘å±‚é¢æ˜¯å¯ä»¥è·å–åˆ°æ‰“åŒ…`chunk`çš„è¯¦ç»†ä¿¡æ¯çš„ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥åœ¨ plugin å±‚é¢å¯¹æŒ‰éœ€åŠ è½½çš„`chunk`è¿›è¡Œ`ç»Ÿä¸€ç»´æŠ¤`ï¼ŒåŒæ—¶`å‡å°‘ä¾µå…¥å¼ä»£ç `ï¼Œäºæ˜¯ä¾¿æœ‰äº†æ­¤æ–¹æ¡ˆ route-resource-preload[4]ï¼Œ å…¶å…·å¤‡çš„ç‰¹æ€§:

1.  æ‹†åˆ†æ¨¡å—æŒ‰éœ€åŠ è½½ï¼Œå‡å°‘åº”ç”¨é¦–å±èµ„æºè¯·æ±‚å¤§å°åŠæ•°é‡ï¼Œæå‡åŠ è½½ä½“éªŒã€‚![](https://mmbiz.qpic.cn/sz_mmbiz_png/VicflqIDTUVXsNDTF6eEicblZm9SZKWXPYEWhOtTcQ7wPjGiangdictFg9p1FB1EkHU3Qagd5dicic4RP7XXySa8JhsA/640?wx_fmt=png)`dynamic` æ˜¯åŸºäº `import()`åšçš„ä¸€ä¸ªå°è£…å‡½æ•°ã€‚![](https://mmbiz.qpic.cn/sz_mmbiz_png/VicflqIDTUVXsNDTF6eEicblZm9SZKWXPYeqwicQXZ7hk4cZjUPOPeBWsJwRaiaRThTqZUYZTp5FcliaiafZqay3ofFQ/640?wx_fmt=png)
    
    ![](https://mmbiz.qpic.cn/sz_mmbiz_png/VicflqIDTUVUiaawiaX7mj3HVeEfrHMp2fsRA0IgIb2V7zEQoDf4Clw1OYicmXsJyIE4MgdVdKzPRW5MrbGYNW59Kg/640?wx_fmt=png)
    
2.  æ”¯æŒç»„ä»¶èµ„æºæ‰¹é‡è‡ªåŠ¨é¢„åŠ è½½ï¼ŒåŒæ—¶æ”¯æŒè‡ªå®šä¹‰è§¦å‘æ—¶æœºï¼Œå¦‚ hover åˆ°æŸä¸ªç»„ä»¶ä¸Šã€æŸç»„ä»¶æ¸²æŸ“æ—¶ã€å‡ºç°åœ¨è§†å›¾å†…æ—¶ã€‚ï¼ˆ Component / Module-Federation / UMD / Svg / Png ç­‰é™æ€èµ„æºï¼‰. è‡ªåŠ¨é¢„åŠ è½½æ­¥éª¤ï¼š![](https://mmbiz.qpic.cn/sz_mmbiz_png/VicflqIDTUVXsNDTF6eEicblZm9SZKWXPYa901uXZ6AEBicevuL8pPUr5DW9NaTukmpvowrYhZxjiapicOJTicsLic1mA/640?wx_fmt=png)![](https://mmbiz.qpic.cn/sz_mmbiz_png/VicflqIDTUVXsNDTF6eEicblZm9SZKWXPYgoRSpjcGfRRt95gEywlUrvxFfLC4mBiabewdDQxDAbOg5RXibPV3EWyQ/640?wx_fmt=png)![](https://mmbiz.qpic.cn/sz_mmbiz_png/VicflqIDTUVXsNDTF6eEicblZm9SZKWXPYlQM1hW5kd156pEEVf3VicDtVyicLP2stzKEv3zufK1sBAz6NnPdU5EOg/640?wx_fmt=png)
    
3.  æ”¯æŒæ‰‹åŠ¨è°ƒç”¨é¢„åŠ è½½, ç±» react-lodable çš„æ–¹å¼ï¼Œä½†æ”¯æŒæ‰¹é‡ã€‚å•ä¸ªç»„ä»¶æ‰‹åŠ¨é¢„åŠ è½½![](https://mmbiz.qpic.cn/sz_mmbiz_png/VicflqIDTUVXsNDTF6eEicblZm9SZKWXPY8VOLia82SHvV6U63mEaq6fQSlibOoJ5AQ2MhUWAibPsmrGAIfAydREEww/640?wx_fmt=png) å¤šä¸ªç»„ä»¶æ‰‹åŠ¨é¢„åŠ è½½![](https://mmbiz.qpic.cn/sz_mmbiz_png/VicflqIDTUVXsNDTF6eEicblZm9SZKWXPYUXBIrGClORWiaa5vawrC36q8wusRRZLau5VNI0WJicw7z4QGTs1EIT7Q/640?wx_fmt=png)
    
4.  æ”¯æŒ React `<Suspense>`ï¼Œä½†ä¸ä¾èµ–ã€‚
    
5.  å®Œå¤‡çš„ Â typescript Â ç±»å‹æ¨å¯¼ã€‚![](https://mmbiz.qpic.cn/sz_mmbiz_png/VicflqIDTUVXsNDTF6eEicblZm9SZKWXPYSBq9icKgzSm3lZNghvsPJJLwqIzEUAHEWtrCKWBTYOOggudIFib6UbuA/640?wx_fmt=png)
    

DEMO æ¼”ç¤º
=======

åœ¨çº¿ä½“éªŒåœ°å€ [5]react.lazy æ­£å¸¸æ‹†åŒ…å¹¶åŠ è½½æ•ˆæœ. gif

![](https://mmbiz.qpic.cn/sz_mmbiz_gif/VicflqIDTUVUiaawiaX7mj3HVeEfrHMp2fsq5HvtdibB4cj8aFKfbibibX2TJrZQmfibL7AhvxL2rpXek25cjkE9eARsQ/640?wx_fmt=gif)

route-resource-preload æ‹†åŒ…å¹¶é¢„åŠ è½½æ•ˆæœ. gif

![](https://mmbiz.qpic.cn/sz_mmbiz_gif/VicflqIDTUVUiaawiaX7mj3HVeEfrHMp2fsTtfVdr1xwbPjGQxTK7VodYf7jjcDAARFKKNjGK6uKVPKib8zrSoJ1jg/640?wx_fmt=gif)

#### `æ­£å¸¸æ‡’åŠ è½½(react.lazy)`æ™®é€šç»„ä»¶ åŠ Module-Federation

![](https://mmbiz.qpic.cn/sz_mmbiz_png/VicflqIDTUVXsNDTF6eEicblZm9SZKWXPYacicM1vibqBKXtibPX2GPoxQz4P8bc7xBCnOUVoFrVBQOM5TyS1OMvuicg/640?wx_fmt=png)WX20230424-113712.png

#### `route-resource-preload é¢„åŠ è½½`æ™®é€šç»„ä»¶ åŠ Module-Federation

![](https://mmbiz.qpic.cn/sz_mmbiz_png/VicflqIDTUVXsNDTF6eEicblZm9SZKWXPYgHwgBAQR5nYxtgZZCZH5cDGCPHMdh7SAZ880vsfRFic6vcR6dnIBh1g/640?wx_fmt=png)WX20230424-113747.png

åŠ è½½è€—æ—¶å¦‚ä¸‹ï¼š

<table><thead><tr data-style="border-width: 1px 0px 0px; border-right-style: initial; border-bottom-style: initial; border-left-style: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: initial; border-top-style: solid; border-top-color: rgb(204, 204, 204); background-color: white;"><th data-style="border-top-width: 1px; border-color: rgb(204, 204, 204); text-align: left; background-color: rgb(240, 240, 240); font-size: 15px; min-width: 85px;">èµ„æº</th><th data-style="border-top-width: 1px; border-color: rgb(204, 204, 204); text-align: left; background-color: rgb(240, 240, 240); font-size: 15px; min-width: 85px;">æ­£å¸¸æ‡’åŠ è½½ - react.lazy (ms)</th><th data-style="border-top-width: 1px; border-color: rgb(204, 204, 204); text-align: left; background-color: rgb(240, 240, 240); font-size: 15px; min-width: 85px;">é¢„åŠ è½½ (ms)</th></tr></thead><tbody><tr data-style="border-width: 1px 0px 0px; border-right-style: initial; border-bottom-style: initial; border-left-style: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: initial; border-top-style: solid; border-top-color: rgb(204, 204, 204); background-color: white;"><td data-style="border-color: rgb(204, 204, 204); font-size: 15px; min-width: 85px;">æ™®é€šç»„ä»¶ (å•ä¸ªèµ„æºæ–‡ä»¶)</td><td data-style="border-color: rgb(204, 204, 204); font-size: 15px; min-width: 85px;">184</td><td data-style="border-color: rgb(204, 204, 204); font-size: 15px; min-width: 85px;">1</td></tr><tr data-style="border-width: 1px 0px 0px; border-right-style: initial; border-bottom-style: initial; border-left-style: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: initial; border-top-style: solid; border-top-color: rgb(204, 204, 204); background-color: rgb(248, 248, 248);"><td data-style="border-color: rgb(204, 204, 204); font-size: 15px; min-width: 85px;">Module-Federation ç»„ä»¶ (6 ä¸ªèµ„æºæ–‡ä»¶)</td><td data-style="border-color: rgb(204, 204, 204); font-size: 15px; min-width: 85px;">405</td><td data-style="border-color: rgb(204, 204, 204); font-size: 15px; min-width: 85px;">8</td></tr></tbody></table>

> ä»è¡¨ä¸­å¯ä»¥çœ‹å‡ºï¼Œé¢„åŠ è½½æ˜¾è‘—æå‡äº†ç»„ä»¶çš„åŠ è½½é€Ÿåº¦ï¼Œå°¤å…¶æ˜¯å¯¹äºå¤æ‚çš„ç»„ä»¶ï¼ŒåŠ è½½é€Ÿåº¦çš„æå‡æ›´ä¸ºæ˜æ˜¾ã€‚è¿™è¯´æ˜åœ¨å¤æ‚çš„ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œ`é¢„åŠ è½½å¯ä»¥æ˜¾è‘—æå‡ç»„ä»¶åŠ è½½é€Ÿåº¦å’Œç”¨æˆ·ä½“éªŒ`.

æ–¹æ¡ˆ & æµç¨‹ä»‹ç»
=========

è¯¥æ–¹æ¡ˆåŸºäº @route-resource-preload/webpack-plugin[6] åŠ @route-resource-preload/react[7], åˆ†åˆ«å¯¹åº”`æ„å»ºæ—¶`ä¸`è¿è¡Œæ—¶`:

æ„å»ºæ—¶æµç¨‹å›¾:![](https://mmbiz.qpic.cn/sz_mmbiz_png/VicflqIDTUVXsNDTF6eEicblZm9SZKWXPY1T7oStbCzicSWkWH31gJNsYokMKzstdmO8eDNB0PA3mF814pfUxysNA/640?wx_fmt=png)

`æ„å»ºæ—¶` é€šè¿‡ dynamic[8] API åŠ webpack plugin[9] å¯¹æ¨¡å—è¿›è¡Œæ‹†åŒ…çš„åŒæ—¶ï¼Œè¿˜ä¼šå°†`preloadKey(å¼€å‘è€…è‡ªå®šä¹‰çš„é¢„åŠ è½½æ ‡è¯†)`ã€`import-module-url(import æ¨¡å—è·¯å¾„)`ã€`chunk(outputäº§ç‰©)`ä¸‰è€…ä¹‹é—´çš„å…³ç³»ä»¥`json`å½¢å¼è¿›è¡Œä¿å­˜ï¼Œå¹¶å…è®¸åº”ç”¨ç«¯è®¿é—®ã€‚![](https://mmbiz.qpic.cn/sz_mmbiz_png/VicflqIDTUVXsNDTF6eEicblZm9SZKWXPYicSxBmlHPB6XnXQBaOicFHEfvn8ICaATWVUMcaOcHDzeWfM5sSBsdoxA/640?wx_fmt=png)

ç”Ÿæˆçš„ JSON æ–‡ä»¶ï¼š![](https://mmbiz.qpic.cn/sz_mmbiz_png/VicflqIDTUVXsNDTF6eEicblZm9SZKWXPYwBYicoEicWdlKXfBog7jh9OwjkFZszPHf3sAibqcsGZn4N0Gw7JQe6ibwg/640?wx_fmt=png)

JSONï¼š![](https://mmbiz.qpic.cn/sz_mmbiz_png/VicflqIDTUVXsNDTF6eEicblZm9SZKWXPY35HLG3so6LHGQuHoaliaqtia3MySiap4uvBR01ZqccfDxfMPwhFhhQ13Q/640?wx_fmt=png)

å¼€å‘è€…åŸºäº JSON, å¯ä»¥åˆ¤æ–­å‡º`å¯è¢«é¢„åŠ è½½çš„chunk`åŠ`å·²é…ç½®é¢„åŠ è½½çš„chunk`å…·ä½“æœ‰å“ªäº›ï¼ŒåŒæ—¶ä¹Ÿèƒ½çŸ¥é“æ’ä»¶ä¸­é…ç½®çš„é¢„åŠ è½½æ ‡è¯†`preloadKey`ä¸`chunk`é—´çš„æ˜ å°„å…³ç³»ã€‚

è¿è¡Œæ—¶æµç¨‹å›¾:![](https://mmbiz.qpic.cn/sz_mmbiz_png/VicflqIDTUVXsNDTF6eEicblZm9SZKWXPYof6Fyjibkd1qy2VpM3J3rxKrW4YrYGWiaghGSsVia5fDMFm43DVJO9dZA/640?wx_fmt=png)`è¿è¡Œæ—¶` åˆ™æ˜¯åŸºäºæ„å»ºå‡ºçš„`json`, å¼€å‘è€…é€šè¿‡è®¾ç½®`Preloader æˆ–è€…æ˜¯<PreloadLink>`çš„`preloadKey`ï¼Œå¯¹åº”çš„ç›¸å…³èµ„æºå°†è¢«é¢„åŠ è½½ï¼Œå¹¶åŸºäº dynamic[10] API æ¸²æŸ“ç»„ä»¶ã€‚

é¡¹ç›®æ•ˆæœæ¼”ç¤º
======

#### 1. çœŸå®ç”¨æˆ·åœºæ™¯æ‰“å¼€ Modalï¼ˆ Modal åŸºäº webpack module federation å¼•å…¥ï¼‰ä½“éªŒæ¨¡æ‹Ÿ

*   æ— é¢„åŠ è½½æ—¶ï¼š`ç‚¹å‡»æŒ‰é’®å`ï¼Œæ‹‰å–å¯¹åº”çš„æ‹†åŒ…èµ„æºåŠè¿œç¨‹ module federation ç»„ä»¶èµ„æºï¼Œ`è¯·æ±‚å®Œæˆåæ¸²æŸ“ç»„ä»¶ï¼Œå­˜åœ¨ä½“éªŒå¡é¡¿`ï¼Œå¦‚ä¸‹å›¾ï¼š
    
      
    
    ![](https://mmbiz.qpic.cn/sz_mmbiz_gif/VicflqIDTUVXsNDTF6eEicblZm9SZKWXPYnVkzBn7uUacC49FldlTu8pa7S0GtnEfjBCickvICJmiaPezPR8V2LDPQ/640?wx_fmt=gif)
    
*   æœ‰é¢„åŠ è½½æ—¶ï¼šhover åˆ°æŸä¸ªåŒºåŸŸ / æŸä¸ªç»„ä»¶æ¸²æŸ“æ—¶ (å¼€å‘è€…è‡ªå®šä¹‰) å³å¯è§¦å‘èµ„æºé¢„åŠ è½½ï¼Œ`ç‚¹å‡»æŒ‰é’®åç«‹å³æ¸²æŸ“ç»„ä»¶ï¼Œä¸å­˜åœ¨ä½“éªŒå¡é¡¿`ï¼Œå¦‚ä¸‹å›¾ï¼š
    

![](https://mmbiz.qpic.cn/sz_mmbiz_gif/VicflqIDTUVUiaawiaX7mj3HVeEfrHMp2fs68eXhzyTCLQlAAoURJG6JCxm3VeSBWQyO4ibDuKODXuvF8P3LP1ab3A/640?wx_fmt=gif)

  

#### 2. ç¦»çº¿åœºæ™¯ä½“éªŒæ¨¡æ‹Ÿ

ä¸ºäº†å¯¹æ¯”æ•ˆæœï¼ˆæœ‰ / æ— é¢„åŠ è½½ï¼‰æ›´åŠ ç›´è§‚ï¼Œä»¥ä¸‹å°†é‡‡ç”¨`ç¦»çº¿ç½‘ç»œ`çš„åœºæ™¯ä¸‹è¿›è¡Œå±•ç¤ºã€‚

*   æ— é¢„åŠ è½½æ—¶ï¼šæŒ‰éœ€åŠ è½½åœ¨ç¦»çº¿ç½‘ç»œç¯å¢ƒä¸‹ä¼šæ— æ³•æ­£å¸¸æ¸²æŸ“ï¼Œå¯¼è‡´ç™½å±ã€‚
    
    ![](https://mmbiz.qpic.cn/sz_mmbiz_gif/VicflqIDTUVUiaawiaX7mj3HVeEfrHMp2fsRFriagkVeFsW3XQiaw5piaKqu149Qu9jVdTysDyqxqBhhmicmyuwxic4ZLg/640?wx_fmt=gif)  
    
*   æœ‰é¢„åŠ è½½æ—¶ï¼šæŒ‰éœ€åŠ è½½åœ¨ç¦»çº¿ç½‘ç»œç¯å¢ƒä¸‹ï¼Œé¡µé¢æ¸²æŸ“ä½“éªŒæ­£å¸¸ï¼Œå³`å®ç°æ‹†åŒ…æŒ‰éœ€åŠ è½½çš„ç”¨æˆ·ä½“éªŒç­‰åŒäºæœªæ‹†åŒ…`ã€‚â€
    

![](https://mmbiz.qpic.cn/sz_mmbiz_gif/VicflqIDTUVUiaawiaX7mj3HVeEfrHMp2fsmK03BZg4knAyVBHDzrPYnL6UfBvogkOSp28WNribHo4eDKicP2iaOapSw/640?wx_fmt=gif)

é¢„åŠ è½½æœºåˆ¶å­˜åœ¨çš„å¿…è¦æ€§
===========

1.  `Any code can be split`: é€šè¿‡ä»¥ä¸Šçš„é¢„åŠ è½½æœºåˆ¶ï¼Œå®ç°åº”ç”¨å†… Any code can be splitï¼ˆä¸€åˆ‡ä»£ç éƒ½å¯ä»¥è¢«æ‹†åŒ…ï¼‰ï¼Œä¸”èƒ½ä¿è¯ä¸å½±å“ç”¨æˆ·ä½“éªŒï¼Œè®©å¼€å‘è€…æ²¡æœ‰äº†å› ä¸ºå•é¡µé¢èµ„æºè¿‡å¤§å½±å“åº”ç”¨æ€§èƒ½çš„çƒ¦æ¼ï¼ŒSPA(å•é¡µé¢åº”ç”¨) ä¹Ÿå¯ä»¥æ‹¥æœ‰æè‡´çš„é¦–å±å¹•åŠ è½½ä½“éªŒå’Œäº¤äº’ä½“éªŒï¼ŒğŸŸ ä¸ ğŸ» æŒå…¼å¾—ã€‚
    
2.  `module federation(æ¨¡å—è”é‚¦) ç»„ä»¶é¢„åŠ è½½`: å¯¹äº webpack çš„ module federation(æ¨¡å—è”é‚¦) è€Œè¨€ï¼Œç”±äº module federation æ‰“åŒ…å‡ºæ¥çš„èµ„æºé»˜è®¤é‡‡ç”¨äº†æŒ‰`éœ€åŠ¨æ€åŠ è½½`çš„æ–¹æ¡ˆï¼Œå› æ­¤å½“æˆ‘ä»¬æ¸²æŸ“ä¸€ä¸ªæ¯”è¾ƒå¤§çš„ module federation ç»„ä»¶æ—¶ï¼Œä¹Ÿä¼šå­˜åœ¨`ä½“éªŒå¡é¡¿`çš„æƒ…å†µï¼Œè¿™æ—¶å¯¹è¯¥ module federation ç»„ä»¶è¿›è¡Œé¢„åŠ è½½ä¾¿å¯è§£å†³è¯¥ä½“éªŒé—®é¢˜ã€‚
    
3.  `é©æ–°å¼€å‘è€…å¯¹ç»„ä»¶æ‡’åŠ è½½çš„äº†è§£ï¼Œå‡å°‘å¼€å‘è€…å¿ƒæ™ºè´Ÿæ‹…`ï¼šå¼€å‘è€…å¯ä»¥ç®€å•ç²—æš´åœ°åŸºäº`é¡µé¢`ç»´åº¦å¯¹æŸä¸ªè·¯ç”±æ¸²æŸ“çš„ç»„ä»¶è¿›è¡Œæ‡’åŠ è½½ï¼Œä¸å†éœ€è¦æ‹…å¿ƒæ‡’åŠ è½½çš„èµ„æºè¿‡å¤§ä»¥è‡³äºåŠ è½½æ—¶é—´è¿‡é•¿å½±å“é¡µé¢æ¸²æŸ“æ—¶é—´ï¼Œé¿å…å¼€å‘è€…éœ€è¦ä»ç»„ä»¶ç»´åº¦å»åˆ†æå“ªäº›ç»„ä»¶éœ€è¦ä½¿ç”¨æ‡’åŠ è½½ï¼Œç›´æ¥`è·¯ç”±æ‡’åŠ è½½`"ä¸€æŠŠæ¢­å“ˆ"ã€‚
    

### å‚è€ƒèµ„æ–™

[1]

webpack æ’ä»¶: _https://github.com/AwesomeDevin/route-resource-preload/tree/main/packages/webpack-plugin_

[2]

react ç»„ä»¶: _https://github.com/AwesomeDevin/route-resource-preload/tree/main/packages/react_

[3]

react-lodable: _https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fjamiebuilds%2Freact-loadable_

[4]

route-resource-preload: _https://github.com/AwesomeDevin/route-resource-preload_

[5]

åœ¨çº¿ä½“éªŒåœ°å€: _https://route-resource-preload.netlify.app/_

[6]

@route-resource-preload/webpack-plugin: _https://github.com/AwesomeDevin/route-resource-preload/tree/main/packages/webpack-plugin_

[7]

@route-resource-preload/react: _https://github.com/AwesomeDevin/route-resource-preload/tree/main/packages/react_

[8]

dynamic: _https://github.com/AwesomeDevin/route-resource-preload/blob/main/CHINESE-README.md#dynamic---%E6%8B%86%E5%88%86%E4%BD%A0%E7%9A%84%E7%BB%84%E4%BB%B6%E4%BB%A3%E7%A0%81%E5%B9%B6%E8%BF%9B%E8%A1%8C%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD_

[9]

webpack plugin: _https://github.com/AwesomeDevin/route-resource-preload/blob/main/CHINESE-README.md#webpack-routeresourcepreloadplugin_

[10]

dynamic: _https://github.com/AwesomeDevin/route-resource-preload/blob/main/CHINESE-README.md#dynamic---%E6%8B%86%E5%88%86%E4%BD%A0%E7%9A%84%E7%BB%84%E4%BB%B6%E4%BB%A3%E7%A0%81%E5%B9%B6%E8%BF%9B%E8%A1%8C%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD_