> æœ¬æ–‡ç”± [ç®€æ‚¦ SimpRead](http://ksria.com/simpread/) è½¬ç ï¼Œ åŸæ–‡åœ°å€ [mp.weixin.qq.com](https://mp.weixin.qq.com/s/Y8Im-PCMKf6omz5nv170jQ)

```
å¤§å‚æŠ€æœ¯Â Â é«˜çº§å‰ç«¯Â Â Nodeè¿›é˜¶

ç‚¹å‡»ä¸Šæ–¹Â ç¨‹åºå‘˜æˆé•¿æŒ‡åŒ—ï¼Œå…³æ³¨å…¬ä¼—å·

å›å¤1ï¼ŒåŠ å…¥é«˜çº§Nodeäº¤æµç¾¤

```

æ— è®ºåœ¨é¢è¯•è¿˜æ˜¯å†…éƒ¨æ™‹å‡ï¼Œ**æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ** ä¸€ç›´éƒ½æ˜¯éå¸¸é‡è¦çš„éƒ¨åˆ†ã€‚

æ€§èƒ½ä¼˜åŒ–å¯ä»¥åˆ†ä¸ºå¾ˆå¤šç§ï¼Œæ¯”å¦‚ï¼š

1.  æ‰“åŒ…å·¥å…·ï¼ˆwebpack || viteï¼‰æ€§èƒ½ä¼˜åŒ–
    
2.  è®¿é—®é€Ÿåº¦ä¼˜åŒ–
    
3.  ç”¨æˆ·æ„ŸçŸ¥ä¼˜åŒ–
    
4.  ä»£ç æ ‡å‡†åŒ–
    
5.  ...
    

> åŸæ–‡ï¼šhttps://juejin.cn/post/7395969637878693942
> 
> ä½œè€…ï¼šæ–‡å­¦ä¸ä»£ç Â 

æ­£æ–‡
--

åœ¨äº†è§£ webpack çš„æ€§èƒ½ä¼˜åŒ–ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå¯¹æ€§èƒ½ä¼˜åŒ–æœ‰ä¸€ä¸ªæ€»ä½“çš„è®¤çŸ¥ï¼Œæ€»å…±åˆ†ä¸º 3 ç‚¹ï¼š

1.  åœ¨ä¸šåŠ¡å¼€å‘ä¸­ï¼Œä¸è¦è¿‡æ—©çš„è€ƒè™‘æ€§èƒ½ä¼˜åŒ–ï¼Œè€Œä¸”ä¸šåŠ¡å¼€å‘å¤§éƒ¨åˆ†æ—¶å€™éƒ½ä¸éœ€è¦è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ã€‚å› ä¸º vue-cli è¿™äº›è„šæ‰‹æ¶å·²ç»å¸®åŠ©ä¸šåŠ¡å¼€å‘è€…è¿›è¡Œäº†æœ€ä½³å®è·µã€‚
    
2.  æ€§èƒ½ä¼˜åŒ–æ²¡æœ‰ä¸€æ‹›é²œåƒéå¤©çš„æ–¹æ³•è®ºï¼Œè€Œæ˜¯å› åœ°åˆ¶å®œï¼Œè§æ‹›æ‹†æ‹›ï¼Œæ‰€ä»¥ä»»ä½•æ€§èƒ½ä¼˜åŒ–çš„æ–¹æ¡ˆéƒ½ä¸è¦æ­»è®°ç¡¬èƒŒï¼Œè€Œæ˜¯ç†è§£å…¶æœ¬è´¨åŸç†ã€‚
    
3.  æ€§èƒ½ä¼˜åŒ–å…¶å®ä¸»è¦å°±æ˜¯ä¼˜åŒ–ä»¥ä¸‹ 3 ä¸ªæ–¹é¢ï¼š
    

1.  ä¼˜åŒ–æ„å»ºæ•ˆç‡ã€‚
    
2.  ä¼˜åŒ–ç½‘ç»œä¼ è¾“æ•ˆç‡ã€‚
    
3.  ä¼˜åŒ–ä»£ç æ‰§è¡Œæ•ˆç‡ã€‚ è€Œ webpack å±‚é¢ä¸»è¦ä¼˜åŒ–çš„æ˜¯å‰ä¸¤ç§æ•ˆç‡ã€‚
    

æœ¬æ–‡æ˜¯ webpack æ€§èƒ½ä¼˜åŒ–ç›¸å…³æ–‡ç« çš„ç¬¬ä¸€ç¯‡ï¼Œå°†ä»ä»¥ä¸‹å‡ ä¸ªè§’åº¦å¼€å§‹æ¢è®¨ï¼š

1.  webpack åŸºæœ¬åŸç†
    
2.  æ­å»ºåŸºç¡€ webpack5 è°ƒè¯•ç¯å¢ƒ
    
3.  åˆ†æ webpack dev æ¨¡å¼æ‰“åŒ…ç»“æœ
    
4.  åˆ†æ webpack prod æ¨¡å¼æ‰“åŒ…ç»“æœ
    
5.  å»é™¤æ‰é‡å¤æ‰“åŒ…æ¨¡å—ä»¥åŠæ²¡æœ‰ä½¿ç”¨çš„æ¨¡å—
    
6.  è‡ªåŠ¨åˆ†åŒ…çš„å®æ–½æ–¹æ¡ˆ
    

webpack åŸºæœ¬åŸç†
------------

webpack æ‰“åŒ…æ„å»ºçš„æ ¸å¿ƒæµç¨‹å¯ä»¥æ€»ç»“ä¸ºä»¥ä¸‹çš„æµç¨‹å›¾ï¼š

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37R1VGq5bvSNsZMOiaz52RRjNXUrCbmF25OrI4jVdbDUKcpZTHyO9DkRfg/640?wx_fmt=other&from=appmsg)image.png

webpack åœ¨æ‰“åŒ…æµç¨‹çš„å„ä¸ªé˜¶æ®µéƒ½è®¾ç½®äº†å‹¾å­å‡½æ•°ï¼ŒåŸºäºè¿™äº›å‹¾å­å‡½æ•°ï¼Œå¼€å‘è€…å¯ä»¥è‡ªå®šä¹‰ webpack æ’ä»¶ï¼Œæ¥å®ç°ä¸€äº›å¼ºå¤§çš„è‡ªå®šä¹‰åŠŸèƒ½ã€‚åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œwebpack ä¼šå¯¹å„ä¸ªæ¨¡å—çš„å¯¼å‡ºå†…å®¹è¿›è¡Œç¼“å­˜ï¼Œå¦‚æœåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œwebpack å‘ç°è¿™ä¸ªæ¨¡å—å·²ç»å­˜åœ¨äº†ç¼“å­˜ï¼Œé‚£ä¹ˆå°±ä¸ä¼šé‡å¤å¤„ç†è¿™ä¸ªæ¨¡å—äº†ã€‚

æ­å»ºæœ€åŸºç¡€çš„ webpack å®éªŒç¯å¢ƒï¼š
--------------------

æˆ‘ä»¬ä¸åŸºäº vue-cliï¼Œè€Œæ˜¯ç›´æ¥æ­å»ºä¸€ä¸ªåŸºäº webpack5 çš„ vue3 å¼€å‘ç¯å¢ƒï¼š

é¦–å…ˆæˆ‘ä»¬å¯ä»¥ç›´æ¥å®‰è£…ä»¥ä¸‹ä»¥ä¸‹ä¾èµ–ï¼š

```
Â Â "devDependencies":Â {
Â Â Â Â "@babel/core":Â "^7.24.7",
Â Â Â Â "@babel/plugin-transform-runtime":Â "^7.24.7",
Â Â Â Â "@babel/preset-env":Â "^7.24.7",
Â Â Â Â "@babel/preset-typescript":Â "^7.24.7",
Â Â Â Â "@types/lodash":Â "^4.17.7",
Â Â Â Â "@types/node":Â "^20.14.8",
Â Â Â Â "babel-loader":Â "^9.1.3",
Â Â Â Â "copy-webpack-plugin":Â "^12.0.2",
Â Â Â Â "cross-env":Â "^7.0.3",
Â Â Â Â "css-loader":Â "^7.1.2",
Â Â Â Â "dotenv":Â "^16.4.5",
Â Â Â Â "html-webpack-plugin":Â "^5.6.0",
Â Â Â Â "mini-css-extract-plugin":Â "^2.9.0",
Â Â Â Â "postcss":Â "^8.4.38",
Â Â Â Â "postcss-loader":Â "^8.1.1",
Â Â Â Â "postcss-preset-env":Â "^9.5.14",
Â Â Â Â "regenerator-runtime":Â "^0.14.1",
Â Â Â Â "sass":Â "^1.77.6",
Â Â Â Â "sass-loader":Â "^14.2.1",
Â Â Â Â "serve":Â "^14.2.3",
Â Â Â Â "style-loader":Â "^4.0.0",
Â Â Â Â "style-resources-loader":Â "^1.5.0",
Â Â Â Â "ts-loader":Â "^9.5.1",
Â Â Â Â "vue-loader":Â "^17.4.2",
Â Â Â Â "webpack":Â "^5.92.1",
Â Â Â Â "webpack-bundle-analyzer":Â "^4.10.2",
Â Â Â Â "webpack-cli":Â "^5.1.4",
Â Â Â Â "webpack-dev-server":Â "^5.0.4",
Â Â Â Â "webpack-merge":Â "^5.10.0"
Â Â },
Â Â "dependencies":Â {
Â Â Â Â "@babel/runtime":Â "^7.24.7",
Â Â Â Â "@babel/runtime-corejs3":Â "^7.24.7",
Â Â Â Â "core-js":Â "^3.37.1",
Â Â Â Â "element-plus":Â "^2.7.8",
Â Â Â Â "lodash":Â "^4.17.21",
Â Â Â Â "lodash-es":Â "^4.17.21",
Â Â Â Â "vue":Â "^3.4.29",
Â Â Â Â "vue-router":Â "^4.4.0"
Â Â }



```

åœ¨ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª webpack çš„æ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢æ–°å»ºä¸€ä¸ª base-webpack é…ç½®ä»¥åŠåˆ†åˆ«ç”¨äºæ„å»ºå¼€å‘ç¯å¢ƒä»¥åŠç”Ÿäº§ç¯å¢ƒçš„é…ç½®æ–‡ä»¶ï¼š

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37RhT2kH8SHboEy3FY4YyicU8oI0YhIdqLjjUjlIXpVwbcDltsqZhNztaw/640?wx_fmt=other&from=appmsg)image.png

æˆ‘ä»¬åœ¨ webpack-base æ–‡ä»¶ä¸­åŠ å…¥å¦‚ä¸‹é…ç½®ï¼š

```
//Â å…¬å…±çš„Â webpackÂ é…ç½®

constÂ {Â relative,Â resolveÂ }Â =Â require("path");
constÂ HtmlWebpackPluginÂ =Â require("html-webpack-plugin");
constÂ {Â VueLoaderPluginÂ }Â =Â require("vue-loader");
constÂ webpackÂ =Â require("webpack");
constÂ MinicssExtractPluginÂ =Â require("mini-css-extract-plugin");
constÂ setCssRulesÂ =Â require("./setCssRules");
constÂ setModuleCssRuleÂ =Â require("./setModuleCssRule");
constÂ CopyWebpackPluginÂ =Â require("copy-webpack-plugin");
constÂ BundleAnalyzerPluginÂ =Â require('webpack-bundle-analyzer').BundleAnalyzerPlugin;

//Â è¯»å–Â node_envÂ ç¯å¢ƒå˜é‡çš„å€¼

letÂ nodeEnvÂ =Â process.env.NODE_ENV;

ifÂ (!nodeEnv)Â {
Â Â nodeEnvÂ =Â "development";
}

constÂ isProdÂ =Â nodeEnvÂ ===Â "production";

constÂ envVarsÂ =Â [
Â Â ".env",
Â Â `.env.${nodeEnv}`,
Â Â `.env.${nodeEnv}.local`,
Â Â ".env.local",
].filter(Boolean);

//Â è¯»å–å½“å‰æ„å»ºç¯å¢ƒå¯¹åº”çš„ç¯å¢ƒå˜é‡æ–‡ä»¶çš„æ‰€æœ‰å†…å®¹ï¼Œå°†å…¶æ³¨å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­

envVars.forEach((envVar)Â =>Â {
Â Â constÂ envFilePathÂ =Â resolve(__dirname,Â "..",Â envVar);
Â Â constÂ envFileExistsÂ =Â require("fs").existsSync(envFilePath);
Â Â ifÂ (envFileExists)Â {
Â Â Â Â require("dotenv").config({
Â Â Â Â Â Â path:Â envFilePath,
Â Â Â Â });
Â Â }
});

/**
Â *Â @typeÂ {import('webpack').Configuration}
Â */

module.exportsÂ =Â {
Â Â //Â é…ç½®å…¥å£
Â Â entry:Â resolve(__dirname,Â "..",Â "src",Â "main.ts"),
Â Â optimization:Â {
Â Â Â Â //Â æš‚æ—¶ä¸è¦å‹ç¼©ä»£ç 
Â Â Â Â minimize:Â true,
Â Â },
Â Â //Â é…ç½®æ‰“åŒ…å‡ºå£
Â Â output:Â {
Â Â Â Â path:Â resolve(__dirname,Â "..",Â "dist"),
Â Â Â Â //Â ä½¿ç”¨æ–‡ä»¶æŒ‡çº¹
Â Â Â Â filename:Â "js/[name].[contenthash:6].js",
Â Â Â Â //Â ä»Â webpack5Â å¼€å§‹ï¼Œåªè¦å¼€å¯è¿™ä¸ªå¼€å…³ï¼Œé‚£ä¹ˆæ¯ä¸€æ¬¡æ„å»ºä¼šè‡ªåŠ¨æ¸…ç†è¾“å‡ºç›®å½•
Â Â Â Â clean:Â true,
Â Â Â Â //Â æ‰“åŒ…åè®¿é—®çš„èµ„æºå‰ç¼€
Â Â Â Â publicPath:Â "/",
Â Â },
Â Â //Â é…ç½®è·¯å¾„åˆ«å
Â Â resolve:Â {
Â Â Â Â alias:Â {
Â Â Â Â Â Â "@":Â resolve(__dirname,Â "..",Â "src"),
Â Â Â Â Â Â vue$:Â "vue/dist/vue.runtime.esm-bundler.js",
Â Â Â Â },
Â Â Â Â //Â é…ç½®æ¨¡å—çš„è®¿é—®è·¯å¾„
Â Â Â Â extensions:Â [".js",Â ".ts",Â ".tsx",Â ".vue",Â ".json"],
Â Â },
Â Â //Â é…ç½®æ’ä»¶
Â Â plugins:Â [
Â Â Â Â newÂ HtmlWebpackPlugin({
Â Â Â Â Â Â //Â æŒ‡å®šÂ htmlÂ æ¨¡æ¿çš„è·¯å¾„
Â Â Â Â Â Â template:Â resolve(__dirname,Â "..",Â "public",Â "index.html"),
Â Â Â Â Â Â //Â è¯¥é…ç½®ä¼šæ³¨å…¥åˆ°Â htmlÂ æ–‡ä»¶çš„æ¨¡æ¿è¯­æ³•ä¸­
Â Â Â Â Â Â title:Â process.env.VUE_APP_TITLE,
Â Â Â Â }),
Â Â Â Â //Â åŠ è½½Â vue-loaderÂ æ’ä»¶
Â Â Â Â newÂ VueLoaderPlugin(),
Â Â Â Â //Â åœ¨ç¼–è¯‘æ—¶å€™å…¨å±€æ›¿æ¢é™æ€å€¼
Â Â Â Â newÂ webpack.DefinePlugin({
Â Â Â Â Â Â //Â å®šä¹‰å…¨å±€å˜é‡
Â Â Â Â Â Â "process.env":Â {
Â Â Â Â Â Â Â Â VUE_APP_API_URI:Â JSON.stringify(process.env.VUE_APP_API_URI),
Â Â Â Â Â Â },
Â Â Â Â Â Â //Â å†³å®šÂ vue3Â æ˜¯å¦å¯ç”¨Â optionsÂ api
Â Â Â Â Â Â __VUE_OPTIONS_API__:Â true,
Â Â Â Â Â Â //Â VueÂ DevtoolsÂ åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¸å¯ç”¨
Â Â Â Â Â Â __VUE_PROD_DEVTOOLS__:Â false,
Â Â Â Â }),
Â Â Â Â newÂ MinicssExtractPlugin({
Â Â Â Â Â Â filename:Â "css/[name].[contenthash:6].css",
Â Â Â Â Â Â //Â chunkFilename:Â "css/[name].[contenthash:6].css",
Â Â Â Â }),
Â Â Â Â newÂ CopyWebpackPlugin({
Â Â Â Â Â Â patterns:Â [
Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â from:Â resolve(__dirname,Â "..",Â "public"),
Â Â Â Â Â Â Â Â Â Â to:Â resolve(__dirname,Â "..",Â "dist"),
Â Â Â Â Â Â Â Â Â Â toType:Â "dir",
Â Â Â Â Â Â Â Â Â Â globOptions:Â {
Â Â Â Â Â Â Â Â Â Â Â Â ignore:Â ["**/index.html",Â "**/.DS_Store"],
Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â info:Â {
Â Â Â Â Â Â Â Â Â Â Â Â minimized:Â true,Â //Â æ³¨æ„ï¼šminimizeÂ åº”è¯¥æ˜¯Â minimizedï¼Œæ ¹æ®CopyWebpackPluginçš„æ–‡æ¡£è¿›è¡Œä¿®æ­£
Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â ],
Â Â Â Â }),
Â Â Â Â newÂ BundleAnalyzerPlugin({
Â Â Â Â Â Â analyzerMode:Â 'server',
Â Â Â Â Â Â analyzerHost:Â '127.0.0.1',
Â Â Â Â Â Â analyzerPort:Â 8888,
Â Â Â Â Â Â openAnalyzer:Â true,
Â Â Â Â Â Â generateStatsFile:Â false,
Â Â Â Â Â Â statsOptions:Â null,
Â Â Â Â Â Â logLevel:Â 'info'
Â Â Â Â })
Â Â ],
Â Â module:Â {
Â Â Â Â //Â é…ç½®Â leader
Â Â Â Â rules:Â [
Â Â Â Â Â Â //Â é…ç½®Â jsÂ loader
Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â test:Â /\.js$/,
Â Â Â Â Â Â Â Â use:Â "babel-loader",
Â Â Â Â Â Â Â Â exclude:Â /node_modules/,
Â Â Â Â Â Â },
Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â //Â é…ç½®Â .vueÂ æ–‡ä»¶
Â Â Â Â Â Â Â Â test:Â /\.vue$/,
Â Â Â Â Â Â Â Â use:Â "vue-loader",
Â Â Â Â Â Â },
Â Â Â Â Â Â //Â åŒ¹é…Â .ts(x)
Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â test:Â /\.tsx?$/,
Â Â Â Â Â Â Â Â //Â å…ˆæš´åŠ›æ’é™¤Â node_modulesÂ ç›®å½•
Â Â Â Â Â Â Â Â exclude:Â /node_modules/,
Â Â Â Â Â Â Â Â use:Â [
Â Â Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â loader:Â "ts-loader",
Â Â Â Â Â Â Â Â Â Â Â Â options:Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â åœ¨ç¼–è¯‘Â tsÂ çš„æ—¶å€™å…³é—­ç±»å‹æ£€æŸ¥ï¼Œåªè¿›è¡Œä»£ç è½¬æ¢
Â Â Â Â Â Â Â Â Â Â Â Â Â Â transpileOnly:Â true,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â .vueÂ æ–‡ä»¶åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­æ·»åŠ Â .tsÂ åç¼€
Â Â Â Â Â Â Â Â Â Â Â Â Â Â appendTsSuffixTo:Â [/\.vue$/],
Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â //Â åœ¨Â tsÂ å¤„ç†å®Œæˆä¹‹åï¼Œå°†å†…å®¹äº¤ç»™Â babel-loaderÂ å¤„ç†
Â Â Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â loader:Â "babel-loader",
Â Â Â Â Â Â Â Â Â Â Â Â //Â options:Â {
Â Â Â Â Â Â Â Â Â Â Â Â //Â Â Â //Â æ·»åŠ Â babelÂ é¢„è®¾
Â Â Â Â Â Â Â Â Â Â Â Â //Â Â Â presets:Â [
Â Â Â Â Â Â Â Â Â Â Â Â //Â Â Â Â Â [
Â Â Â Â Â Â Â Â Â Â Â Â //Â Â Â Â Â Â Â "@babel/preset-typescript",
Â Â Â Â Â Â Â Â Â Â Â Â //Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â //Â Â Â Â Â Â Â Â Â //Â å°è¯•è½¬æ¢ä»»æ„ç±»å‹æ–‡ä»¶ä¸­çš„Â tsÂ ä»£ç 
Â Â Â Â Â Â Â Â Â Â Â Â //Â Â Â Â Â Â Â Â Â allExtensions:Â true,
Â Â Â Â Â Â Â Â Â Â Â Â //Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â //Â Â Â Â Â ],
Â Â Â Â Â Â Â Â Â Â Â Â //Â Â Â ],
Â Â Â Â Â Â Â Â Â Â Â Â //Â },
Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â ],
Â Â Â Â Â Â },
Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â oneOf:Â [
Â Â Â Â Â Â Â Â Â Â //Â å¤„ç†Â cssÂ ç›¸å…³çš„å†…å®¹
Â Â Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â test:Â /\.css$/,
Â Â Â Â Â Â Â Â Â Â Â Â //Â è¿‡æ»¤æ‰Â node_modulesÂ ä»¥åŠä»¥Â .module.cssÂ ç»“å°¾çš„æ–‡ä»¶
Â Â Â Â Â Â Â Â Â Â Â Â exclude:Â [/\.module\.css$/],
Â Â Â Â Â Â Â Â Â Â Â Â use:Â setCssRules("css",Â isProd),
Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â //Â å¤„ç†Â scssÂ ç›¸å…³çš„å†…å®¹
Â Â Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â test:Â /\.s[ac]ss$/i,
Â Â Â Â Â Â Â Â Â Â Â Â //Â è¿‡æ»¤æ‰Â node_modulesÂ ä»¥åŠä»¥Â .module.scssÂ ç»“å°¾çš„æ–‡ä»¶
Â Â Â Â Â Â Â Â Â Â Â Â exclude:Â [/\.module\.s[ac]ss$/],
Â Â Â Â Â Â Â Â Â Â Â Â use:Â setCssRules("scss",Â isProd),
Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â //Â Â å¤„ç†Â .module.cssÂ ç»“å°¾çš„æ–‡ä»¶
Â Â Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â test:Â /\.module\.css$/,
Â Â Â Â Â Â Â Â Â Â Â Â exclude:Â /node_modules/,
Â Â Â Â Â Â Â Â Â Â Â Â use:Â setModuleCssRule("css",Â isProd),
Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â //Â å¤„ç†Â .module.scssÂ ç»“å°¾çš„æ–‡ä»¶
Â Â Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â test:Â /\.module\.s[ac]ss$/,
Â Â Â Â Â Â Â Â Â Â Â Â exclude:Â /node_modules/,
Â Â Â Â Â Â Â Â Â Â Â Â use:Â setModuleCssRule("scss",Â isProd),
Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â ],
Â Â Â Â Â Â },
Â Â Â Â Â Â //Â webpack5å¤„ç†å›¾ç‰‡ç›¸å…³çš„é™æ€èµ„æº
Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â test:Â /\.(png|jpe?g|gif|webp|avif|svg)(\?.*)?$/,
Â Â Â Â Â Â Â Â //Â ä½¿ç”¨Â webpack5Â è¦…äººæ–°ç‰¹æ€§ï¼Œä¸å†éœ€è¦ä½¿ç”¨loaderå»è¿›è¡Œå¤„ç†
Â Â Â Â Â Â Â Â //Â è€Œä¸”Â assetsÂ æ˜¯Â webpack5Â é€šç”¨çš„èµ„æºå¤„ç†ç±»å‹
Â Â Â Â Â Â Â Â //Â é»˜è®¤æƒ…å†µä¸‹Â 8kbÂ ä»¥ä¸‹çš„èµ„æºä¼šè¢«è½¬åŒ–ä¸ºÂ base64Â ç¼–ç 
Â Â Â Â Â Â Â Â type:Â "asset",
Â Â Â Â Â Â Â Â parser:Â {
Â Â Â Â Â Â Â Â Â Â dataUrlCondition:Â {
Â Â Â Â Â Â Â Â Â Â Â Â //Â è‡ªå®šä¹‰Â 10Â kbÂ ä»¥ä¸‹çš„èµ„æºä¼šè¢«è½¬åŒ–ä¸ºÂ baseÂ 64Â ä½ç¼–ç 
Â Â Â Â Â Â Â Â Â Â Â Â maxSize:Â 10Â *Â 1024,
Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â generator:Â {
Â Â Â Â Â Â Â Â Â Â //Â è¾“å‡ºå›¾ç‰‡çš„ç›®å½•
Â Â Â Â Â Â Â Â Â Â //Â outputPath:Â "images",
Â Â Â Â Â Â Â Â Â Â //Â è¾“å‡ºå›¾ç‰‡çš„åç§°
Â Â Â Â Â Â Â Â Â Â filename:Â "images/[name].[contenthash:6].[ext]",
Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â },
Â Â Â Â Â Â //Â svgÂ ç±»å‹çš„é™æ€èµ„æºæœŸæœ›è½¬ä¸ºä¸ºÂ asset/resourceÂ ç±»å‹è¿›è¡Œå¤„ç†
Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â test:Â /\.(svg)(\?.*)?$/,
Â Â Â Â Â Â Â Â //Â é»˜è®¤ä¼šå°†æ„å»ºç»“æœå¯¼å‡ºå•ç‹¬çš„é…ç½®æ–‡ä»¶
Â Â Â Â Â Â Â Â type:Â "asset/resource",
Â Â Â Â Â Â Â Â generator:Â {
Â Â Â Â Â Â Â Â Â Â //Â è¾“å‡ºÂ svgÂ çš„ç›®å½•
Â Â Â Â Â Â Â Â Â Â //Â outputPath:Â "images",
Â Â Â Â Â Â Â Â Â Â //Â è¾“å‡ºÂ svgÂ çš„åç§°
Â Â Â Â Â Â Â Â Â Â filename:Â "svgs/[name].[contenthash:6].[ext]",
Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â },
Â Â Â Â ],
Â Â },
};




```

é…ç½®æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯æ­å»º vue3 å¼€å‘ç¯å¢ƒçš„åŸºç¡€é…ç½®ã€‚é…ç½®å®Œæˆä¹‹åï¼Œæˆ‘ä»¬å°±ç»§ç»­ç¼–å†™ dev ç¯å¢ƒæ„å»ºé…ç½®ä»¥åŠç”Ÿäº§ç¯å¢ƒæ„å»ºé…ç½®ï¼š

```
constÂ baseConfigÂ =Â require('./webpack.base.js')
constÂ {Â mergeÂ }Â =Â require('webpack-merge')

/**
Â *Â @typeÂ {import('webpack').Configuration}
Â */

constÂ devConfigÂ =Â {
Â Â Â Â mode:Â "development",
Â Â Â Â //Â webpack5Â æœ¬èº«å°±ç›´æ¥æ”¯æŒäº†çƒ­æ›´æ–°
Â Â Â Â //Â å®šä¹‰sourceMap
Â Â Â Â devtool:Â "cheap-module-source-map",
Â Â Â Â devServer:Â {
Â Â Â Â Â Â Â Â port:Â Number(process.env.VUE_APP_PORT),
Â Â Â Â Â Â Â Â //Â å¯åŠ¨å®Œæˆä¹‹åè‡ªåŠ¨æ‰“å¼€
Â Â Â Â Â Â Â Â open:Â JSON.parse(process.env.VUE_APP_OPEN),
Â Â Â Â Â Â Â Â //Â åœ¨è®¿é—®èµ„æºÂ 404Â ä¹‹åÂ è‡ªåŠ¨å¯¼èˆªåˆ°Â index.html
Â Â Â Â Â Â Â Â historyApiFallback:Â true,
Â Â Â Â }
}

module.exportsÂ =Â merge(baseConfig,Â devConfig)



```

```
constÂ baseConfigÂ =Â require('./webpack.base.js')
constÂ {Â mergeÂ }Â =Â require('webpack-merge')

/**
Â *Â @typeÂ {import('webpack').Configuration}
Â */

constÂ prodConfigÂ =Â {
Â Â mode:Â 'production',
}

module.exportsÂ =Â merge(baseConfig,Â prodConfig)




```

é…ç½®å®Œæ¯•ä¹‹åæˆ‘ä»¬å¯ä»¥åŠ ä¸Šå¦‚ä¸‹çš„ script è„šæœ¬å‘½ä»¤ï¼š

```
Â Â "scripts":Â {
Â Â Â Â "build:dev":Â "webpackÂ -cÂ webpack/webpack.dev.jsÂ --node-envÂ devlopment",
Â Â Â Â "build:prod":Â "webpackÂ -cÂ webpack/webpack.prod.jsÂ --node-envÂ production",
Â Â Â Â "priview":Â "serveÂ -sÂ distÂ -lÂ 4000",
Â Â Â Â "serve":Â "webpack-dev-serverÂ -cÂ webpack/webpack.dev.jsÂ --node-envÂ devlopment"
Â Â },



```

æ¥ç€æˆ‘ä»¬å¯ä»¥é…ç½® vue3 çš„ä¸šåŠ¡ä»£ç ï¼š

é¦–å…ˆé…ç½®å…¥å£æ–‡ä»¶ï¼š

```
//Â src/main.ts

importÂ {Â createApp,Â hÂ }Â fromÂ "vue"
importÂ ElementPlusÂ fromÂ 'element-plus'
importÂ 'element-plus/dist/index.css'
importÂ AppÂ fromÂ "./App.vue"
importÂ './style.css'
importÂ routerÂ fromÂ './router'

createApp(App).use(ElementPlus).use(router).mount("#app")



```

ç´§æ¥ç€æˆ‘ä»¬é…ç½® App.vue å…¥å£ç»„ä»¶ï¼š

```
<template>
Â Â <divÂ class="app">
Â Â Â Â <el-buttonÂ @click="$router.push('/')"Â type="primary">å‰å¾€é¦–é¡µ</el-button>
Â Â Â Â <el-buttonÂ @click="$router.push('/about')"Â type="primary">å…³äº</el-button>
Â Â Â Â <router-view></router-view>
Â Â </div>
</template>

<scriptÂ lang="ts"Â setup>

importÂ {Â onBeforeMount,Â refÂ }Â fromÂ 'vue'
//Â ä»¥åä¸€å®šè¦ä»”ç»†é˜…è¯»Â webpackÂ çš„ç¼–è¯‘æ—¥å¿—ä¿¡æ¯
importÂ *Â asÂ moduleCssÂ fromÂ './styles/app.module.scss'

console.log('moduleCss',Â moduleCss)

constÂ countÂ =Â ref(0)
Â 
console.log('å·¥ç¨‹è¿è¡Œæ¨¡å¼',Â process.env.NODE_ENV)
console.log('å‰å°è¯·æ±‚çš„base_url',Â process.env.VUE_APP_API_URI)

onBeforeMount(()Â =>Â {
Â Â console.log('appç»„ä»¶å¼€å§‹æ¸²æŸ“')
})

</script>




```

æˆ‘ä»¬é…ç½® /router/index.js æ–‡ä»¶ï¼š

```
//Â ç”Ÿæˆvue-routerçš„åˆå§‹åŒ–é…ç½®ä»£ç 

importÂ {Â createRouter,Â createWebHistoryÂ }Â fromÂ 'vue-router';
importÂ HomeÂ fromÂ '@/views/Home.vue';
importÂ AboutÂ fromÂ '@/views/About.vue';

constÂ routesÂ =Â [
Â Â {
Â Â Â Â path:Â '/',
Â Â Â Â name:Â 'Home',
Â Â Â Â component:Â Home,
Â Â },
Â Â {
Â Â Â Â path:Â '/about',
Â Â Â Â name:Â 'About',
Â Â Â Â component:Â About,
Â Â },
];

constÂ routerÂ =Â createRouter({
Â Â history:Â createWebHistory(process.env.BASE_URLÂ ||Â '/'),
Â Â routes,
});

exportÂ defaultÂ router;



```

æˆ‘ä»¬æ–°å»º views é¡µé¢æ–‡ä»¶ï¼š

```
home.vue

<template>
Â Â Â Â <divÂ class="home-container">
Â Â Â Â Â Â Â Â homeÂ é¡µé¢skskssk
Â Â Â Â </div>
</template>
<scriptÂ lang="ts"Â setup>

importÂ {Â mapÂ }Â fromÂ 'lodash'

constÂ numbersÂ =Â [1,Â 2,Â 3,Â 4,Â 5]

constÂ doubledNumbersÂ =Â map(numbers,Â (num:Â number)Â =>Â numÂ *Â 2)

console.log('doubledNumbers',Â doubledNumbers);Â //Â è¾“å‡º:Â [2,Â 4,Â 6,Â 8,Â 10]

</script>



```

```
about.vue

<template>
Â Â Â Â <divÂ class="home-container">
Â Â Â Â Â Â Â Â AboutÂ é¡µé¢
Â Â Â Â </div>
</template>
<scriptÂ lang="ts"Â setup>

importÂ {Â mapÂ }Â fromÂ 'lodash-es'

constÂ numbersÂ =Â [1,Â 2,Â 3,Â 4,Â 5]

constÂ doubledNumbersÂ =Â map(numbers,Â (num:Â number)Â =>Â numÂ *Â 2)

console.log('doubledNumbers',Â doubledNumbers);Â //Â è¾“å‡º:Â [2,Â 4,Â 6,Â 8,Â 10]

</script>



```

æˆ‘ä»¬å»ºç«‹ /assets æ–‡ä»¶å¤¹ï¼Œæ–°å»º var.scss æ–‡ä»¶ï¼š

```
//Â å®šä¹‰å…¬å…±å…¨å±€å˜é‡

$green:Â #00ff00;




```

å®Œæˆä¸Šè¿°å‡†å¤‡å·¥ä½œä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ åŠ ä¸Šä¸€äº›ç¯å¢ƒå˜é‡ï¼š

.env:

```
VUE_APP_TITLE=webpack-vue3-app
BASE_URL=/




```

.env.devlopment:

```
CURRENT_ENV=development
VUE_APP_OPEN=true
VUE_APP_API_URI=/api
VUE_APP_PORT=3000



```

.env.production:

```
CURRENT_ENV=production
VUE_APP_API_URI=/api



```

å»ºç«‹ babel é…ç½®æ–‡ä»¶ï¼š

```
module.exportsÂ =Â {
Â Â presets:Â [
Â Â Â Â [
Â Â Â Â Â Â "@babel/preset-env",
Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â //Â æŒ‰éœ€å¼•å…¥Â corejsÂ å«ç‰‡,Â æ™®é€šçš„ä¸šåŠ¡å¼€å‘å‰ç«¯é¡¹ç›®é€‚åˆè¯¥æ–¹æ³•ï¼Œç®€å•æ–¹ä¾¿ï¼ŒæŒ‰éœ€å¼•å…¥
Â Â Â Â Â Â Â Â //Â ä½†æ˜¯ä¸é€‚åˆå¤„ç†ä¸€äº›å…¬å…±ç¬¬ä¸‰æ–¹åº“åº“çš„æ‰“åŒ…æ„å»º
Â Â Â Â Â Â Â Â useBuiltIns:Â "usage",
Â Â Â Â Â Â Â Â corejs:Â 3,
Â Â Â Â Â Â },
Â Â Â Â ],
Â Â Â Â [
Â Â Â Â Â Â "@babel/preset-typescript",
Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â //Â å°è¯•è½¬æ¢ä»»æ„ç±»å‹æ–‡ä»¶ä¸­çš„Â tsÂ ä»£ç 
Â Â Â Â Â Â Â Â allExtensions:Â true,
Â Â Â Â Â Â },
Â Â Â Â ],
Â Â ],
Â Â //Â plugins:Â [
Â Â //Â Â Â Â Â //Â é…ç½®Â babelÂ æ’ä»¶
Â Â //Â Â Â Â Â [
Â Â //Â Â Â Â Â Â Â Â Â //Â é…ç½®è¿è¡Œæ—¶è¿›è¡Œå«ç‰‡å¤„ç†çš„æ’ä»¶
Â Â //Â Â Â Â Â Â Â Â Â //Â ä¸ä¼šå…¨å±€æ±¡æŸ“åŸç”Ÿå®¿ä¸»ç¯å¢ƒæä¾›çš„å†…å®¹ï¼Œå®Œå…¨é‡å†™è¯­æ³•å«ç‰‡
Â Â //Â Â Â Â Â Â Â Â Â //Â é€‚åˆå°è£…å…¬å…±ä¸‰æ–¹åº“
Â Â //Â Â Â Â Â Â Â Â Â '@babel/plugin-transform-runtime',
Â Â //Â Â Â Â Â Â Â Â Â {
Â Â //Â Â Â Â Â Â Â Â Â Â Â Â Â corejs:Â 3
Â Â //Â Â Â Â Â Â Â Â Â }
Â Â //Â Â Â Â Â ]
Â Â //Â ]
};



```

å»ºç«‹ ts é…ç½®æ–‡ä»¶ï¼š

```
{
Â Â Â Â "compilerOptions":Â {
Â Â Â Â Â Â "target":Â "esnext",
Â Â Â Â Â Â "module":Â "esnext",
Â Â Â Â Â Â "strict":Â true,
Â Â Â Â Â Â "jsx":Â "preserve",
Â Â Â Â Â Â "moduleResolution":Â "node",
Â Â Â Â Â Â "skipLibCheck":Â true,
Â Â Â Â Â Â "esModuleInterop":Â true,
Â Â Â Â Â Â "allowSyntheticDefaultImports":Â true,
Â Â Â Â Â Â "forceConsistentCasingInFileNames":Â true,
Â Â Â Â Â Â "useDefineForClassFields":Â true,
Â Â Â Â Â Â "sourceMap":Â true,
Â Â Â Â Â Â "baseUrl":Â ".",
Â Â Â Â //Â Â Â "types":Â [
Â Â Â Â //Â Â Â Â Â "webpack-env"
Â Â Â Â //Â Â Â ],
Â Â Â Â Â Â "paths":Â {
Â Â Â Â Â Â Â Â "@/*":Â [
Â Â Â Â Â Â Â Â Â Â "src/*"
Â Â Â Â Â Â Â Â ]
Â Â Â Â Â Â },
Â Â Â Â Â Â "lib":Â [
Â Â Â Â Â Â Â Â "esnext",
Â Â Â Â Â Â Â Â "dom",
Â Â Â Â Â Â Â Â "dom.iterable",
Â Â Â Â Â Â Â Â "scripthost"
Â Â Â Â Â Â ],
Â Â Â Â },
Â Â Â Â "include":Â [
Â Â Â Â Â Â "src/**/*.ts",
Â Â Â Â Â Â "src/**/*.tsx",
Â Â Â Â Â Â "src/**/*.vue",
Â Â Â Â Â Â "tests/**/*.ts",
Â Â Â Â Â Â "tests/**/*.tsx"
Â Â Â Â ],
Â Â Â Â "exclude":Â [
Â Â Â Â Â Â "node_modules"
Â Â Â Â ],
Â Â }



```

é…ç½®å®Œæ¯•ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œ pnpm serve å‘½ä»¤ï¼š

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37RHFbdRrAf4icBY6w6CCqGRso4sC3mKzTGfkzicrdW6p7EyEag7iavZzzTw/640?wx_fmt=other&from=appmsg)image.png![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37Rk5ovgf5bbiaHHhy4xukiaBQalLbiaibQO0QRgibictWZr1pVbmcFYz2Cah1Q/640?wx_fmt=other&from=appmsg)image.png

è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†åŸºç¡€é…ç½®ç¯å¢ƒçš„æ­å»ºã€‚é‚£ä¹ˆé¦–å…ˆï¼Œè®©æˆ‘ä»¬æ¥åˆ†æå’Œä¼˜åŒ–ä¼ è¾“æ•ˆç‡ï¼š

åˆ†æ webpack dev æ¨¡å¼æ‰“åŒ…ç»“æœï¼š
----------------------

æˆ‘ä»¬å·²ç»åŠ å…¥äº† BundleAnalyzerPlugin æ’ä»¶ï¼Œå¹¶ä¸”é…ç½®äº†è¯¥æœåŠ¡çš„ç«¯å£å·æ˜¯ï¼š8888ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®¿é—®è¯¥ç«¯å£å·æ¥åˆ†ææ‰“åŒ…ç»“æœï¼š

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37RX6tgSJRGjt5HlhiaArBASibTngt7FI1vMT9Ln9FNU577prk715Sm6rVw/640?wx_fmt=other&from=appmsg)image.png

é€šè¿‡å¯¹æ‰“åŒ…ç»“æœçš„åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä»¥ä¸‹çš„å‘ç°ï¼š

1.  æ‰€æœ‰çš„å†…å®¹éƒ½è¢«æ‰“åŒ…åˆ°äº†ä¸€ä¸ª chunk ä¸­ã€‚
    
2.  æˆ‘ä»¬æ­¤æ—¶è¿™ä¸ªé¡¹ç›®ä¸­åŒæ—¶ä½¿ç”¨äº† lodash ä»¥åŠ lodash-es æ–‡ä»¶ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªåŒ…çš„æ‰€æœ‰å†…å®¹åŒæ—¶éƒ½è¢«æ‰“åŒ…åˆ°äº†æœ€ç»ˆçš„æ„å»ºç»“æœä¸­äº†ï¼š
    

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37RiciaRoXJlXVJvTY0sfdyNiaKpJlkCcPAOQxRjorBLXcCFuGAQQib4kdXcQ/640?wx_fmt=other&from=appmsg) 3. å æ‰“åŒ…ä½“ç§¯æœ€å¤§çš„ä¸‰ä¸ªåŒ…åˆ†åˆ«æ˜¯ element-plusã€lodash-esã€lodashï¼š

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37RJnlg5EVXibwn3ydbiaI8Hl2a1bFHC7vRhib2yzJfShkKQrm3vz93bAWdQ/640?wx_fmt=other&from=appmsg)image.png

å¹¶ä¸” element-plus ä¸­çš„æ‰€æœ‰ç»„ä»¶éƒ½è¢«æ‰“åŒ…è¿›æ¥äº†ã€‚

4.  æœ‰ä¸€äº›è²Œä¼¼æˆ‘ä»¬å®Œå…¨æ²¡æœ‰ä½¿ç”¨ï¼Œä¹Ÿæ²¡æœ‰ç›´æ¥å®‰è£…çš„ä¾èµ–éƒ½è¢«æ‰“åŒ…è¿›æ¥äº†ï¼š
    

æ¯”å¦‚ï¼š ![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37RYomdq8IHBdXgSy7cL2QMJOqfKj9mN9jsU8wnfAPOicxZetMEhlRNu3g/640?wx_fmt=other&from=appmsg)

day.js

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37Rmk4SA58CCr58pnP4KKFgpKFut2MbnjuEeTPObSiaHWgVoh07f0Ol0GQ/640?wx_fmt=other&from=appmsg)image.png

async-validator

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37RssDY95Dfek1umf5lr3OJTX3V4HdZnApIhgibL44Wqy6qUJxBJVAX6ibA/640?wx_fmt=other&from=appmsg)image.png

element-plus/icon-vue çš„å†…å®¹éƒ½è¢«æ‰“åŒ…è¿›æ¥äº†ï¼Œæˆ‘ä»¬ç›®å‰å¹¶æ²¡æœ‰ä½¿ç”¨ iconã€‚

åˆ†æ webpack prod æ¨¡å¼æ‰“åŒ…ç»“æœï¼š
-----------------------

æˆ‘ä»¬æ‰§è¡Œ pnpm build:prod å‘½ä»¤ï¼š

é¦–å…ˆï¼Œæˆ‘ä»¬å…³æ³¨ä¸€ä¸‹ webpack æ„å»ºä¹‹åï¼Œæ§åˆ¶å°çš„è­¦å‘Šæ—¥å¿—ï¼š

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37RiceKic4QAWEbiaPCxrs9ZzPNNEgyqFgt7zCb0tVTVjhjjabibHoK2F431g/640?wx_fmt=other&from=appmsg)image.png

åˆ†æè¿™ä¸ªæ—¥å¿—æˆ‘ä»¬å¯ä»¥çŸ¥é“ webpack åœ¨æç¤ºæˆ‘ä»¬ï¼Œç›®å‰æ•´ä¸ªæ‰“åŒ…ä½“ç§¯æ¯”è¾ƒå¤§äº†ï¼Œå»ºè®®æˆ‘ä»¬ä½¿ç”¨ import å‡½æ•°æ¥è¿›è¡Œè·¯ç”±æ‡’åŠ è½½ï¼Œä»è€Œä¼˜åŒ–ä¸» chunk çš„æ‰“åŒ…ä½“ç§¯ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„æ—¥å¿—ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œå€ŸåŠ© import å‡½æ•°è¿›è¡Œæ¨¡å—çš„æ‡’åŠ è½½ï¼Œæ˜¯å®ç°ä»£ç åˆ†åŒ…ï¼Œä¼˜åŒ–ä¸» chunk çš„ä¸€ç§é‡è¦æ‰‹æ®µã€‚ æ¥ç€æˆ‘ä»¬ç»§ç»­æ¥è§‚å¯Ÿç”Ÿäº§ç¯å¢ƒæ„å»ºçš„æ‰“åŒ…ç»“æœï¼š

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37Rgxia1Fc8J14IQKg0wRMEsk6PvdC9vIoCgiaIX6XLWx1W0Y8mL8icrJ7XA/640?wx_fmt=other&from=appmsg)image.png

é€šè¿‡åˆ†æç”Ÿäº§ç¯å¢ƒçš„æ‰“åŒ…ç»“æœï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—å‡ºä»¥ä¸‹ç»“è®ºï¼š

1.  mian.ts + 911 module è¿™ä¸ªæ¨¡å—å ä½“ç§¯æœ€å¤§çš„ã€‚è€Œè¿™ä¸ªæ¨¡å—ä¸­æ··åˆäº†æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„ä¸šåŠ¡ä»£ç ä»¥åŠå…¶ä»–è¯¸å¤šä¸‰æ–¹åº“çš„ä»£ç ã€‚
    
2.  å ä½“ç§¯æœ€å¤§çš„ä¸‰ä¸ªæ¨¡å—åˆ†åˆ«æ˜¯ï¼šæ··åˆäº†ç¬¬ä¸‰æ–¹åº“å’Œä¸šåŠ¡ä»£ç çš„æ··åˆæ¨¡å—ã€lodash æ¨¡å—ã€element-plus æ¨¡å—ã€‚
    
3.  lodash-es ä»¥åŠ vue ç­‰ä¸€äº›ä¸‰æ–¹æ¨¡å—çš„æ‰“åŒ…ç»“æœæ²¡æœ‰çœ‹åˆ°ï¼Œæˆ‘ä»¬æ¨æµ‹ï¼Œå®ƒä»¬éƒ½è¢«ä¸€èµ·åˆå¹¶åˆ°äº† mian.ts + 911 module è¿™ä¸ªæ¨¡å—ä¸­äº†ã€‚
    

å¯¹å½“å‰é¡¹ç›®çš„æ‰“åŒ…ä½“ç§¯æœ‰äº†æœ€åŸºæœ¬çš„åˆ†æä¹‹åï¼Œæˆ‘ä»¬ä¸‹é¢æ¥é€æ­¥ä¼˜åŒ–æ‰“åŒ…ä½“ç§¯ã€‚

å»é™¤æ‰é‡å¤æ‰“åŒ…æ¨¡å—ä»¥åŠæ²¡æœ‰ä½¿ç”¨çš„æ¨¡å—
------------------

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸Šè¿°æ‰“åŒ…ç»“æœä¸­åŒæ—¶æ‰“åŒ…äº† lodash-es ä»¥åŠ lodash æ¨¡å—

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37R7ykwpKUfbBKkS5kSffYMFrjtftfsp00SfnePoX1qLz6F3fV9qBvibew/640?wx_fmt=other&from=appmsg)image.png

è¿™ä¸ªé—®é¢˜çš„åŸå› å…¶å®åœ¨æ—¥å¸¸å¼€å‘ä¸­è¿˜æ˜¯æŒºå¸¸è§çš„ï¼Œæˆ‘ä»¬å¯èƒ½åŒæ—¶å®‰è£…å’Œä½¿ç”¨äº†ä¸€ä¸ªå¸¸ç”¨åŒ…çš„æ™®é€šç‰ˆæœ¬ä»¥åŠ es ç‰ˆæœ¬ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†é¡¹ç›®ä¸­ lodash çš„æ™®é€šç‰ˆæœ¬ç§»é™¤è°ƒç”¨ï¼Œå…¨éƒ¨æ”¹æˆ lodash-es ç‰ˆæœ¬ã€‚è¿™æ ·åšäº†ä¹‹åï¼Œæˆ‘ä»¬å†ä¸€æ¬¡æŸ¥çœ‹æ‰“åŒ…ç»“æœï¼š

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37RUb3iaE4XsYicqZAkSoKUQlonMygk0WJicpYW8zwQibB7hLicMmHTNBD1Jrg/640?wx_fmt=other&from=appmsg)image.png

å¯ä»¥çœ‹åˆ° lodash æ¨¡å—å·²ç»è¢«ç§»é™¤äº†ï¼Œæ­¤æ—¶å¼€å‘æ¨¡å¼ä¸‹åŒ…çš„æ€»ä½“ç§¯æ˜¯ 4.54M

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37R0E3mB0qXCKt7t0czyicHh631mia9q0fwMSH4z2nd62yEq3hwfjrYtEug/640?wx_fmt=other&from=appmsg)image.png

ç”Ÿäº§æ¨¡å¼æ„å»º ladash æ¨¡å—ä¹Ÿè¢«æ•´ä¸ªç§»é™¤æ‰äº†ï¼Œå¹¶ä¸”å› ä¸º lodash-es tree shaking çš„èƒ½åŠ›ï¼Œæ•´ä¸ª lodash-es ä¹Ÿè¿›è¡Œäº†æŒ‰éœ€æ‰“åŒ…ï¼Œæ‰€ä»¥ä¸€ä¸‹å­å‡å°‘äº†å¾ˆå¤šçš„ä½“ç§¯ï¼Œåªæœ‰ 3.49M äº†ã€‚ åšå®Œè¿™ä¸ªä¼˜åŒ–ä¹‹åï¼Œæˆ‘ä»¬ç»§ç»­æ¥åˆ†ææ­¤æ—¶çš„æ‰“åŒ…ç»“æœï¼š ç›®å‰æ‰“åŒ…ä½“ç§¯æœ€å¤§çš„æ˜¯ element-plus ç»„ä»¶åº“ä»¥åŠç›¸å…³çš„å›¾æ ‡ç»„ä»¶åº“ï¼š

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37R7ic3Ovvyu0fTjZ89SNDJPSuxq2M7dBoe503jG0slHzOFW5etm7HXpvA/640?wx_fmt=other&from=appmsg)image.png

ä¸è¿‡ç”Ÿäº§æ¨¡å¼ä¸‹æ‰“åŒ…æˆ‘ä»¬å¥½åƒå¹¶æ²¡æœ‰çœ‹åˆ° element-plus ç›¸å…³çš„æ¨¡å—ï¼Œè¿™ä¸ªæˆ‘ä»¬æ¨æµ‹å¹¶ä¸æ˜¯ element-plus çš„åŒ…å¤ªå°äº†æ‰€ä»¥çœ‹ä¸åˆ°ï¼Œè€Œæ˜¯è¢«æ•´ä¸ªåˆå¹¶åˆ° main.ts + modules è¿™ä¸ªå¤§å¤§çš„å—ä¸­å»äº†ï¼Œæ­¤æ—¶è¿™ä¸ªå¤§éƒ¨æ¨¡å—çš„ä½“ç§¯æ˜¯ 3.14 M

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37RiaZMOTn8AkkYQmjUSl4CpzZNORTlELwRBaDOk82MsZkLxMhfaEkVvwA/640?wx_fmt=other&from=appmsg)image.png

æˆ‘ä»¬ç›®å‰åœ¨é¡¹ç›®ä¸­é‡‡å–çš„æ˜¯æ’ä»¶æ¥å…¨å±€æ³¨å†Œ element-plus çš„æ‰€æœ‰ç»„ä»¶çš„ã€‚æ‰€ä»¥ï¼Œç”Ÿäº§æ¨¡å¼æ˜¯æ— æ³•è¿›è¡Œ tree shaking çš„ï¼Œå› ä¸ºæœ¬èº«æ‰€æœ‰ç»„ä»¶ä¸ç®¡æœ‰æ²¡æœ‰ä½¿ç”¨éƒ½è¢« import äº†ã€‚æ‰€ä»¥æˆ‘ä»¬è¦æ‰€è§ element çš„æ‰“åŒ…ä½“ç§¯ï¼Œéœ€è¦æŒ‰éœ€å¯¼å…¥ï¼Œæˆ‘ä»¬æå‡ºä¸¤ç§æ–¹æ¡ˆï¼š

1.  åœ¨å“ªä¸€ä¸ªæ¨¡å—ä¸­ç”¨åˆ°å“ªä¸€ä¸ªç»„ä»¶ï¼Œæˆ‘ä»¬å°±åœ¨å“ªä¸€ä¸ªæ¨¡å—ä¸­æ‰‹åŠ¨ import å“ªä¸€ä¸ªç»„ä»¶ã€‚è¿™ç§å¯ä»¥æœ€å¥½çš„åœ¨ç”Ÿäº§æ¨¡å¼ä¸‹äº«å— tree shaking çš„ç¦åˆ©ï¼Œä½†æ˜¯ä½¿ç”¨è¿‡äºç¹çäº†ï¼Œæ¨èåªæ˜¯åœ¨å½“å‰é¡¹ç›®åªéœ€ä½¿ç”¨å‡ æ¬¡ element-plus ç»„ä»¶çš„æƒ…å†µä¸‹é‡‡ç”¨è¯¥æ–¹æ¡ˆã€‚
    
2.  æˆ‘ä»¬æ‰‹åŠ¨ç¼–å†™ä¸€ä¸ª install element-plus ç»„ä»¶åº“çš„æ–¹æ¡ˆï¼ŒæŒ‰éœ€å¯¼å…¥å¹¶ä¸”å…¨å±€æ³¨å†Œ element-plus ç»„ä»¶ã€‚æˆ‘ä»¬ä¸‹é¢å¼€å§‹å®è·µæ–¹æ¡ˆ 2ï¼š
    

é¦–å…ˆæˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ element-plus è¿™ä¸ªé¡¹ç›®çš„ package.json æ–‡ä»¶ï¼š

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37Ricbhd8d3KzCFsLrL29sdKiabKKAXHbm11FwpmAvDX7icdNSTouAGK2zGw/640?wx_fmt=other&from=appmsg)image.png

åˆ†æå¯çŸ¥ï¼Œå¦‚æœæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ import element-plusï¼Œé‚£ä¹ˆå¯¼å…¥çš„æ¨¡å—å…¥å£å®åœ¨ es/index.mjs æ¨¡å—çš„ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¯¥æ¨¡å—ï¼š

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37R673hibuKOJvtSIYneK1HY0uXj6Af2WODbpnmEZw6uzkxnru7dVPsXPQ/640?wx_fmt=other&from=appmsg)image.png

è¿™ä¸ªæ¨¡å—å®é™…ä¸Šå°±æ˜¯å¯¼å‡ºçš„å…¥å£ï¼Œå°†æ‰€æœ‰çš„ç»„ä»¶ä¾æ¬¡è¿›è¡Œäº† exportï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦åœ¨è‡ªå·±çš„ install element-plus æ¨¡å—ä¸­ ä¾æ¬¡ import ç»„ä»¶ï¼Œç„¶åä¾æ¬¡æ³¨å†Œå°±å¯ä»¥äº†ã€‚åˆ†æäº†å®ç°æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¼€å¹²ï¼š

é¦–å…ˆåœ¨ src ä¸‹é¢æ–°å»ºä¸€ä¸ª /plugins/install.ts æ–‡ä»¶ï¼ŒåŠ å…¥ä»¥ä¸‹å†…å®¹ï¼š

```
importÂ {Â AppÂ }Â fromÂ "vue";
importÂ {Â 
Â Â Â Â ElButton,
Â Â Â Â ElInput
}Â fromÂ 'element-plus'

constÂ elementComponentsÂ =Â [
Â Â Â Â ElButton,
Â Â Â Â ElInput
]

exportÂ defaultÂ {
Â Â Â Â install(app:Â App)Â {
Â Â Â Â Â Â elementComponents.forEach(componentÂ =>Â {
Â Â Â Â Â Â Â Â app.component(component.name!,Â component)
Â Â Â Â Â Â })
Â Â Â Â }
}




```

ç„¶åæˆ‘ä»¬ä¿®æ”¹ä»¥ä¸‹å…¥å£æ¨¡å—çš„æ–¹å¼ï¼š

```
importÂ {Â createApp,Â hÂ }Â fromÂ "vue"
importÂ 'element-plus/dist/index.css'
importÂ AppÂ fromÂ "./App.vue"
importÂ './style.css'
importÂ routerÂ fromÂ './router'
importÂ elementInstallÂ fromÂ "./plugins/elementInstall"

createApp(App).use(elementInstall).use(router).mount("#app")



```

ç„¶åæˆ‘ä»¬é‡æ–°å¯åŠ¨ä¸€ä¸‹æœåŠ¡ï¼Œé‡æ–°è¿›è¡Œæ‰“åŒ…ï¼š

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37RCUYpDw1WbTg78vBNSal6GPLXhnAbx04HBPYW62gySDUqVmep1t0TIw/640?wx_fmt=other&from=appmsg)image.png

é¦–å…ˆé¡µé¢è¿è¡Œæ­£å¸¸ã€‚æˆ‘ä»¬åˆ†æä¸€ä¸‹æ‰“åŒ…ç»“æœï¼š

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37R3gsn68Ox5O5yYCJLRjU0AL3iaCQO7PCgAm1V2m5FYRtAYbFx6OqJ4vQ/640?wx_fmt=other&from=appmsg)image.png

æ­¤æ—¶ç”Ÿäº§æ¨¡å¼ä¸‹çš„ç»¼åˆæ¨¡å—çš„ä½“ç§¯åªæœ‰ 1.3M äº†ï¼Œç¬é—´ä» 3.14 M é™åˆ°äº† 1.3Mã€‚æ•ˆæœè¿˜æ˜¯å¾ˆæ˜æ˜¾çš„ã€‚

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37RoypE0A72oEb4HAmzNX7I97oxf4PRAwYqFn0ibYeLwRjR8tkZ8pyGBlQ/640?wx_fmt=other&from=appmsg)image.png

å¼€å‘æ¨¡å¼ä¹Ÿåªæ˜¯å°†äº† element-plus ä¸­æ³¨å†Œçš„ç»„ä»¶æ¨¡å—å†…å®¹å¯¼å…¥è¿›æ¥äº†ã€‚

è‡ªåŠ¨åˆ†åŒ…
----

é¦–å…ˆæˆ‘ä»¬æ˜ç¡®ä¸€ç‚¹ï¼Œåˆ†åŒ…æœ€å¤§çš„ç›®çš„å°±æ˜¯ä¸ºäº†åˆ©ç”¨ http ç¼“å­˜åè®®æ¥å®ç°æ¨¡å—çš„ç¼“å­˜å’Œé‡ç”¨ã€‚è€Œä¸ºäº†å®ç°æµè§ˆå™¨ç¼“å­˜ï¼Œæœ€ä¸»æµçš„æ‰‹æ®µå°±æ˜¯å€ŸåŠ©æ–‡ä»¶ hashã€‚å½“æŸäº› chunk æ–‡ä»¶å†…å®¹æ²¡æœ‰å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œæ–‡ä»¶ hash å°±ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œè€Œåªè¦æ–‡ä»¶ hash æ²¡æœ‰å˜ï¼Œé‚£ä¹ˆæµè§ˆå™¨å°±ä¼šé‡ç”¨æœ¬åœ°ç¼“å­˜çš„å†…å®¹ï¼Œä¸ä¼šé‡æ–°å‘æœåŠ¡å™¨å‘é€ http è¯·æ±‚ã€‚è¿™æ ·å°±å¯ä»¥å®ç°ä¼ è¾“æ€§èƒ½ä¼˜åŒ–ã€‚ å®é™…ä¸Šï¼Œwebpack æœ¬èº«å°±æœ‰é»˜è®¤çš„åˆ†åŒ…é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥å»çœ‹ä¸€ä¸‹ webpack çš„å®˜ç½‘æè¿°ï¼š

ä¼˜åŒ– (Optimization) | webpack ä¸­æ–‡æ–‡æ¡£ | webpack ä¸­æ–‡æ–‡æ¡£ | webpack ä¸­æ–‡ç½‘ (webpackjs.com)[1]

æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œå®é™…ä¸Šä» webpack4 å¼€å§‹ï¼Œåˆ†åŒ…å®é™…ä¸Šä½¿ç”¨çš„å°±æ˜¯å†…ç½®çš„æ’ä»¶ï¼š

SplitChunksPlugin | webpack ä¸­æ–‡æ–‡æ¡£ | webpack ä¸­æ–‡æ–‡æ¡£ | webpack ä¸­æ–‡ç½‘ (webpackjs.com)[2]

webpack å·²ç»å¯¹è¿™ä¸ªæ’ä»¶è¿›è¡Œäº†é»˜è®¤é…ç½®ï¼š

```
module.exportsÂ =Â {
Â Â //...
Â Â optimization:Â {
Â Â Â Â splitChunks:Â {
Â Â Â Â Â Â //Â é»˜è®¤å¯¹å¼‚æ­¥æ¨¡å—è¿›è¡Œåˆ†åŒ…
Â Â Â Â Â Â chunks:Â 'async',
Â Â Â Â Â Â //Â æœ€å°çš„åˆ†åŒ…æç¤ºæ˜¯Â 20000Â å­—èŠ‚
Â Â Â Â Â Â minSize:Â 20000,
Â Â Â Â Â Â minRemainingSize:Â 0,
Â Â Â Â Â Â minChunks:Â 1,
Â Â Â Â Â Â maxAsyncRequests:Â 30,
Â Â Â Â Â Â maxInitialRequests:Â 30,
Â Â Â Â Â Â enforceSizeThreshold:Â 50000,
Â Â Â Â Â Â cacheGroups:Â {
Â Â Â Â Â Â Â Â defaultVendors:Â {
Â Â Â Â Â Â Â Â Â Â test:Â /[\/]node_modules[\/]/,
Â Â Â Â Â Â Â Â Â Â priority:Â -10,
Â Â Â Â Â Â Â Â Â Â reuseExistingChunk:Â true,
Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â default:Â {
Â Â Â Â Â Â Â Â Â Â minChunks:Â 2,
Â Â Â Â Â Â Â Â Â Â priority:Â -20,
Â Â Â Â Â Â Â Â Â Â reuseExistingChunk:Â true,
Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â },
Â Â Â Â },
Â Â },
};


```

è¿™ä¸ªé‡Œé¢æœ€æ ¸å¿ƒçš„é…ç½®å°±æ˜¯ï¼š

`chunks: 'async'` è¿™ä¸ªè¡¨ç¤º webpack åªä¼šå¯¹å¼‚æ­¥åŠ è½½çš„æ¨¡å—è¿›è¡Œåˆ†åŒ…ï¼Œæ‰€è°“çš„å¼‚æ­¥åŠ è½½å°±æ˜¯ä½¿ç”¨`await import('xxxx')` å‡½æ•°æ¥è¿›è¡Œæ¨¡å—æ‡’åŠ è½½ã€‚å…¶å®å¾ˆå¥½ç†è§£ï¼Œä¹Ÿå°±æ˜¯åªæœ‰å½“ js æ‰§è¡Œåˆ°äº†è¿™ä¸ª import å‡½æ•°è°ƒç”¨çš„æ—¶å€™æ‰ä¼šè¿›è¡Œæ¨¡å—åŠ è½½ã€‚

`minSize: 20000` è¿™ä¸ªé…ç½®å†³å®šäº† webpack åªä¼šå¯¹ è¶…è¿‡ 20000 å­èŠ‚çš„æ¨¡å—è¿›è¡Œåˆ†åŒ…ã€‚

åŸºäºä»¥ä¸Šåˆ†æï¼Œæˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰çš„ vue-router ä¸­é…ç½®çš„é¡µé¢è·¯ç”±å…¨éƒ¨è°ƒæ•´ä¸ºå¼‚æ­¥åŠ è½½ï¼Œæ¥å°è¯•å°†æ¯ä¸€ä¸ªè·¯ç”±å•ç‹¬è¿›è¡Œæ‰“åŒ…ï¼Œå®ç°æ¨¡å—æ‡’åŠ è½½ï¼š

```
constÂ routesÂ =Â [
Â Â {
Â Â Â Â path:Â '/',
Â Â Â Â name:Â 'Home',
Â Â Â Â component:Â ()Â =>Â import('@/views/Home.vue')
Â Â },
Â Â {
Â Â Â Â path:Â '/about',
Â Â Â Â name:Â 'About',
Â Â Â Â component:Â ()Â =>Â import('@/views/About.vue'),
Â Â },
];




```

æˆ‘ä»¬çœ‹ä¸€ä¸‹ç”Ÿäº§ç¯å¢ƒåˆ†åŒ…çš„ç»“æœï¼š

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37RQBR3AxEakU9SFI4YTX6sIjCicPGIw51XK0XY9ickaqqH3N06GUBL8yTw/640?wx_fmt=other&from=appmsg)image.png

webpack åˆ†å‡ºæ¥äº† 4 ä¸ª chunkï¼Œmain å¼€å¤´çš„é‚£ä¸ª chunk è‚¯å®šæ˜¯ä¸»æ¨¡å—çš„ chunkï¼Œå…¶ä»–ä¸‰ä¸ª chunkï¼Œå®åœ¨æ˜¯çœ‹ä¸å‡ºæ¥å«ä¹‰ï¼Œä¸ºäº† chunk çš„è¯­ä¹‰åŒ–æ›´å¥½ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ webpack æ”¯æŒçš„é­”æ³•æ³¨é‡Šä»¥åŠä¸‹é¢çš„é…ç½®ï¼š é¦–å…ˆæˆ‘ä»¬å›é¡¾ä¸€ä¸‹åŸºç¡€é…ç½®ï¼š

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37R7Ixd7FJhqRF4bNp5hVak5ww8tYwsq96FBoSIuWutUuVkQTibSpYicThg/640?wx_fmt=other&from=appmsg) æˆ‘ä»¬å·²ç»ç»™æ‰€æœ‰æ‰“åŒ…å‡ºæ¥çš„æ¨¡å—å¼€å¯äº†æ–‡ä»¶æŒ‡çº¹ï¼Œé‚£ä¹ˆå¯¹äºåˆ†ç¦»å‡ºæ¥çš„ chunk æ¨¡å—è¿™ä¸ªåŒæ ·æ˜¯ç”Ÿæ•ˆçš„ã€‚ å› æ­¤æˆ‘ä»¬æ‰å¯ä»¥çœ‹åˆ°ï¼Œæ‰€æœ‰çš„ chunk éƒ½è¢«æ‰“ä¸Šäº† hash idã€‚è¿™æ ·å·²ç»å¾ˆå¥½çš„æœ‰åˆ©äºæµè§ˆå™¨ç¼“å­˜äº†ã€‚æˆ‘ä»¬ç°åœ¨æ˜¯éœ€è¦å®šä¹‰åˆ†ç¦»å‡ºæ¥çš„ chunk åå­—èƒ½å¤Ÿç¬¦åˆæ¨¡å—çš„è¯­ä¹‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åŠ ä¸Šå¦‚ä¸‹çš„é…ç½®ï¼š

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37RBy4BXhyYSE054YMLNCyDcH4xHM3GcpgaaelQ9D4uAZfOMicQKyze3sw/640?wx_fmt=other&from=appmsg)image.png

```
Â Â mode:Â 'production',
Â Â optimization:Â {
Â Â Â Â //Â ç”¨æ–‡ä»¶çš„åå­—ä½œä¸ºchunkçš„åå­—
Â Â Â Â chunkIds:Â 'named',
Â Â },



```

åŠ ä¸Šè¿™ä¸ªé…ç½®ä¹‹åæˆ‘ä»¬ç»§ç»­æ‰“åŒ…ï¼š

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37RybB4a44cL6215dnQ6oAWZgPcKHicxvZsvMVgsDicThiaNsyjXWicZWt2fQ/640?wx_fmt=other&from=appmsg)image.png

è¯­ä¹‰åŒ–å·²ç»å¥½ä¸€äº›äº†ï¼Œä½†æ˜¯æˆ‘ä»¬ä»ç„¶éœ€è¦è¿›ä¸€æ­¥ä¼˜åŒ–æ‡’åŠ è½½çš„è·¯ç”±æ¨¡å—çš„åå­—ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç»§ç»­é…ç½®é­”æ³•æ³¨é‡Šï¼š

```
Â Â {
Â Â Â Â path:Â '/',
Â Â Â Â name:Â 'Home',
Â Â Â Â component:Â ()Â =>Â import(
Â Â Â Â Â Â /*Â webpackChunkName:Â "HomeView"Â */
Â Â Â Â Â Â '@/views/Home.vue'
Â Â Â Â )
Â Â },
Â Â {
Â Â Â Â path:Â '/about',
Â Â Â Â name:Â 'About',
Â Â Â Â component:Â ()Â =>Â import(
Â Â Â Â Â Â /*Â webpackChunkName:Â "AboutView"Â */
Â Â Â Â Â Â '@/views/About.vue'
Â Â Â Â ),
Â Â },



```

æˆ‘ä»¬å†ä¸€æ¬¡æ‰“åŒ…ï¼š

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37RrhVnyXvVCYogEPQbVZoxwVDGC9lcqYzthJld98tzlPCx9MjTzv6Row/640?wx_fmt=other&from=appmsg)image.png

è¿™äº›å°±éå¸¸çš„è¯­ä¹‰åŒ–äº†ã€‚ä½†æ˜¯ç°åœ¨æˆ‘ä»¬éœ€è¦æ³¨æ„ä¸€ä¸ªç‰¹æ®Šçš„æ¨¡å—ï¼š

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37RkOVIviafYPvKIl3gYfW3iadM9hzf70icwHlXVWyW1AvzeovnSlEjsptyw/640?wx_fmt=other&from=appmsg)image.png

ç¬¬ä¸‰æ–¹åº“é‡Œé¢çš„å¼‚æ­¥å¯¼å…¥çš„æ¨¡å—ä¹Ÿè¢«æ‰“åŒ…æˆäº†ä¸€ä¸ªå•ç‹¬çš„æ¨¡å—ã€‚å…¶å®ç›®å‰ä¸»è¦å°±æ˜¯åŒ…å«äº† lodash-es map æ¨¡å—çš„ç›¸å…³å†…å®¹ã€‚è¿™å°±è¯´æ˜ lodash é‡Œé¢çš„ map å‡½æ•°å­˜åœ¨ä¾èµ–äº†ä¸€äº›å¼‚æ­¥åŠ è½½çš„æ¨¡å—ã€‚å¦‚æœæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­å»é™¤æ‰ lodash map å‡½æ•°ï¼Œæ›¿æ¢ä¸ºä¸€ä¸ªå…¶ä»–çš„æ¨¡å—ï¼š

```
<template>
Â Â Â Â <divÂ class="home-container">
Â Â Â Â Â Â Â Â homeÂ é¡µé¢skskssk
Â Â Â Â </div>
</template>
<scriptÂ lang="ts"Â setup>

importÂ {Â trimÂ }Â fromÂ 'lodash-es'

constÂ numbersÂ =Â [1,Â 2,Â 3,Â 4,Â 5]

constÂ doubledNumbersÂ =Â trim('ssssss')

console.log('doubledNumbers',Â doubledNumbers);Â //Â è¾“å‡º:Â [2,Â 4,Â 6,Â 8,Â 10]

</script>



```

```
<template>
Â Â Â Â <divÂ class="home-container">
Â Â Â Â Â Â Â Â AboutÂ é¡µé¢
Â Â Â Â </div>
</template>
<scriptÂ lang="ts"Â setup>

//Â importÂ {Â mapÂ }Â fromÂ 'lodash-es'

//Â constÂ numbersÂ =Â [1,Â 2,Â 3,Â 4,Â 5]

//Â constÂ doubledNumbersÂ =Â map(numbers,Â (num:Â number)Â =>Â numÂ *Â 2)

//Â console.log('doubledNumbers',Â doubledNumbers);Â //Â è¾“å‡º:Â [2,Â 4,Â 6,Â 8,Â 10]

</script>



```

æ­¤æ—¶æˆ‘ä»¬å†å…³æ³¨ä¸€ä¸‹æ‰“åŒ…ç»“æœï¼š

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37Riav90ubv7Msic5pKW1E6g3DuKxWy3O1XOWl3YiaHJcvzyGLicYicT9UAQGg/640?wx_fmt=other&from=appmsg)image.png

lodash æ¨¡å—ä¸­çš„å¼‚æ­¥åŠ è½½æ¨¡å—å°±è¢«å¹²æ‰äº†ã€‚

é…ç½®å®Œæ¯•è·¯ç”±æ‡’åŠ è½½å¼‚æ­¥åˆ†åŒ…ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦ç»§ç»­å»åˆ†åŒ…ï¼š

æˆ‘ä»¬å…³æ³¨ä¸€ä¸‹è¿™ä¸ªä¸» chunkï¼š

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37RqiaiavVFPu4gibp9sjyKIEezHY8Sg2Ibzm168icia8UGHStUVafmFE06fpA/640?wx_fmt=other&from=appmsg)image.png

æˆ‘ä»¬è‡ªå·±çš„å…¶ä»–éå¼‚æ­¥åŠ è½½çš„ä»£ç å’Œ node_modules ä¸­ä¸‰æ–¹åŒ…çš„ä»£ç ä»ç„¶æ··åˆåœ¨ä¸€èµ·äº†ï¼Œè¿™æ ·ï¼Œä¾ç„¶ä¸åˆ©äºæµè§ˆå™¨ç¼“å­˜ï¼Œå› ä¸ºä¸šåŠ¡ä»£ç æ”¹åŠ¨æ˜¯ä¼šå¾ˆé¢‘ç¹çš„ï¼Œä½†æ˜¯è¯¸å¤šç¬¬ä¸‰æ–¹ä»£ç çš„æ”¹åŠ¨æ˜¯å¾ˆå°‘çš„ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦è¿›ä¸€æ­¥å°†ä¸šåŠ¡ä»£ç å’Œ node_modules ä»£ç æ‹†åˆ†å‡ºæ¥ï¼š

æˆ‘ä»¬å¯ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒçš„ webpack é…ç½®ä¸­æ·»åŠ ä¸Šå¦‚ä¸‹é…ç½®ï¼š

```
Â Â optimization:Â {
Â Â Â Â //Â ç”¨æ–‡ä»¶çš„åå­—ä½œä¸ºchunkçš„åå­—
Â Â Â Â chunkIds:Â 'named',
Â Â Â Â splitChunks:Â {
Â Â Â Â Â Â //Â ä»»æ„æ¨¡å—éƒ½å¯ä»¥æ‹†åˆ†
Â Â Â Â Â Â chunks:Â 'all',
Â Â Â Â Â Â cacheGroups:Â {
Â Â Â Â Â Â Â Â //Â å±ç”¨Â node_modulesÂ æ¨¡å—ï¼š
Â Â Â Â Â Â Â Â vendors:Â {
Â Â Â Â Â Â Â Â Â Â name:Â 'vendors',
Â Â Â Â Â Â Â Â Â Â test:Â /[\\/]node_modules[\\/]/,
Â Â Â Â Â Â Â Â Â Â priority:Â -10,
Â Â Â Â Â Â Â Â Â Â //Â ä¸éœ€è¦é‡å¤æ‹†è·ŸÂ chunk
Â Â Â Â Â Â Â Â Â Â reuseExistingChunk:Â true
Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â }

Â Â Â Â }
Â Â Â Â //Â minimize:Â false
Â Â },



```

è¿™æ ·é…ç½®ä¹‹åï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹æ‰“åŒ…ç»“æœï¼š

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37R0DV1DQ8nP6EF0kNN1Rejibyg65BxR9G6MXND8wb5QxUQh8BheTNOttw/640?wx_fmt=other&from=appmsg)image.png

æ­¤æ—¶æˆ‘ä»¬ç¼–å†™çš„æ™®é€šä¸šåŠ¡ä»£ç å°±å·²ç»å¯ä»¥è¢«å•ç‹¬æ‹†åˆ†å‡º main.xxx.js æ¨¡å—äº†ã€‚

å®é™…ä¸Šä»£ç æ‹†åˆ†åˆ°è¿™ä¸€æ­¥å°±å·²ç»å¯ä»¥æ»¡è¶³ç»å¤§å¤šæ•°çš„éœ€æ±‚äº†ï¼Œå¤§éƒ¨åˆ†è„šæ‰‹æ¶å·¥å…·æä¾›çš„é»˜è®¤åˆ†åŒ…ç­–ç•¥ä¹Ÿå°±æ˜¯è¿™æ ·çš„ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬å¸Œæœ›è¿›ä¸€æ­¥æ‹†åˆ†ï¼Œæ¯”å¦‚æˆ‘ä»¬å¸Œæœ›æŠŠ element-plus è¿™æ ·æ¯”è¾ƒå¤§å¹¶ä¸”åŸºæœ¬ä¸Šå®Œå…¨ä¸ä¼šå˜åŠ¨çš„çš„ä¸‰æ–¹æ¨¡å—å•ç‹¬æ‹†åˆ†å‡ºæ¥ï¼Œé‚£ä¹ˆå¯ä»¥è¿›ä¸€æ­¥æ‹†åˆ†ï¼š

```
Â Â Â Â Â Â Â Â //Â æ‹†è·ŸÂ elemntÂ æ¨¡å—ï¼š
Â Â Â Â Â Â Â Â element:Â {
Â Â Â Â Â Â Â Â Â Â name:Â 'element',
Â Â Â Â Â Â Â Â Â Â test:Â /[\\/]node_modules[\\/]element-plus(.*)/,
Â Â Â Â Â Â Â Â Â Â //Â æ³¨æ„ä¼˜å…ˆçº§éœ€è¦é«˜äºÂ vendorsÂ çš„åˆ†åŒ…ä¼˜å…ˆçº§
Â Â Â Â Â Â Â Â Â Â priority:Â 10,
Â Â Â Â Â Â Â Â Â Â //Â ä¸éœ€è¦é‡å¤æ‹†è·ŸÂ chunk
Â Â Â Â Â Â Â Â Â Â reuseExistingChunk:Â true
Â Â Â Â Â Â Â Â }



```

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37RU8FmdA458ycjt9foq4ZSkmfoP1Bj6OlcfzdwfjUj6LPKBRJQNzVTKQ/640?wx_fmt=other&from=appmsg)image.png

æ­¤æ—¶ element-plus å°±è¢«æ‹†åˆ†å‡ºæ¥äº†ã€‚å¦‚æœéœ€è¦æ‰‹åŠ¨æ‹†åˆ†å…¶ä»–çš„ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œä¾æ­¤ç±»æ¨ã€‚ webpack åˆ†åŒ…ç­–ç•¥çš„ test é…ç½®ç‰¹åˆ«å¼ºå¤§ï¼Œå¯ä»¥æ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œwebpack åœ¨æ„å»ºè¿‡ç¨‹ä¸­ï¼Œæ¯éå†ä¸€ä¸ªæ¨¡å—å°±ä¼šå°†è¿™ä¸ªæ¨¡å—çš„ä¿¡æ¯ä½œä¸ºå‚æ•°ä¼ å…¥åˆ°è¿™ä¸ªå‡½æ•°çš„å…¥å‚ä¸­ï¼Œæˆ‘ä»¬åˆ™å¯ä»¥åœ¨è¿™ä¸ªå‡½æ•°ä¸­ç¼–å†™åˆ¤æ–­é€»è¾‘ï¼š

```
Â Â Â Â Â Â Â Â custonChunk:Â {
Â Â Â Â Â Â Â Â Â Â test(module)Â {Â 
Â Â Â Â Â Â Â Â Â Â Â Â //Â console.log(module.size())
Â Â Â Â Â Â Â Â Â Â Â Â //Â console.log(module.nameForCondition())
Â Â Â Â Â Â Â Â Â Â Â Â //Â console.log(module.context)
Â Â Â Â Â Â Â Â Â Â Â Â //Â å¦‚æœæ¨¡å—å¤§äº30kbï¼Œå¹¶ä¸”æ¨¡å—åå­—ä¸­åŒ…å«node_modules,Â å°±ä¼šè¢«å•ç‹¬æ‰“åŒ…åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­
Â Â Â Â Â Â Â Â Â Â Â Â returnÂ module.size()Â >Â 30000Â &&Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â module.nameForCondition()Â &&Â module.nameForCondition().includes('node_modules')
Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â //Â åŠ¨æ€è®¡ç®—ç”ŸæˆÂ bundleÂ åç§°
Â Â Â Â Â Â Â Â Â Â name(module)Â {Â 
Â Â Â Â Â Â Â Â Â Â Â Â constÂ packageNameArrÂ =Â module.context.match(/[\\/]node_modules[\\/]\.pnpm[\\/](.*?)(\/|$)/)
Â Â Â Â Â Â Â Â Â Â Â Â constÂ packageNameÂ =Â packageNameArrÂ ?Â packageNameArr[1]Â :Â ''
Â Â Â Â Â Â Â Â Â Â Â Â returnÂ `chunk-lib.${packageName.replace(/@/g,"")}`;
Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â priority:Â 20,
Â Â Â Â Â Â Â Â Â Â minChunks:Â 1,
Â Â Â Â Â Â Â Â Â Â reuseExistingChunk:Â true,
Â Â Â Â Â Â Â Â }



```

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37RygFweQMUFzVEr8l2F5iaibM3icWp7c3jO5AoibicwwIPqqQLpslJeVyibaYw/640?wx_fmt=other&from=appmsg)image.png

ä½†æ˜¯ç°åœ¨åˆå‡ºç°äº†æ–°çš„é—®é¢˜ï¼Œè¿™æ ·é…ç½®ä¹‹åï¼Œå…¶ä»–æ‰€æœ‰çš„è¾ƒå°çš„ç¬¬ä¸‰æ–¹åŒ…åˆå’Œä¸šåŠ¡ä»£ç æ··åˆåˆ°ä¸€èµ·äº†ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦è¿›ä¸€æ­¥è°ƒæ•´ï¼Œæˆ‘ä»¬éœ€è¦åŠ ä¸Šè¿™ä¸ªé…ç½®ï¼šåŒ…æ‹†çš„æ¯”è¾ƒç»†è‡´ä¹‹åï¼Œå¯ä»¥å……åˆ†çš„åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜æ¥æå‡ç½‘ç»œä¼ è¾“æ•ˆç‡ï¼š

```
Â Â Â Â Â Â Â vendors:Â {
Â Â Â Â Â Â Â Â Â Â name:Â 'vendors',
Â Â Â Â Â Â Â Â Â Â test:Â /[\\/]node_modules[\\/]/,
Â Â Â Â Â Â Â Â Â Â priority:Â -10,
Â Â Â Â Â Â Â Â Â Â //Â ä¸éœ€è¦é‡å¤æ‹†è·ŸÂ chunk
Â Â Â Â Â Â Â Â Â Â reuseExistingChunk:Â true
Â Â Â Â Â Â Â Â },



```

è¿™æ ·å…¶ä»–æ‰€æœ‰è¾ƒå°çš„ç¬¬ä¸‰æ–¹åŒ…ä¹Ÿè¢«å•ç‹¬æ‹†åˆ†å‡ºæ¥ï¼Œå¯ä»¥è¿›è¡Œç¼“å­˜äº†ï¼š

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37REA19NhuF7dRQSe3yr6AkawgvQnekIAnRE13FBY6Gond0LropSN5eCA/640?wx_fmt=other&from=appmsg)image.png![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37RMXaqHW5JdMZsShqagK9L67kmJxSqqsVLtNKmz3OEVBKoYuDicWVojAA/640?wx_fmt=other&from=appmsg)image.png

è¿™æ ·ä¹‹åï¼Œå½“æˆ‘ä»¬ä¿®æ”¹äº†ä¸šåŠ¡å¸¦ä¹ˆçš„å†…å®¹é‡æ–°æ„å»ºéƒ¨ç½²åˆ°é™æ€èµ„æºæœåŠ¡å™¨ä¹‹åï¼Œé‡æ–°è®¿é—®é¡µé¢ä¹‹åï¼š

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37RrMHOCs6zYCsTjmibVPDPeKF0W8nQuHkOnso8mbFYlnw33o2Erv7VSmg/640?wx_fmt=other&from=appmsg)image.png

åªæœ‰ä¸šåŠ¡ä»£ç ä¼šè¢«è¯·æ±‚äº†ã€‚

è€Œä¸”åœ¨ http2 æ—¶ä»£ï¼Œå› ä¸º http åè®®å·²ç»æ”¯æŒäº†å¹¶è¡Œè¯·æ±‚ï¼Œæ‰€ä»¥åªè¦åŒ…çš„æ•°é‡ä¸æ˜¯å¤šåˆ°ç¦»è°±ï¼Œå…¶å®ä¸ä¼šå¯¼è‡´åŠ è½½é˜»å¡çš„é—®é¢˜çš„ã€‚

æœ€åæˆ‘ä»¬å†æ¥è¿›è¡Œä¼˜åŒ–ï¼Œå°† vendors æ¨¡å—ä¸­çš„ element-plus æ‹†åˆ†å‡ºæ¥ï¼š

```
Â Â Â Â Â Â Â Â //Â //Â å±ç”¨Â node_modulesÂ æ¨¡å—ï¼š
Â Â Â Â Â Â Â Â vendors:Â {
Â Â Â Â Â Â Â Â Â Â name:Â 'vendors',
Â Â Â Â Â Â Â Â Â Â test:Â /[\\/]node_modules[\\/]/,
Â Â Â Â Â Â Â Â Â Â priority:Â -10,
Â Â Â Â Â Â Â Â Â Â //Â ä¸éœ€è¦é‡å¤æ‹†è·ŸÂ chunk
Â Â Â Â Â Â Â Â Â Â reuseExistingChunk:Â true
Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â //Â //Â æ‹†è·ŸÂ elemntÂ æ¨¡å—ï¼š
Â Â Â Â Â Â Â Â element:Â {
Â Â Â Â Â Â Â Â Â Â name:Â 'element',
Â Â Â Â Â Â Â Â Â Â test:Â /[\\/]node_modules[\\/]element-plus(.*)/,
Â Â Â Â Â Â Â Â Â Â //Â æ³¨æ„ä¼˜å…ˆçº§éœ€è¦é«˜äºÂ vendorsÂ çš„åˆ†åŒ…ä¼˜å…ˆçº§
Â Â Â Â Â Â Â Â Â Â priority:Â 20,
Â Â Â Â Â Â Â Â Â Â //Â ä¸éœ€è¦é‡å¤æ‹†è·ŸÂ chunk
Â Â Â Â Â Â Â Â Â Â reuseExistingChunk:Â true
Â Â Â Â Â Â Â Â },



```

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37RNH05XmbO0dI1nnZwg6jcKCjGhvGXfic8fsib7ia2pf7Qm43h2Y1K8udOw/640?wx_fmt=other&from=appmsg)image.png

ç»§ç»­è§‚æµ‹åˆ†æè‡ªåŠ¨åˆ†åŒ…çš„ç»“æœï¼š
--------------

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37RrzvIAQ5eR81DCBNNVYnkVz4Vj1V5CcsQzXsV5icRU4zcFycKHebzMkg/640?wx_fmt=other&from=appmsg)image.png

æˆ‘ä»¬å¯ä»¥çœ‹è‡ªåŠ¨æ‹†åŒ…æ‹†åˆ†é™¤äº†ä¸€ä¸ªè¡¨è¾¾çš„ element-plus çš„å›¾æ ‡æ¨¡å—ï¼Œä½†æ˜¯æˆ‘ä»¬è‡ªå·±çš„é¡¹ç›®ä¸­ä¼¼ä¹å¹¶æ²¡æœ‰ä½¿ç”¨è¯¥æ¨¡å—ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆå®ƒçš„æ‰“åŒ…ç»“æœä¸­ä¼šåŒ…å«å®ƒçš„å†…å®¹å‘¢ï¼Ÿè€Œä¸”è¿˜è¢«å•ç‹¬æ‹†åˆ†æˆäº†ä¸€ä¸ª chunk å‘¢ï¼Ÿå®é™…ä¸Šå¾ˆç®€å•ï¼Œå› ä¸º element-plus ä¸­çš„å¾ˆå¤šç»„ä»¶éƒ½ä½¿ç”¨äº†è¯¥æ¨¡å—ï¼Œæ¯”å¦‚ ElButton:

![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37RtetjGt3lV7y3fASKh5rAQSxWGlLrZawCzQdEaX2YgCUkcPalEOuYtA/640?wx_fmt=other&from=appmsg)image.png![](https://mmbiz.qpic.cn/sz_mmbiz_jpg/Ptef09iaEWxxMlAUMVERYQZDYquxkv37REYLDVlf9rtgvsf6B9cZ2mGkxicbJwgea52RPylXPBJz9cPAQNvwqB7w/640?wx_fmt=other&from=appmsg)image.png

å‘ day.js è¿™äº›ç¬¬ä¸€æ¬¡æ‰“åŒ…çš„æ—¶å€™å­˜åœ¨çš„ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œä¸ºä»€ä¹ˆç°åœ¨æ‰“åŒ…ç»“æœä¸­ä¸å­˜äº†å‘¢ï¼Ÿå…¶å®å¾ˆç®€å•ï¼Œå› ä¸º day.js è¿™ä¸ªç¬¬ä¸‰æ–¹æ¨¡å—æ˜¯ element-plus ç»„ä»¶ä¸­çš„æ—¶é—´æ—¥å†ç»„ä»¶å¯¼å…¥ä½¿ç”¨çš„æ¨¡å—ï¼Œä½†æ˜¯å› ä¸ºæˆ‘ä»¬ç›®å‰æ˜¯æŒ‰éœ€åŠ è½½çš„ element ç»„ä»¶åº“ï¼Œè€Œæˆ‘ä»¬ç›®å‰é¡¹ç›®ä¸­æ²¡æœ‰ä¾èµ–æ—¶é—´æ—¥å†ç»„ä»¶ï¼Œæ‰€ä»¥è‡ªç„¶è¿™äº›æ¨¡å—éƒ½è¢«ä¾æ¬¡ tree sheaking æ‰äº†ã€‚

å‚è€ƒèµ„æ–™

[1]

https://www.webpackjs.com/configuration/optimization/#optimizationsplitchunks: https://www.webpackjs.com/configuration/optimization/#optimizationsplitchunks

[2]

https://www.webpackjs.com/plugins/split-chunks-plugin/: https://www.webpackjs.com/plugins/split-chunks-plugin/

Node ç¤¾ç¾¤

```
æˆ‘ç»„å»ºäº†ä¸€ä¸ªæ°›å›´ç‰¹åˆ«å¥½çš„ Node.js ç¤¾ç¾¤ï¼Œé‡Œé¢æœ‰å¾ˆå¤š Node.jså°ä¼™ä¼´ï¼Œå¦‚æœä½ å¯¹Node.jså­¦ä¹ æ„Ÿå…´è¶£çš„è¯ï¼ˆåç»­æœ‰è®¡åˆ’ä¹Ÿå¯ä»¥ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€èµ·è¿›è¡ŒNode.jsç›¸å…³çš„äº¤æµã€å­¦ä¹ ã€å…±å»ºã€‚ä¸‹æ–¹åŠ  è€ƒæ‹‰ å¥½å‹å›å¤ã€ŒNodeã€å³å¯ã€‚

Â Â Â â€œåˆ†äº«ã€ç‚¹èµã€åœ¨çœ‹â€ æ”¯æŒä¸€æ³¢ğŸ‘

```