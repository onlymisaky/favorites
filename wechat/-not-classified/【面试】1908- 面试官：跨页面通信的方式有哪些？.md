> æœ¬æ–‡ç”± [ç®€æ‚¦ SimpRead](http://ksria.com/simpread/) è½¬ç ï¼Œ åŸæ–‡åœ°å€ [mp.weixin.qq.com](https://mp.weixin.qq.com/s/NlNtJyDzEMW_S662S5vhVg)

> é¢è¯•å®˜ï¼šè·¨é¡µé¢é€šä¿¡çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ
> 
> æˆ‘ï¼š1. Web Workerï¼›2. æœ¬åœ°å­˜å‚¨ï¼›3.postMessage ç­‰
> 
> é¢è¯•å®˜ï¼šæœ¬åœ°å­˜å‚¨éƒ½æœ‰å“ªäº›ï¼Ÿ
> 
> æˆ‘ï¼šlocalStorageï¼ŒsessionStorageï¼Œcookieã€‚
> 
> é¢è¯•å®˜ï¼šsessionStorage å¯ä»¥å—ï¼Ÿ
> 
> æˆ‘ï¼šä¸å¯ç”¨å§ï¼Ÿ
> 
> é¢è¯•å®˜ï¼šlocalStorage æ–°å¼€é¡µé¢å’Œå½“å‰é¡µé¢ open æ–°é¡µé¢éƒ½å¯ä»¥å—ï¼Ÿ
> 
> æˆ‘ï¼šéƒ½å¯ä»¥å§?
> 
> ....

æœ‰æ²¡æœ‰ç»å†è¿‡é¢è¯•ç”¨è·¨é¡µé¢é€šä¿¡çš„é—®é¢˜ä¸æ–­æ·±å…¥çš„æ‘§æ®‹ä½ ï¼Œä½†æ˜¯ä½ åˆä¸èƒ½ç»™å‡ºæ˜ç¡®å›ç­”çš„ç»å†ã€‚å·§äº†åœ¨ä¸‹å°±ç»å†è¿‡è¿™ä¸ªè¿‡ç¨‹ã€‚ä¸ºäº†ç—›å®šæ€ç—›å†³å®šä»å¤´å¼€å§‹å°†è¿™äº›ä¸œè¥¿æ‰ç¢äº†åƒåˆ°å˜´é‡Œï¼Œç„¶åé¢è¯•çš„æ—¶å€™åš¼ç¢äº†å–‚ç»™é¢è¯•å®˜ğŸ˜ˆã€‚

å¥½äº†å¿ƒç¢çš„äº‹æƒ…è¯´å®Œäº†ä¸‹é¢ç›´æ¥ä¸Šæ‰è‰ºã€‚

åŒæºé¡µé¢é—´é€šä¿¡
-------

ä»€ä¹ˆæ˜¯åŒæºè¿™ä¸ªä¸è¿‡å¤šè§£é‡Šäº†ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±äº†è§£ä¸€ä¸‹`[æµè§ˆå™¨åŒæºç­–ç•¥]`(developer.mozilla.org/zh-CN/docs/â€¦[1])

### 1. localStorage

å¯ä»¥é€šè¿‡Â `localStroage.setItem()`Â åœ¨ä¸€ä¸ªé¡µé¢å»å†™å…¥ä¸€ä¸ªå€¼ï¼Œç„¶ååœ¨å¦ä¸€ä¸ªé¡µé¢ä¸­å»è·å–ã€‚æˆ‘ä»¬åœ¨ A é¡µé¢ä¸­æ·»åŠ ä¸€ä¸ªæŒ‰é’®ï¼Œç”¨æ¥è®¾ç½®Â `localStroage`ï¼Œç„¶ååœ¨ B é¡µé¢æ·»åŠ ä¸€ä¸ªå®šæ—¶å™¨è·å– A é¡µé¢è®¾ç½®çš„Â `localStroage`ï¼Œåˆ†åˆ«ç”¨ç›´æ¥é“¾æ¥è®¿é—®å’Œ A é¡µé¢è·³è½¬çš„æ–¹å¼æ‰“å¼€ B é¡µé¢çœ‹æ˜¯å¦èƒ½è·å–åˆ° A é¡µé¢è®¾ç½®çš„Â `localStroage`Â çš„å€¼ã€‚

![](https://mmbiz.qpic.cn/mmbiz_jpg/TZL4BdZpLdgBiamxqKXKGcLfa5p4sn9DqxazzB44gcZOichVjsSbjQichV1gqXEUMKrNgD0RYypFhhDZRYyFl5dtg/640?wx_fmt=jpeg)A é¡µé¢è®¾ç½®Â `localStroage`å€¼

#### ç›´æ¥é€šè¿‡ A é¡µé¢è°ƒæ•´ B é¡µé¢çš„ç»“æœ

![](https://mmbiz.qpic.cn/mmbiz_jpg/TZL4BdZpLdgBiamxqKXKGcLfa5p4sn9DqZ7Lu0iafO8YXJicFmKAmPDMvSicrKJ6D80tkva5L92nIHUd7xjxBDjMOw/640?wx_fmt=jpeg)image.png![](https://mmbiz.qpic.cn/mmbiz_jpg/TZL4BdZpLdgBiamxqKXKGcLfa5p4sn9DqiaDXGuzZbTRWPian0FqorHjdtyIBrC2HE0G3l9FFnSodlialwiaKUmtgRg/640?wx_fmt=jpeg)image.png

å¯ä»¥çœ‹åˆ°æ˜¯å¯ä»¥è®¿é—®åˆ°çš„ã€‚

#### é€šè¿‡é“¾æ¥ç›´æ¥è®¿é—® B é¡µé¢ç»“æœ

![](https://mmbiz.qpic.cn/mmbiz_jpg/TZL4BdZpLdgBiamxqKXKGcLfa5p4sn9Dq1SIkk7iaD6G1mj3dAH8ykdsuNqjvKw4g2AqkoEE6xRL65vcKGIxqWTQ/640?wx_fmt=jpeg)image.png

ç»“æœåŒä¸Šæ˜¯å¯ä»¥è®¿é—®åˆ°çš„ã€‚

### 2. sessionStroage

æ“ä½œæ–¹å¼åŒä¸Šé¢Â `localStroage`ï¼Œä¸‹é¢çœ‹ä¸€ä¸‹ç»“æœ

é¦–å…ˆçœ‹ A é¡µé¢è®¾ç½®ç»“æœï¼š

![](https://mmbiz.qpic.cn/mmbiz_jpg/TZL4BdZpLdgBiamxqKXKGcLfa5p4sn9DqCT4GaahkiaQr5LBdOmia2lnuca5GA08VBhPtoMv1mZCh6AcHaJU9GcXA/640?wx_fmt=jpeg)image.png

ç„¶åé€šè¿‡ A é¡µé¢è·³è½¬å’Œç›´æ¥è®¿é—® B é¡µé¢éƒ½å¾—åˆ°ç»“æœæ˜¯è·å–ä¸åˆ° A é¡µé¢è®¾ç½®çš„ sessionStroageï¼š**sessionStroage ä¸æ”¯æŒè·¨é¡µé¢é€šä¿¡ã€‚**

![](https://mmbiz.qpic.cn/mmbiz_jpg/TZL4BdZpLdgBiamxqKXKGcLfa5p4sn9DqiavRpCVPNxOWdtv3iahuvTmibZwOAZzKB0p3thK0ibIORLV0Z2SV0BbA0g/640?wx_fmt=jpeg)image.png![](https://mmbiz.qpic.cn/mmbiz_jpg/TZL4BdZpLdgBiamxqKXKGcLfa5p4sn9Dqo2VBsfBiaXT4ZofRABnmesicOnJEzwqAQny1BPOPgYgUH14L9ldHcu7g/640?wx_fmt=jpeg)image.png

### 3.cookie

æ“ä½œæ–¹å¼åŒä¸Šï¼Œåœ¨ A é¡µé¢è®¾ç½®äº†Â `testCookie=123`Â ä½†æ˜¯å¹¶ä¸ä¼šåœ¨ cookie ä¸­é©¬ä¸Šæ˜¾ç¤ºè¦åˆ·æ–°æ‰èƒ½æ˜¾ç¤º

![](https://mmbiz.qpic.cn/mmbiz_jpg/TZL4BdZpLdgBiamxqKXKGcLfa5p4sn9DqoEaF4iatcNHnY97fWnBcH3aOyXx6sdAIdbu6vBq0Sx93rX219RWJd4A/640?wx_fmt=jpeg)image.png

#### é€šè¿‡ä¸¤ç§æ–¹å¼æ‰“å¼€ B é¡µé¢çš„ç»“æœ

é€šè¿‡ä¸¤ç§æ–¹å¼æ‰“å¼€çš„ B é¡µé¢éƒ½å¯ä»¥è·å–åˆ°åœ¨ A é¡µé¢çš„ cookieï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ Cookie è¿›è¡Œè·¨é¡µé¢é€šä¿¡ã€‚

![](https://mmbiz.qpic.cn/mmbiz_jpg/TZL4BdZpLdgBiamxqKXKGcLfa5p4sn9DqWhYQ5AC9Eo27EWykH5YwK3ibMKIU6sM5z6UKhTn5WIUe9IsQsdgaUxQ/640?wx_fmt=jpeg)image.png![](https://mmbiz.qpic.cn/mmbiz_jpg/TZL4BdZpLdgBiamxqKXKGcLfa5p4sn9DqHkUx9SQ7AlL1yqL1vhQxAyEB97BdRnNsswGQV8tdNu5GdGHKTJFZUA/640?wx_fmt=jpeg)image.png

### 4. indexedDB å’Œ Web sql

å¦‚æœé¡µé¢æœ‰å¤§é‡çš„æ•°æ®éœ€è¦äº¤äº’ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦åšä¸€äº›æŒä¹…åŒ–çš„æ“ä½œï¼Œå‰ç«¯çš„ sql æ“ä½œæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„é€‰æ‹©ï¼Œå¯ä»¥é€šè¿‡ indexedDB åˆ›å»ºä¸€ä¸ªå…³ç³»å‹æ•°æ®åº“æ¥åšæ•°æ®å­˜å‚¨ï¼Œé€šè¿‡ sql æ“ä½œå®ç°é¡µé¢é—´çš„é€šä¿¡ï¼Œæ›´å¤šçš„å†…å®¹å¯ä»¥äº†è§£ä¸€ä¸‹ IndexedDB[2] çš„ä½¿ç”¨ã€‚

### 5.Broadcast Channel API

Broadcast Channel API æ˜¯ HTML5 æä¾›çš„ä¸€ç§è·¨é¡µé¢é€šä¿¡æœºåˆ¶ã€‚å®ƒå…è®¸ä¸åŒé¡µé¢ä¹‹é—´é€šè¿‡å…±äº«ä¸€ä¸ªé¢‘é“æ¥è¿›è¡Œé€šä¿¡ã€‚ä¸€ä¸ªé¡µé¢å¯ä»¥å‘é¢‘é“å‘é€æ¶ˆæ¯ï¼Œå…¶ä»–é¡µé¢å¯ä»¥ç›‘å¬è¯¥é¢‘é“ä»¥æ¥æ”¶æ¶ˆæ¯ã€‚

é€šè¿‡åˆ›å»ºä¸€ä¸ªç›‘å¬æŸä¸ªé¢‘é“ä¸‹çš„Â `BroadcastChannel`[3]Â å¯¹è±¡ï¼Œä½ å¯ä»¥æ¥æ”¶å‘é€ç»™è¯¥é¢‘é“çš„æ‰€æœ‰æ¶ˆæ¯ã€‚ä¸€ä¸ªæœ‰æ„æ€çš„ç‚¹æ˜¯ï¼Œä½ ä¸éœ€è¦å†ç»´æŠ¤éœ€è¦é€šä¿¡çš„ iframe æˆ– worker çš„ç´¢å¼•ã€‚å®ƒä»¬å¯ä»¥é€šè¿‡æ„é€ Â `BroadcastChannel`[4]Â æ¥ç®€å•åœ° â€œè®¢é˜…â€ ç‰¹å®šé¢‘é“ï¼Œå¹¶åœ¨å®ƒä»¬ä¹‹é—´è¿›è¡Œå…¨åŒå·¥ï¼ˆåŒå‘ï¼‰é€šä¿¡ã€‚

![](https://mmbiz.qpic.cn/mmbiz_jpg/TZL4BdZpLdgBiamxqKXKGcLfa5p4sn9Dq7a5iaStibfb01SzZn364YOrsTANibaIE4pX0jgicxLHLlbzHzOKW2J6mFw/640?wx_fmt=jpeg)image.png

1.  é¦–å…ˆåˆ›å»ºä¸€ä¸ªÂ `BroadcastChannel`Â å¯¹è±¡ï¼š
    

```
varÂ bcÂ =Â newÂ BroadcastChannel("test_tab");
```

2.  å‘é€æ¶ˆæ¯ï¼š
    

```
bc.postMessage("ThisÂ isÂ aÂ testÂ message.");
```

3.  æ¥æ”¶æ¶ˆæ¯ï¼š
    

```
bc.onmessageÂ =Â functionÂ (ev)Â {Â Â console.log(ev);};
```

4.  ä¸é¢‘é“æ–­å¼€è¿æ¥ï¼š
    

```
bc.close();
```

é€šè¿‡ä¸Šé¢æ–¹æ³•ï¼ŒA é¡µé¢å‘é€ä¿¡æ¯ï¼Œåœ¨ B é¡µé¢å°±å¯ä»¥æ¥æ”¶åˆ° A é¡µé¢å‘é€çš„æ¶ˆæ¯ã€‚

A é¡µé¢ä»£ç ï¼š

```
exportÂ defaultÂ functionÂ Success()Â {Â Â constÂ setLocalÂ =Â ()Â =>Â {Â Â Â Â constÂ bcÂ =Â newÂ BroadcastChannel('test_tab')Â Â Â Â bc.postMessage('thisÂ isÂ aÂ testÂ message')Â Â }Â Â returnÂ (Â Â Â Â <ButtonÂ onClick={setLocal}>è®¾ç½®æ¶ˆæ¯</Button>Â Â );}
```

B é¡µé¢ä»£ç ï¼š

```
constÂ bcÂ =Â newÂ BroadcastChannel('test_tab')bc.onmessageÂ =Â (ev)Â =>Â {Â Â console.log('message',Â ev)}
```

ç»“æœå¦‚ä¸‹ï¼š

![](https://mmbiz.qpic.cn/mmbiz_jpg/TZL4BdZpLdgBiamxqKXKGcLfa5p4sn9DqlYkpQiaONWKfPGOyJtVUbjXbYOvibvmaOnVMd6BF1uiaBaoAXePyd1xZg/640?wx_fmt=jpeg)image.png

**è™½ç„¶ Broadcast Channel API æ–¹ä¾¿å¥½ç”¨ï¼Œä½†æ˜¯åœ¨å…¼å®¹æ€§ä¸Šä¸æ˜¯ç‰¹åˆ«å¥½ã€‚**

![](https://mmbiz.qpic.cn/mmbiz_jpg/TZL4BdZpLdgBiamxqKXKGcLfa5p4sn9Dq4uNRboBMhagzdGgbxTLfb62zxkVTOATHoYkgsOcrZs0eeLH0bCluIA/640?wx_fmt=jpeg)image.png

### 6. PostMessage API

PostMessage API å…è®¸åœ¨ä¸åŒæµè§ˆä¸Šä¸‹æ–‡ï¼ˆå¦‚ä¸åŒçª—å£ã€iframe æˆ–è·¨åŸŸé¡µé¢ï¼‰ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚é¡µé¢å¯ä»¥ä½¿ç”¨ postMessage æ–¹æ³•å‘é€æ¶ˆæ¯ï¼Œæ¥æ”¶æ–¹é¡µé¢å¯ä»¥é€šè¿‡ç›‘å¬ message äº‹ä»¶æ¥æ¥æ”¶å’Œå¤„ç†æ¶ˆæ¯ã€‚

```
//Â Aé¡µé¢constÂ targetWindowÂ =Â window.open("ç›®æ ‡é¡µé¢çš„URL");//Â å‘é€æ¶ˆæ¯constÂ messageÂ =Â "Hello,Â targetÂ page!";constÂ targetOriginÂ =Â "ç›®æ ‡é¡µé¢çš„URL";targetWindow.postMessage(message,Â targetOrigin);
```

```
//Â ç›®æ ‡é¡µé¢window.addEventListener("message",Â function(event)Â {Â Â //Â ç¡®è®¤æ¶ˆæ¯æ¥æºÂ Â constÂ allowedOriginÂ =Â "æºé¡µé¢çš„URL";Â Â ifÂ (event.originÂ !==Â allowedOrigin)Â return;Â Â //Â å¤„ç†æ¥æ”¶åˆ°çš„æ¶ˆæ¯Â Â constÂ messageÂ =Â event.data;Â Â console.log("æ¥æ”¶åˆ°çš„æ¶ˆæ¯ï¼š",Â message);});
```

åœ¨ A é¡µé¢ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ postMessage æ–¹æ³•å‘ç›®æ ‡é¡µé¢å‘é€æ¶ˆæ¯ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬é€šè¿‡ window.open æ–¹æ³•æ‰“å¼€ç›®æ ‡é¡µé¢çš„ URLï¼Œç„¶åä½¿ç”¨ postMessage æ–¹æ³•å‘é€æ¶ˆæ¯ã€‚åœ¨å‘é€æ¶ˆæ¯æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼šè¦å‘é€çš„æ¶ˆæ¯å†…å®¹å’Œç›®æ ‡é¡µé¢çš„ URLã€‚

åœ¨ç›®æ ‡é¡µé¢ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ window.addEventListener æ–¹æ³•ç›‘å¬ message äº‹ä»¶ã€‚å½“æ¶ˆæ¯è¢«å‘é€æ—¶ï¼Œé¡µé¢ä¼šè§¦å‘ message äº‹ä»¶å¹¶ä¼ é€’ä¸€ä¸ª event å¯¹è±¡ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ event.data å±æ€§è·å–æ¥æ”¶åˆ°çš„æ¶ˆæ¯å†…å®¹ã€‚åœ¨å¤„ç†æ¶ˆæ¯ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥éªŒè¯æ¶ˆæ¯çš„æ¥æºï¼Œä»¥ç¡®ä¿é€šä¿¡çš„å®‰å…¨æ€§ã€‚

é€šè¿‡ä½¿ç”¨ PostMessage APIï¼Œæºé¡µé¢å’Œç›®æ ‡é¡µé¢å¯ä»¥åœ¨è·¨åŸŸæˆ–ä¸åŒçª—å£ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚è¿™ç§æ–¹å¼å¯ç”¨äºå®ç°å¤šç§è·¨é¡µé¢äº¤äº’ï¼Œå¦‚ä¼ é€’æ•°æ®ã€åŒæ­¥çŠ¶æ€ç­‰ã€‚è¯·æ³¨æ„ï¼Œä¸ºäº†ç¡®ä¿å®‰å…¨æ€§ï¼Œåº”è¯¥éªŒè¯æ¶ˆæ¯çš„æ¥æºå’Œç›®æ ‡ï¼Œä»¥é˜²æ­¢æ¶æ„ä»£ç çš„æ³¨å…¥ã€‚

### 7. Service Worker

Service Worker æ˜¯è¿è¡Œåœ¨æµè§ˆå™¨åå°çš„è„šæœ¬ï¼Œå¯ä»¥æ‹¦æˆªå’Œå¤„ç†ç½‘ç»œè¯·æ±‚ã€‚è™½ç„¶ Service Worker ä¸»è¦ç”¨äºç¦»çº¿ç¼“å­˜å’Œæ¨é€é€šçŸ¥ç­‰åŠŸèƒ½ï¼Œä½†ä¹Ÿå¯ä»¥ç”¨äºå®ç°è·¨é¡µé¢é€šä¿¡ã€‚

åœ¨æ³¨å†Œ Service Worker æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç›‘å¬ message äº‹ä»¶æ¥æ¥æ”¶å’Œå¤„ç†æ¶ˆæ¯ï¼š

```
//Â æ³¨å†ŒÂ ServiceÂ Workernavigator.serviceWorker.register('service-worker.js');//Â ç›‘å¬Â messageÂ äº‹ä»¶navigator.serviceWorker.addEventListener('message',Â function(event)Â {Â Â //Â å¤„ç†æ¥æ”¶åˆ°çš„æ¶ˆæ¯Â Â constÂ messageÂ =Â event.data;Â Â console.log('æ¥æ”¶åˆ°çš„æ¶ˆæ¯ï¼š',Â message);});
```

åœ¨æºé¡µé¢ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ postMessage æ–¹æ³•å‘ Service Worker å‘é€æ¶ˆæ¯ï¼š

```
//Â Aé¡µé¢navigator.serviceWorker.controller.postMessage('Hello,Â ServiceÂ Worker!');
```

åœ¨ Service Worker è„šæœ¬ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›‘å¬ message äº‹ä»¶æ¥æ¥æ”¶å’Œå¤„ç†æ¶ˆæ¯ï¼Œå¹¶å‘æ‰€æœ‰å®¢æˆ·ç«¯é¡µé¢å‘é€æ¶ˆæ¯ï¼š

```
//Â Bé¡µé¢//Â ç›‘å¬Â messageÂ äº‹ä»¶self.addEventListener('message',Â function(event)Â {Â Â //Â å¤„ç†æ¥æ”¶åˆ°çš„æ¶ˆæ¯Â Â constÂ messageÂ =Â event.data;Â Â console.log('æ¥æ”¶åˆ°çš„æ¶ˆæ¯ï¼š',Â message);Â Â //Â å‘æ‰€æœ‰å®¢æˆ·ç«¯é¡µé¢å‘é€æ¶ˆæ¯Â Â self.clients.matchAll().then(function(clients)Â {Â Â Â Â clients.forEach(function(client)Â {Â Â Â Â Â Â client.postMessage('Hello,Â clientÂ page!');Â Â Â Â });Â Â });});
```

åœ¨ A é¡µé¢ä¸­ï¼Œä½¿ç”¨Â `navigator.serviceWorker.controller.postMessage`Â æ–¹æ³•å‘ Service Worker å‘é€æ¶ˆæ¯ã€‚åœ¨ B é¡µé¢ä¸­ï¼Œå¯ä»¥é€šè¿‡ç›‘å¬ message äº‹ä»¶æ¥æ¥æ”¶å’Œå¤„ç†æ¶ˆæ¯ï¼Œå¹¶ä½¿ç”¨ self.clients.matchAll æ–¹æ³•è·å–æ‰€æœ‰çš„å®¢æˆ·ç«¯é¡µé¢ï¼Œå¹¶å‘æ¯ä¸ªé¡µé¢å‘é€æ¶ˆæ¯ã€‚

ä½¿ç”¨ Service Worker è¿›è¡Œè·¨é¡µé¢é€šä¿¡çš„å¥½å¤„æ˜¯ï¼ŒService Worker å¯ä»¥åœ¨åå°è¿è¡Œå¹¶ç‹¬ç«‹äºé¡µé¢ï¼Œè¿™æ„å‘³ç€å³ä½¿æ²¡æœ‰é¡µé¢æ‰“å¼€ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œè·¨é¡µé¢é€šä¿¡ã€‚è¿™å¯¹äºå®ç°ç¦»çº¿é€šçŸ¥ã€æ¶ˆæ¯åŒæ­¥ç­‰åŠŸèƒ½éå¸¸æœ‰ç”¨ã€‚

è¯·æ³¨æ„ï¼ŒService Worker åªèƒ½ä¸åŒæºé¡µé¢é€šä¿¡ï¼Œå› æ­¤æºé¡µé¢å’Œ Service Worker è„šæœ¬å¿…é¡»åœ¨åŒä¸€åŸŸä¸‹ã€‚å¹¶ä¸”ç”±äº Service Worker ç”Ÿå‘½å‘¨æœŸçš„ç‰¹æ€§ï¼Œé¦–æ¬¡æ³¨å†ŒæˆåŠŸåï¼Œæ‰èƒ½åœ¨åç»­é¡µé¢åŠ è½½ä¸­æ¥æ”¶åˆ°æ¶ˆæ¯ã€‚

### 8. web Worker

Web Worker æ˜¯ä¸€ç§è¿è¡Œåœ¨åå°çš„ JavaScript çº¿ç¨‹ï¼Œå¯ä»¥ç”¨äºæ‰§è¡Œé•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡è€Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚Web Worker æœ¬èº«ä¸èƒ½ç›´æ¥è¿›è¡Œè·¨é¡µé¢é€šä¿¡ï¼Œä½†å¯ä»¥é€šè¿‡ MessageChannel API è¿›è¡Œè·¨é¡µé¢é€šä¿¡

```
//Â Aé¡µé¢constÂ sharedWorkerÂ =Â newÂ SharedWorker('shared-worker.js');sharedWorker.port.onmessageÂ =Â function(event)Â {Â Â //Â å¤„ç†æ¥æ”¶åˆ°çš„æ¶ˆæ¯Â Â constÂ messageÂ =Â event.data;Â Â console.log('æ¥æ”¶åˆ°çš„æ¶ˆæ¯ï¼š',Â message);};//Â å‘é€æ¶ˆæ¯ç»™Â SharedÂ WorkersharedWorker.port.postMessage('Hello,Â SharedÂ Worker!');
```

```
//Â Bé¡µé¢constÂ sharedWorkerÂ =Â newÂ SharedWorker('shared-worker.js');sharedWorker.port.onmessageÂ =Â function(event)Â {Â Â //Â å¤„ç†æ¥æ”¶åˆ°çš„æ¶ˆæ¯Â Â constÂ messageÂ =Â event.data;Â Â console.log('æ¥æ”¶åˆ°çš„æ¶ˆæ¯ï¼š',Â message);};
```

```
//Â shared-worker.js//Â ç›‘å¬Â connectÂ äº‹ä»¶self.onconnectÂ =Â function(event)Â {Â Â //Â è·å–é€šä¿¡ç«¯å£Â Â constÂ portÂ =Â event.ports[0];Â Â Â Â //Â ç›‘å¬æ¶ˆæ¯Â Â port.onmessageÂ =Â function(event)Â {Â Â Â Â //Â å¤„ç†æ¥æ”¶åˆ°çš„æ¶ˆæ¯Â Â Â Â constÂ messageÂ =Â event.data;Â Â Â Â console.log('æ¥æ”¶åˆ°çš„æ¶ˆæ¯ï¼š',Â message);Â Â Â Â Â Â Â Â //Â å‘æ‰€æœ‰è¿æ¥çš„æºé¡µé¢å‘é€æ¶ˆæ¯Â Â Â Â port.postMessage('Hello,Â sourceÂ pages!');Â Â };};
```

### 9. WebSocket

WebSocket æ˜¯ä¸€ç§åœ¨ Web åº”ç”¨ç¨‹åºä¸­å®ç°åŒå‘é€šä¿¡çš„åè®®ã€‚å®ƒå…è®¸åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹æŒä¹…çš„è¿æ¥ï¼Œä»¥ä¾¿å®æ—¶åœ°å‘é€æ•°æ®ã€‚

å¯ä»¥é€šè¿‡ WebSocket å»ºç«‹ä¸€ä¸ªé•¿è¿æ¥é€šè¿‡åç«¯æœåŠ¡å™¨çš„ä¸­è½¬è¿›è¡Œé¡µé¢é—´çš„é€šä¿¡ã€‚

éåŒæº
---

1.  é€šè¿‡é“¾æ¥è·³è½¬çš„æ–¹å¼ï¼Œå°†éœ€è¦ç”¨åˆ°çš„å‚æ•°è¿›è¡Œä¼ é€’ã€‚
    
2.  é€šè¿‡å†…åµŒä¸€ä¸ªåŒæºçš„ iframe é¡µé¢ï¼Œå…ˆå°†å‚æ•°ä¼ ç»™ iframe é¡µé¢ï¼Œç„¶åè®© iframe é¡µé¢è¿›è¡Œä¸Šé¢çš„åŒæºæ“ä½œè¿›è¡Œäº¤äº’ã€‚
    

å°ç»“
--

é€šè¿‡ä¸Šé¢çš„æ–¹æ³•å¯ä»¥è¿›è¡Œè·¨é¡µé¢é€šä¿¡ï¼Œæˆ‘å·²ç»æ‰ç¢äº†åƒåˆ°å˜´é‡Œäº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯åš¼ç¢äº†åç»™é¢è¯•å®˜ï¼Œæ–¹ä¾¿é¢è¯•å®˜å¿«é€Ÿæ¶ˆåŒ–ğŸ˜ˆã€‚

> ä½œè€…ï¼šæ‰˜å„¿æ‰€å¤œåä¸‰  
> é“¾æ¥ï¼šhttps://juejin.cn/post/7298644594857410614  
> æ¥æºï¼šç¨€åœŸæ˜é‡‘

  

å¾€æœŸå›é¡¾

  

#

[å¦‚ä½•ä½¿ç”¨ TypeScript å¼€å‘ React å‡½æ•°å¼ç»„ä»¶ï¼Ÿ](http://mp.weixin.qq.com/s?__biz=MjM5MDc4MzgxNA==&mid=2458468369&idx=1&sn=710836a0f836c1591b4953ecf09bb9bb&chksm=b1c2603886b5e92ec64f82419d9fd8142060ee99fd48b8c3a8905ee6840f31e33d423c34c60b&scene=21#wechat_redirect)

#

[11 ä¸ªéœ€è¦é¿å…çš„ React é”™è¯¯ç”¨æ³•](http://mp.weixin.qq.com/s?__biz=MjM5MDc4MzgxNA==&mid=2458468180&idx=1&sn=63da1eb9e4d8ba00510bf344eb408e49&chksm=b1c21f7d86b5966b160bf65b193b62c46bc47bf0b3965ff909a34d19d3dc9f16c86598792501&scene=21#wechat_redirect)

#

[6 ä¸ª Vue3 å¼€å‘å¿…å¤‡çš„ VSCode æ’ä»¶](http://mp.weixin.qq.com/s?__biz=MjM5MDc4MzgxNA==&mid=2458467984&idx=1&sn=f9f71530f15124fe44cd22eff3170981&chksm=b1c21eb986b597af806837a37b87b1e8bc06b26b16af578deddd8bb503a768f78f5a7acdb909&scene=21#wechat_redirect)

#

[3 æ¬¾éå¸¸å®ç”¨çš„ Node.js ç‰ˆæœ¬ç®¡ç†å·¥å…·](http://mp.weixin.qq.com/s?__biz=MjM5MDc4MzgxNA==&mid=2458467880&idx=1&sn=ca7e12574d88a6b36ccfd47d9ddc7a4f&chksm=b1c21e0186b5971758792950721938b4a4efbc3024b0b01965c25a4ea73ec838767783ade6ea&scene=21#wechat_redirect)

#

[6 ä¸ªä½ å¿…é¡»æ˜ç™½ Vue3 çš„ ref å’Œ reactive é—®é¢˜](http://mp.weixin.qq.com/s?__biz=MjM5MDc4MzgxNA==&mid=2458467756&idx=1&sn=902e85685a50ba7cdc75e410e10b9718&chksm=b1c21d8586b5949326c8836132b20dc4294af449473b6db4592cbfd00788345534a07d77fa6d&scene=21#wechat_redirect)

#

[6 ä¸ªæ„æƒ³ä¸åˆ°çš„ JavaScript é—®é¢˜](http://mp.weixin.qq.com/s?__biz=MjM5MDc4MzgxNA==&mid=2458467612&idx=1&sn=44ea5238a6500f44a47ea316c634bcf6&chksm=b1c21d3586b594237333a306f00353fba450514076e54ac32df7485ae358d0cefb25a6c1f329&scene=21#wechat_redirect)

#

[è¯•ç€æ¢ä¸ªè§’åº¦ç†è§£ä½ä»£ç å¹³å°è®¾è®¡çš„æœ¬è´¨](http://mp.weixin.qq.com/s?__biz=MjM5MDc4MzgxNA==&mid=2458467471&idx=2&sn=7990678e19544372ff43b5a84f491337&chksm=b1c21ca686b595b07b097c764f9304887282d737b4dd0a2634c47b25c8f223c785a6c8714382&scene=21#wechat_redirect)

![](https://mmbiz.qpic.cn/mmbiz_gif/dy9CXeZLlCXukR16d8fyyeJ4icloLCW0cvbCvibfaBxbY22lN51mYaLeKictjOeobKmxCVfb3AwIZ3t6eKicIicTtow/640?wx_fmt=gif)

å›å¤ â€œ**åŠ ç¾¤**â€ï¼Œä¸€èµ·å­¦ä¹ è¿›æ­¥