> æœ¬æ–‡ç”± [ç®€æ‚¦ SimpRead](http://ksria.com/simpread/) è½¬ç ï¼Œ åŸæ–‡åœ°å€ [mp.weixin.qq.com](https://mp.weixin.qq.com/s/yPa1xRzQvunvQQ0DP7OX_g)

![](https://mmbiz.qpic.cn/mmbiz_jpg/dy9CXeZLlCW29JK0IrX0rQGVvOCy2ZrwibcSia1ypNG7XF7dgd1huEfGUuQj3yKEOomicib3fd5IT8LUKic0dyBohrQ/640?wx_fmt=jpeg)

ä»£ç ç»ä¸æ­¢èƒ½è·‘å°±è¡Œï¼Œä½†æ˜¯åºŸè¯åªè¯´ä¸€å¥ï¼šç å­—ä¸æ˜“æ±‚ä¸ªğŸ‘ï¼ŒğŸ™‡â€ğŸ™‡â€ğŸ™‡â€ã€‚

> æ¼”ç¤ºä»£ç ä½¿ç”¨ `Vue3` + `ts` +`Vite`ç¼–å†™ï¼Œä½†æ˜¯ä¹Ÿä¼šåˆ—å‡ºé€‚ç”¨äº `Vue2` çš„ä¼˜åŒ–æŠ€å·§ï¼Œå¦‚æœæŸä¸ªä¼˜åŒ–åªé€‚ç”¨äº `Vue3` æˆ–è€… `Vue2`ï¼Œæˆ‘ä¼šåœ¨æ ‡é¢˜ä¸­æ ‡å‡ºæ¥ã€‚

1 ä»£ç ä¼˜åŒ–
------

### v-for ä¸­ä½¿ç”¨ key

ä½¿ç”¨ `v-for` æ›´æ–°å·²æ¸²æŸ“çš„å…ƒç´ åˆ—è¡¨æ—¶ï¼Œé»˜è®¤ç”¨å°±åœ°å¤ç”¨ç­–ç•¥ï¼›åˆ—è¡¨æ•°æ®ä¿®æ”¹çš„æ—¶å€™ï¼Œä»–ä¼šæ ¹æ® key å€¼å»åˆ¤æ–­æŸä¸ªå€¼æ˜¯å¦ä¿®æ”¹ï¼Œå¦‚æœä¿®æ”¹ï¼Œåˆ™é‡æ–°æ¸²æŸ“è¿™ä¸€é¡¹ï¼Œå¦åˆ™å¤ç”¨ä¹‹å‰çš„å…ƒç´ ï¼›

ä½¿ç”¨ key çš„æ³¨æ„äº‹é¡¹ï¼š

*   ä¸è¦ä½¿ç”¨å¯èƒ½é‡å¤çš„æˆ–è€…å¯èƒ½å˜åŒ– key å€¼ï¼ˆæ§åˆ¶å°ä¹Ÿä¼šç»™å‡ºæé†’ï¼‰
    
*   å¦‚æœæ•°ç»„ä¸­çš„æ•°æ®æœ‰çŠ¶æ€éœ€è¦ç»´æŒæ—¶ï¼ˆä¾‹å¦‚è¾“å…¥æ¡†ï¼‰ï¼Œä¸è¦ä½¿ç”¨æ•°ç»„çš„ index ä½œä¸º key å€¼ï¼Œå› ä¸ºå¦‚æœåœ¨æ•°ç»„ä¸­æ’å…¥æˆ–è€…ç§»é™¤ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œå…¶åé¢çš„å…ƒç´  index å°†ä¼šå˜åŒ–ï¼Œè¿™å›è®© vue è¿›è¡ŒåŸåœ°å¤ç”¨æ—¶é”™è¯¯çš„ç»‘å®šçŠ¶æ€ã€‚
    
*   å¦‚æœæ•°ç»„ä¸­æ²¡æœ‰å”¯ä¸€çš„ key å€¼å¯ç”¨ï¼Œä¸”æ•°ç»„æ›´æ–°æ—¶ä¸æ˜¯å…¨é‡æ›´æ–°è€Œæ˜¯é‡‡ç”¨ç±»ä¼¼ pushï¼Œsplice æ¥æ’å…¥æˆ–è€…ç§»é™¤æ•°æ®æ—¶ï¼Œå¯ä»¥è€ƒè™‘å¯¹å…¶æ·»åŠ ä¸€ä¸ª key å­—æ®µï¼Œå€¼ä¸º Symbol() å³å¯ä¿è¯å”¯ä¸€ã€‚
    

> ä½•æ—¶ä½¿ç”¨ä½•ç§ keyï¼Ÿ

è¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰è€ƒç©¶çš„é—®é¢˜ï¼Œé¦–å…ˆä½ è¦çŸ¥é“ vue ä¸­çš„`åŸåœ°å¤ç”¨`ï¼ˆå¤§æ¦‚å°±æ˜¯`è™šæ‹Ÿdom`å˜åŒ–æ—¶ï¼Œä¸¤ä¸ª `è™šæ‹ŸdomèŠ‚ç‚¹` çš„ `key` å¦‚æœä¸€æ ·å°±ä¸ä¼šé‡æ–°åˆ›å»ºèŠ‚ç‚¹ï¼Œè€Œæ˜¯ä¿®æ”¹åŸæ¥çš„èŠ‚ç‚¹ï¼‰

å½“æˆ‘ä»¬æ¸²æŸ“çš„æ•°æ®ä¸éœ€è¦ä¿æŒçŠ¶æ€æ—¶ï¼Œä¾‹å¦‚å¸¸è§çš„å•çº¯çš„è¡¨æ ¼åˆ†é¡µæ¸²æŸ“ï¼ˆä¸åŒ…å«è¾“å…¥ï¼Œåªæ˜¯å±•ç¤ºï¼‰ã€ä¸‹æ‹‰åŠ è½½æ›´å¤šç­‰åœºæ™¯ï¼Œé‚£ä¹ˆä½¿ç”¨ `index` ä½œä¸º `key` å†å¥½ä¸è¿‡ï¼Œå› ä¸ºè¿›å…¥ä¸‹ä¸€é¡µæˆ–è€…ä¸Šä¸€é¡µæ—¶å°±ä¼šåŸåœ°å¤ç”¨ä¹‹å‰çš„èŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯é‡æ–°åˆ›å»ºï¼Œå¦‚æœä½¿ç”¨å”¯ä¸€çš„ `id` ä½œä¸º`key`åè€Œä¼šé‡æ–°åˆ›å»º domï¼Œæ€§èƒ½ç›¸å¯¹è¾ƒä½ã€‚

æ­¤å¤–ä½¿ç”¨ `index` ä½œä¸º`key`æˆ‘è¿˜åº”è¯¥è¦å°½é‡é¿å…å¯¹æ•°ç»„çš„ä¸­é—´è¿›è¡Œ å¢åŠ  / åˆ é™¤ ç­‰ä¼šå½±å“åé¢å…ƒç´  key å˜åŒ–çš„æ“ä½œã€‚è¿™ä¼šè®© vue è®¤ä¸ºåé¢æ‰€æœ‰å…ƒç´ éƒ½å‘ç”Ÿäº†å˜åŒ–ï¼Œå¯¼è‡´å¤šä½™çš„å¯¹æ¯”å’ŒåŸåœ°å¤ç”¨ã€‚

æ‰€ä»¥ä½¿ç”¨ index ä½œä¸º key éœ€è¦æ»¡è¶³ï¼š

*   æ•°æ®æ²¡æœ‰ç‹¬ç«‹çš„çŠ¶æ€
    
*   æ•°æ®ä¸ä¼šè¿›è¡Œ å¢åŠ  / åˆ é™¤ ç­‰ä¼šå½±å“åé¢å…ƒç´  key å˜åŒ–çš„æ“ä½œ
    

> å“ªä½•æ—¶ä½¿ç”¨ id ä½œä¸º key å‘¢ï¼Ÿ

å¯¹äºå¤§å¤šæ•°æ•°æ®çš„`id`éƒ½æ˜¯å”¯ä¸€çš„ï¼Œè¿™æ— ç–‘çš„ä¸€ä¸ª`key`çš„ä¼˜é€‰ç­”æ¡ˆã€‚å¯¹äºä»»ä½•å¤§å¤šæ•°æƒ…å†µä½¿ç”¨ `id` ä½œä¸º `key` éƒ½ä¸ä¼šå‡ºç°ä¸Šé¢ `bug`ã€‚ä½†æ˜¯å¦‚æœä½ éœ€è¦è€ƒè™‘æ€§èƒ½é—®é¢˜ï¼Œé‚£å°±å°±è¦æ€è€ƒæ˜¯å¦åº”è¯¥ä½¿ç”¨åŸåœ°å¤ç”¨äº†ã€‚

åŒæ ·æ˜¯ä¸Šé¢çš„åˆ†é¡µæ•°æ®å±•ç¤ºï¼Œå¦‚æœä½¿ç”¨`id`ä½œä¸º `key` ï¼Œå¯æƒ³è€ŒçŸ¥æ¯ä¸€é¡µçš„æ¯ä¸€æ¡æ•°æ® `id` éƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥å½“æ¢é¡µæ—¶ä¸¤é¢— è™šæ‹Ÿ DOM æ ‘ çš„èŠ‚ç‚¹çš„ `key` å®Œå…¨ä¸ä¸€è‡´ï¼Œvue å°±ä¼šç§»é™¤åŸæ¥çš„èŠ‚ç‚¹ç„¶ååˆ›å»ºæ–°çš„èŠ‚ç‚¹ã€‚å¯æƒ³è€ŒçŸ¥æ•ˆç‡ä¼šæ›´åŠ ä½ä¸‹ã€‚ä½†æ˜¯ä»–ä¹Ÿæœ‰å®ƒçš„ä¼˜ç‚¹ã€‚å”¯ä¸€çš„ key å¯ä»¥å¸®åŠ© diff æ›´åŠ ç²¾ç¡®çš„ä¸ºæˆ‘ä»¬ç»‘å®šçŠ¶æ€ï¼Œè¿™å°¤å…¶é€‚åˆæ•°æ®æœ‰ç‹¬ç«‹çš„çŠ¶æ€çš„åœºæ™¯ï¼Œä¾‹å¦‚å¸¦è¾“å…¥æ¡†æˆ–è€…å•é€‰æ¡†çš„åˆ—è¡¨æ•°æ®ã€‚

æ‰€ä»¥ä½•æ—¶ä½¿ç”¨ id ä½œä¸º keyï¼Ÿ

åªæœ‰ä¸€ç‚¹ï¼š

*   æ— æ³•ä½¿ç”¨ index ä½œä¸º key çš„æ—¶å€™
    

### v-if/v-else-if/v-else ä¸­ä½¿ç”¨ key

> å¯èƒ½å¾ˆå¤šäººéƒ½ä¼šå¿½ç•¥è¿™ä¸ªç‚¹

åŸå› ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒVue ä¼šå°½å¯èƒ½é«˜æ•ˆçš„æ›´æ–° DOMã€‚è¿™æ„å‘³ç€å…¶åœ¨ç›¸åŒç±»å‹çš„å…ƒç´ ä¹‹é—´åˆ‡æ¢æ—¶ï¼Œä¼šä¿®è¡¥å·²å­˜åœ¨çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯å°†æ—§çš„å…ƒç´ ç§»é™¤ç„¶ååœ¨åŒä¸€ä½ç½®æ·»åŠ ä¸€ä¸ªæ–°å…ƒç´ ã€‚å¦‚æœæœ¬ä¸ç›¸åŒçš„å…ƒç´ è¢«è¯†åˆ«ä¸ºç›¸åŒï¼Œåˆ™ä¼šå‡ºç°æ„æ–™ä¹‹å¤–çš„å‰¯ä½œç”¨ã€‚

> å¦‚æœåªæœ‰ä¸€ä¸ª v-if ï¼Œæ²¡æœ‰ v-else æˆ–è€… v-if-else çš„è¯ï¼Œå°±æ²¡æœ‰å¿…è¦åŠ  key äº†

ç›¸å¯¹äº v-for çš„ keyï¼Œ v-if/v-else-if/v-else ä¸­çš„ key ç›¸å¯¹ç®€å•ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å†™å…¥å›ºå®šçš„å­—ç¬¦ä¸²æˆ–è€…æ•°ç»„å³å¯

```
<transition>
    <button 
      v-if="isEditing"
      v-on:click="isEditing = false"
    >
      Save
    </button>
    <button 
      v-else 
      v-on:click="isEditing = true"
    >
      Edit
    </button>
  </transition>
```

```
.v-enter-active,Â .v-leave-activeÂ {Â Â transition:Â allÂ 1s;}.v-enter,Â .v-leave-toÂ {Â Â opacity:Â 0;Â Â transform:Â translateY(30px);}.v-leave-activeÂ {Â Â position:Â absolute;}
```

ä¾‹å¦‚å¯¹äºä¸Šé¢çš„ä»£ç ï¼Œ ä½ ä¼šå‘ç°è™½ç„¶å¯¹ button æ·»åŠ äº† è¿‡æ¸¡æ•ˆæœï¼Œ ä½†æ˜¯å¦‚æœä¸æ·»åŠ  key åˆ‡æ¢æ—¶æ˜¯æ— æ³•è§¦å‘è¿‡æ¸¡çš„

### v-for å’Œ v-if ä¸è¦ä¸€èµ·ä½¿ç”¨ï¼ˆVue2ï¼‰

> æ­¤ä¼˜åŒ–æŠ€å·§ä»…é™äº Vue2ï¼ŒVue3 ä¸­å¯¹ v-for å’Œ v-if çš„ä¼˜å…ˆçº§åšäº†è°ƒæ•´

è¿™ä¸ªå¤§å®¶éƒ½çŸ¥é“

> æ°¸è¿œä¸è¦æŠŠ v-if å’Œ v-for åŒæ—¶ç”¨åœ¨åŒä¸€ä¸ªå…ƒç´ ä¸Šã€‚å¼•è‡³ Vue2.x é£æ ¼æŒ‡å—

åŸå› æ˜¯ v-for çš„ ä¼˜å…ˆçº§é«˜äº v-ifï¼Œæ‰€ä»¥å½“å®ƒä»¬ä½¿ç”¨å†åŒä¸€ä¸ªæ ‡ç­¾ä¸Šæ˜¯ï¼Œæ¯ä¸€ä¸ªæ¸²æŸ“éƒ½ä¼šå…ˆå¾ªç¯å†è¿›è¡Œæ¡ä»¶åˆ¤æ–­

> æ³¨æ„ï¼šVue3 ä¸­ v-if ä¼˜å…ˆçº§é«˜äº v-forï¼Œæ‰€ä»¥å½“ v-for å’Œ v-if ä¸€èµ·ä½¿ç”¨æ—¶æ•ˆæœç±»ä¼¼äº Vue2 ä¸­æŠŠ v-if ä¸Šæçš„æ•ˆæœ

ä¾‹å¦‚ä¸‹é¢è¿™æ®µä»£ç åœ¨ Vue2 ä¸­æ˜¯ä¸è¢«æ¨èçš„ï¼ŒVue ä¹Ÿä¼šç»™å‡ºå¯¹åº”çš„è­¦å‘Š

```
<ul>
  <li v-for="user in users" v-if="user.active">
    {{ user.name }}
  </li>
</ul>
```

æˆ‘ä»¬åº”è¯¥å°½é‡å°† v-if ç§»åŠ¨åˆ°ä¸Šçº§ æˆ–è€… ä½¿ç”¨ è®¡ç®—å±æ€§æ¥å¤„ç†æ•°æ®

```
<ul v-if="active">
  <li v-for="user in users">
    {{ user.name }}
  </li>
</ul>
```

å¦‚æœä½ ä¸æƒ³è®©å¾ªç¯çš„å†…å®¹å¤šå‡ºä¸€ä¸ªæ— éœ€æœ‰çš„ä¸Šçº§å®¹å™¨ï¼Œé‚£ä¹ˆä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨ template æ¥ä½œä¸ºå…¶çˆ¶å…ƒç´ ï¼Œtemplate ä¸ä¼šè¢«æµè§ˆå™¨æ¸²æŸ“ä¸º DOM èŠ‚ç‚¹

å¦‚æœæˆ‘æƒ³è¦åˆ¤æ–­éå†å¯¹è±¡é‡Œé¢æ¯ä¸€é¡¹çš„å†…å®¹æ¥é€‰æ‹©æ¸²æŸ“çš„æ•°æ®çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ computed æ¥å¯¹éå†å¯¹è±¡è¿›è¡Œè¿‡æ»¤

```
//Â jsletÂ usersActiveÂ =Â computed(()=>users.filter(userÂ =>Â user.active))//Â template<ul>Â Â Â Â <liÂ v-for="userÂ inÂ usersActive">Â Â Â Â Â Â {{Â user.nameÂ }}Â Â Â Â </li></ul>
```

### åˆç†çš„é€‰æ‹© v-if å’Œ v-show

v-if å’Œ v-show çš„åŒºåˆ«ç›¸æ¯”å¤§å®¶éƒ½éå¸¸ç†Ÿæ‚‰äº†ï¼›v-if é€šè¿‡ç›´æ¥æ“ä½œ DOM çš„åˆ é™¤å’Œæ·»åŠ æ¥æ§åˆ¶å…ƒç´ çš„æ˜¾ç¤ºå’Œéšè—ï¼›v-show æ˜¯é€šè¿‡æ§åˆ¶ DOM çš„ display CSS ç†Ÿæ‚‰æ¥æ§åˆ¶å…ƒç´ çš„æ˜¾ç¤ºå’Œéšè—

ç”±äºå¯¹ DOM çš„ æ·»åŠ  / åˆ é™¤ æ“ä½œæ€§èƒ½è¿œè¿œä½äºæ“ä½œ DOM çš„ CSS å±æ€§

æ‰€ä»¥å½“å…ƒç´ éœ€è¦é¢‘ç¹çš„ æ˜¾ç¤º / éšè— å˜åŒ–æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ v-show æ¥æé«˜æ€§èƒ½ã€‚

å½“å…ƒç´ ä¸éœ€è¦é¢‘ç¹çš„ æ˜¾ç¤º / éšè— å˜åŒ–æ—¶ï¼Œæˆ‘ä»¬é€šè¿‡ v-if æ¥ç§»é™¤ DOM å¯ä»¥èŠ‚çº¦æ‰æµè§ˆå™¨æ¸²æŸ“è¿™ä¸ªçš„ä¸€éƒ¨åˆ† DOM éœ€è¦çš„èµ„æº

### ä½¿ç”¨ç®€å•çš„ è®¡ç®—å±æ€§

åº”è¯¥æŠŠå¤æ‚è®¡ç®—å±æ€§åˆ†å‰²ä¸ºå°½å¯èƒ½å¤šçš„æ›´ç®€å•çš„ propertyã€‚

#### æ˜“äºæµ‹è¯•

å½“æ¯ä¸ªè®¡ç®—å±æ€§éƒ½åŒ…å«ä¸€ä¸ªéå¸¸ç®€å•ä¸”å¾ˆå°‘ä¾èµ–çš„è¡¨è¾¾å¼æ—¶ï¼Œæ’°å†™æµ‹è¯•ä»¥ç¡®ä¿å…¶æ­£ç¡®å·¥ä½œå°±ä¼šæ›´åŠ å®¹æ˜“ã€‚

#### æ˜“äºé˜…è¯»

ç®€åŒ–è®¡ç®—å±æ€§è¦æ±‚ä½ ä¸ºæ¯ä¸€ä¸ªå€¼éƒ½èµ·ä¸€ä¸ªæè¿°æ€§çš„åç§°ï¼Œå³ä¾¿å®ƒä¸å¯å¤ç”¨ã€‚è¿™ä½¿å¾—å…¶ä»–å¼€å‘è€… (ä»¥åŠæœªæ¥çš„ä½ ) æ›´å®¹æ˜“ä¸“æ³¨åœ¨ä»–ä»¬å…³å¿ƒçš„ä»£ç ä¸Šå¹¶ææ¸…æ¥šå‘ç”Ÿäº†ä»€ä¹ˆã€‚

#### æ›´å¥½çš„ â€œæ‹¥æŠ±å˜åŒ–â€

ä»»ä½•èƒ½å¤Ÿå‘½åçš„å€¼éƒ½å¯èƒ½ç”¨åœ¨è§†å›¾ä¸Šã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯èƒ½æ‰“ç®—å±•ç¤ºä¸€ä¸ªä¿¡æ¯ï¼Œå‘Šè¯‰ç”¨æˆ·ä»–ä»¬å­˜äº†å¤šå°‘é’±ï¼›ä¹Ÿå¯èƒ½æ‰“ç®—è®¡ç®—ç¨è´¹ï¼Œä½†æ˜¯å¯èƒ½ä¼šåˆ†å¼€å±•ç°ï¼Œè€Œä¸æ˜¯ä½œä¸ºæ€»ä»·çš„ä¸€éƒ¨åˆ†ã€‚

å°çš„ã€ä¸“æ³¨çš„è®¡ç®—å±æ€§å‡å°‘äº†ä¿¡æ¯ä½¿ç”¨æ—¶çš„å‡è®¾æ€§é™åˆ¶ï¼Œæ‰€ä»¥éœ€æ±‚å˜æ›´æ—¶ä¹Ÿç”¨ä¸ç€é‚£ä¹ˆå¤šé‡æ„äº†ã€‚

#### å¼•è‡³ Vue2 é£æ ¼æŒ‡å—

computed å¤§å®¶åå¾ˆç†Ÿæ‚‰ï¼Œ å®ƒä¼šåœ¨å…¶è¡¨è¾¾å¼ä¸­ä¾èµ–çš„å“åº”å¼æ•°æ®å‘é€å˜åŒ–æ—¶é‡æ–°è®¡ç®—ã€‚å¦‚æœæˆ‘ä»¬åœ¨ä¸€ä¸ªè®¡ç®—å±æ€§ä¸­ä¹¦å†™äº†æ¯”è¾ƒå¤æ‚çš„è¡¨è¾¾å¼ï¼Œé‚£ä¹ˆå…¶ä¾èµ–çš„å“åº”å¼æ•°æ®ä¹Ÿä»»æ„å˜å¾—æ›´å¤šã€‚å½“å…¶ä¸­ä»»ä½•ä¸€ä¸ªä¾èµ–é¡¹å˜åŒ–æ—¶æ•´ä¸ªè¡¨è¾¾å¼éƒ½éœ€è¦é‡æ–°è®¡ç®—

```
letÂ priceÂ =Â computed(()=>{Â Â letÂ basePriceÂ =Â manufactureCostÂ /Â (1Â -Â profitMargin)Â Â returnÂ (Â Â Â Â Â Â basePriceÂ -Â Â Â Â Â Â basePriceÂ *Â (discountPercentÂ ||Â 0)Â Â )})
```

å½“ manufactureCostã€profitMarginã€discountPercent ä¸­ä»»ä½•ä¸€ä¸ªå˜åŒ–æ—¶éƒ½ä¼šé‡æ–°è®¡ç®—æ•´ä¸ª priceã€‚

ä½†æ˜¯å¦‚æœæˆ‘ä»¬æ”¹æˆä¸‹é¢è¿™æ ·

```
letÂ basePriceÂ =Â computed(()Â =>Â manufactureCostÂ /Â (1Â -Â profitMargin))letÂ discountÂ =Â computed(()Â =>Â basePriceÂ *Â (discountPercentÂ ||Â 0))letÂ finalPriceÂ =Â computed(()Â =>Â basePriceÂ -Â discount)
```

å¦‚æœå½“ discountPercent å˜åŒ–æ—¶ï¼Œåªä¼š é‡æ–°è®¡ç®— discount å’Œ finalPriceï¼Œç”±äº computed çš„ç¼“å­˜ç‰¹æ€§ï¼Œä¸ä¼šé‡æ–°è®¡ç®— basePrice

### functional å‡½æ•°å¼ç»„ä»¶ï¼ˆVue2ï¼‰

æ³¨æ„ï¼Œè¿™ä»…ä»…åœ¨ Vue2 ä¸­è¢«ä½œä¸ºä¸€ç§ä¼˜åŒ–æ‰‹æ®µï¼Œåœ¨ 3.x ä¸­ï¼Œæœ‰çŠ¶æ€ç»„ä»¶å’Œå‡½æ•°å¼ç»„ä»¶ä¹‹é—´çš„æ€§èƒ½å·®å¼‚å·²ç»å¤§å¤§å‡å°‘ï¼Œå¹¶ä¸”åœ¨å¤§å¤šæ•°ç”¨ä¾‹ä¸­æ˜¯å¾®ä¸è¶³é“çš„ã€‚å› æ­¤ï¼Œåœ¨ SFCs ä¸Šä½¿ç”¨ functional çš„å¼€å‘äººå‘˜çš„è¿ç§»è·¯å¾„æ˜¯åˆ é™¤è¯¥ attributeï¼Œå¹¶å°† props çš„æ‰€æœ‰å¼•ç”¨é‡å‘½åä¸ºÂ ï¼Œå°†é‡å‘½åä¸º attrsã€‚

ä¼˜åŒ–å‰

```
<template> 
    <div class="cell"> 
        <div v-if="value" class="on"></div> 
        <section v-else class="off"></section> 
    </div> 
</template> 

<script> 
export default { 
    props: ['value'], 
} 
</script>
```

ä¼˜åŒ–å

```
<template functional> 
    <div class="cell"> 
        <div v-if="props.value" class="on"></div> 
        <section v-else class="off"></section> 
    </div> 
</template> 

<script> 
export default { 
    props: ['value'], 
} 
</script>
```

*   æ²¡æœ‰ thisï¼ˆæ²¡æœ‰å®ä¾‹ï¼‰
    
*   æ²¡æœ‰å“åº”å¼æ•°æ®
    

### æ‹†åˆ†ç»„ä»¶

ä»€ä¹ˆï¼Ÿä½ å†™çš„ä¸€ä¸ª vue æ–‡ä»¶æœ‰ä¸€åƒå¤šè¡Œä»£ç ï¼ŸğŸ¤” åˆç†çš„æ‹†åˆ†ç»„ä»¶ä¸ä»…ä»…å¯ä»¥ä¼˜åŒ–æ€§èƒ½ï¼Œè¿˜èƒ½å¤Ÿè®©ä»£ç æ›´æ¸…æ™°å¯è¯»ã€‚å•ä¸€åŠŸèƒ½åŸåˆ™å˜›

ä¼˜åŒ–å‰

```
<template>
  <div :style="{ opacity: number / 300 }">
    <div>{{ heavy() }}</div>
  </div>
</template>

<script>
export default {
  props: ['number'],
  methods: {
    heavy () { /* HEAVY TASK */ }
  }
}
</script>
```

ä¼˜åŒ–å

```
<template>
  <div :style="{ opacity: number / 300 }">
    <ChildComp/>
  </div>
</template>

<script>
export default {
  props: ['number'],
  components: {
    ChildComp: {
      methods: {
        heavy () { /* HEAVY TASK */ }
      },
      render (h) {
        return h('div', this.heavy())
      }
    }
  }
}
</script>
```

ç”±äº Vue çš„æ›´æ–°æ˜¯ç»„ä»¶ç²’åº¦çš„ï¼Œè™½ç„¶æ¯ä¸€å¸§éƒ½é€šè¿‡æ•°æ®ä¿®æ”¹å¯¼è‡´äº†çˆ¶ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ï¼Œä½†æ˜¯ ChildComp å´ä¸ä¼šé‡æ–°æ¸²æŸ“ï¼Œå› ä¸ºå®ƒçš„å†…éƒ¨ä¹Ÿæ²¡æœ‰ä»»ä½•å“åº”å¼æ•°æ®çš„å˜åŒ–ã€‚æ‰€ä»¥ä¼˜åŒ–åçš„ç»„ä»¶ä¸ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“éƒ½æ‰§è¡Œè€—æ—¶ä»»åŠ¡

### ä½¿ç”¨å±€éƒ¨å˜é‡

ä¼˜åŒ–å‰

```
<template>
  <div :style="{ opacity: start / 300 }">{{ result }}</div>
</template>

<script>
import { heavy } from '@/utils'

export default {
  props: ['start'],
  computed: {
    base () { return 42 },
    result () {
      let result = this.start
      for (let i = 0; i < 1000; i++) {
        result += heavy(this.base)
      }
      return result
    }
  }
}
</script>
```

ä¼˜åŒ–å

```
<template>
  <div :style="{ opacity: start / 300 }">
    {{ result }}</div>
</template>

<script>
import { heavy } from '@/utils'

export default {
  props: ['start'],
  computed: {
    base () { return 42 },
    result () {
      const base = this.base
      let result = this.start
      for (let i = 0; i < 1000; i++) {
        result += heavy(base)
      }
      return result
    }
  }
}
</script>
```

> è¿™é‡Œä¸»è¦æ˜¯ä¼˜åŒ–å‰åçš„ç»„ä»¶çš„è®¡ç®—å±æ€§ result çš„å®ç°å·®å¼‚ï¼Œä¼˜åŒ–å‰çš„ç»„ä»¶å¤šæ¬¡åœ¨è®¡ç®—è¿‡ç¨‹ä¸­è®¿é—® this.baseï¼Œè€Œä¼˜åŒ–åçš„ç»„ä»¶ä¼šåœ¨è®¡ç®—å‰å…ˆç”¨å±€éƒ¨å˜é‡ baseï¼Œç¼“å­˜ this.baseï¼Œåé¢ç›´æ¥è®¿é—® baseã€‚
> 
> é‚£ä¹ˆä¸ºå•¥è¿™ä¸ªå·®å¼‚ä¼šé€ æˆæ€§èƒ½ä¸Šçš„å·®å¼‚å‘¢ï¼ŒåŸå› æ˜¯ä½ æ¯æ¬¡è®¿é—® this.base çš„æ—¶å€™ï¼Œç”±äº this.base æ˜¯ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œæ‰€ä»¥ä¼šè§¦å‘å®ƒçš„ getterï¼Œè¿›è€Œä¼šæ‰§è¡Œä¾èµ–æ”¶é›†ç›¸å…³é€»è¾‘ä»£ç ã€‚ç±»ä¼¼çš„é€»è¾‘æ‰§è¡Œå¤šäº†ï¼Œåƒç¤ºä¾‹è¿™æ ·ï¼Œå‡ ç™¾æ¬¡å¾ªç¯æ›´æ–°å‡ ç™¾ä¸ªç»„ä»¶ï¼Œæ¯ä¸ªç»„ä»¶è§¦å‘ computed é‡æ–°è®¡ç®—ï¼Œç„¶ååˆå¤šæ¬¡æ‰§è¡Œä¾èµ–æ”¶é›†ç›¸å…³é€»è¾‘ï¼Œæ€§èƒ½è‡ªç„¶å°±ä¸‹é™äº†ã€‚
> 
> ä»éœ€æ±‚ä¸Šæ¥è¯´ï¼Œthis.base æ‰§è¡Œä¸€æ¬¡ä¾èµ–æ”¶é›†å°±å¤Ÿäº†ï¼ŒæŠŠå®ƒçš„ getter æ±‚å€¼ç»“æœè¿”å›ç»™å±€éƒ¨å˜é‡ baseï¼Œåç»­å†æ¬¡è®¿é—® base çš„æ—¶å€™å°±ä¸ä¼šè§¦å‘ getterï¼Œä¹Ÿä¸ä¼šèµ°ä¾èµ–æ”¶é›†çš„é€»è¾‘äº†ï¼Œæ€§èƒ½è‡ªç„¶å°±å¾—åˆ°äº†æå‡ã€‚å¼•è‡³ æ­ç§˜ Vue.js ä¹ä¸ªæ€§èƒ½ä¼˜åŒ–æŠ€å·§

### ä½¿ç”¨ KeepAlive

åœ¨ä¸€äº›æ¸²æŸ“æˆæœ¬æ¯”è¾ƒé«˜çš„ç»„ä»¶éœ€è¦è¢«ç»å¸¸åˆ‡æ¢æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ keep-alive æ¥ç¼“å­˜è¿™ä¸ªç»„ä»¶ è€Œåœ¨ä½¿ç”¨ keep-alive åï¼Œè¢« keep-alive åŒ…è£¹çš„ç»„ä»¶åœ¨ç»è¿‡ç¬¬ä¸€æ¬¡æ¸²æŸ“åï¼Œçš„ vnode ä»¥åŠ DOM éƒ½ä¼šè¢«ç¼“å­˜èµ·æ¥ï¼Œç„¶åå†ä¸‹ä¸€æ¬¡å†æ¬¡æ¸²æŸ“è¯¥ç»„ä»¶çš„æ—¶å€™ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­æ‹¿åˆ°å¯¹åº”çš„ vnode å’Œ DOMï¼Œç„¶åæ¸²æŸ“ï¼Œå¹¶ä¸éœ€è¦å†èµ°ä¸€æ¬¡ç»„ä»¶åˆå§‹åŒ–ï¼Œrender å’Œ patch ç­‰ä¸€ç³»åˆ—æµç¨‹ï¼Œå‡å°‘äº† script çš„æ‰§è¡Œæ—¶é—´ï¼Œæ€§èƒ½æ›´å¥½ã€‚

> æ³¨æ„ï¼šæ»¥ç”¨ keep-alive åªä¼šè®©ä½ çš„åº”ç”¨å˜å¾—æ›´åŠ å¡é¡¿ï¼Œå› ä¸ºä»–ä¼šé•¿æœŸå ç”¨è¾ƒå¤§çš„å†…å­˜

### äº‹ä»¶çš„é”€æ¯

å½“ä¸€ä¸ªç»„ä»¶è¢«é”€æ¯æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥æ¸…é™¤ç»„ä»¶ä¸­æ·»åŠ çš„ å…¨å±€äº‹ä»¶ å’Œ å®šæ—¶å™¨ ç­‰æ¥é˜²æ­¢å†…å­˜æ³„æ¼ Vue3 çš„ HOOK å¯ä»¥è®©æˆ‘ä»¬å°†äº‹ä»¶çš„å£°æ˜å’Œé”€æ¯å†™åœ¨ä¸€èµ·ï¼Œæ›´åŠ å¯è¯»

```
functionÂ scrollFun(){Â /*Â ...Â */}document.addEventListener("scroll",Â scrollFun)onBeforeUnmount(()=>{Â Â document.removeEventListener("scroll",Â scrollFun)})
```

Vue2 ä¾ç„¶å¯ä»¥é€šè¿‡ $once æ¥åšåˆ°è¿™æ ·çš„æ•ˆæœï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨ optionsAPI beforeDestroy ä¸­é”€æ¯äº‹ä»¶ï¼Œä½†æ˜¯æˆ‘æ›´åŠ æ¨èå‰è€…çš„å†™æ³•ï¼Œå› ä¸ºåè€…ä¼šè®©ç›¸åŒåŠŸèƒ½çš„ä»£ç æ›´åˆ†æ•£

```
functionÂ scrollFun(){Â /*Â ...Â */}document.addEventListener("scroll",Â scrollFun)this.$once('hook:beforeDestroy',Â ()=>{Â Â document.removeEventListener("scroll",Â scrollFun)})
```

```
functionÂ scrollFun(){Â /*Â ...Â */}exportÂ defaultÂ {Â Â created()Â {Â Â Â Â document.addEventListener("scroll",Â scrollFun)Â Â },Â Â beforeDestroy(){Â Â Â Â document.removeEventListener("scroll",Â scrollFun)Â Â }}
```

### å›¾ç‰‡åŠ è½½

å›¾ç‰‡æ‡’åŠ è½½ï¼šé€‚ç”¨äºé¡µé¢ä¸Šæœ‰è¾ƒå¤šå›¾ç‰‡ä¸”å¹¶ä¸æ˜¯æ‰€æœ‰å›¾ç‰‡éƒ½åœ¨ä¸€å±ä¸­å±•ç¤ºçš„æƒ…å†µï¼Œvue-lazyload æ’ä»¶ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„å›¾ç‰‡æ‡’åŠ è½½æŒ‡ä»¤ v-lazy

ä½†æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰å›¾ç‰‡éƒ½é€‚åˆä½¿ç”¨æ‡’åŠ è½½ï¼Œä¾‹å¦‚ bannerã€ç›¸å†Œç­‰ æ›´åŠ æ¨èä½¿ç”¨å›¾ç‰‡é¢„åŠ è½½æŠ€æœ¯ï¼Œå°†å½“å‰å±•ç¤ºå›¾ç‰‡çš„å‰ä¸€å¼ å’Œåä¸€å¼ ä¼˜å…ˆä¸‹è½½ã€‚

### ä½¿ç”¨åˆé€‚çš„å›¾ç‰‡ç±»å‹

*   ä½¿ç”¨ webp æ ¼å¼ï¼šè¿™ä¸ªæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå¤§å®¶éƒ½çŸ¥é“ WebP çš„ä¼˜åŠ¿ä½“ç°åœ¨å®ƒå…·æœ‰æ›´ä¼˜çš„å›¾åƒæ•°æ®å‹ç¼©ç®—æ³•, èƒ½å¸¦æ¥æ›´å°çš„å›¾ç‰‡ä½“ç§¯, è€Œä¸”æ‹¥æœ‰è‚‰çœ¼è¯†åˆ«æ— å·®å¼‚çš„å›¾åƒè´¨é‡ï¼›åŒæ—¶å…·å¤‡äº†æ— æŸå’Œæœ‰æŸçš„å‹ç¼©æ¨¡å¼ã€Alpha é€æ˜ä»¥åŠåŠ¨ç”»çš„ç‰¹æ€§, åœ¨ JPEG å’Œ PNG ä¸Šçš„è½¬åŒ–æ•ˆæœéƒ½ç›¸å½“ä¼˜ç§€ã€ç¨³å®šå’Œç»Ÿä¸€ã€‚
    
*   ä½¿ç”¨äº¤é”™ GIF æˆ–è€…æ˜¯æ¸è¿› JPEGï¼šè¿˜æœ‰ä¸€ç§ä¼˜åŒ–ç”¨æˆ·ä½“éªŒçš„æ–¹å¼ï¼Œå°±æ˜¯ä½¿ç”¨äº¤é”™ GIF æˆ–è€…æ˜¯æ¸è¿›ï¼ˆProgressive Encodingï¼‰JPEG çš„å›¾ç‰‡ã€‚æ¸è¿› JPEG æ–‡ä»¶é¦–å…ˆæ˜¯æ¨¡ç³Šçš„ï¼Œç„¶åæ¸æ¸æ¸…æ™°èµ·æ¥ã€‚
    
*   Baseline JPEG å’Œ Progressive JPEG çš„åŒºåˆ«ï¼š
    
    é˜³å…‰å½©è™¹å°ç™½é©¬
    

*   JPEG æ–‡ä»¶æ ¼å¼æœ‰ä¸¤ç§ä¿å­˜æ–¹å¼ã€‚ä»–ä»¬æ˜¯ Baseline JPEG å’Œ Progressive JPEGã€‚
    
*   ä¸¤ç§æ ¼å¼æœ‰ç›¸åŒå°ºå¯¸ä»¥åŠå›¾åƒæ•°æ®ï¼Œä»–ä»¬çš„æ‰©å±•åä¹Ÿæ˜¯ç›¸åŒçš„ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯äºŒè€…æ˜¾ç¤ºçš„æ–¹å¼ä¸åŒã€‚
    

Baseline JPEG

![](https://mmbiz.qpic.cn/mmbiz/83d3vL8fIicYZiaeUv2pUDs0pAw8kTwo0eYdn7EJcIU8RPnTQYc5WXkQAjeP4gd7zGHehvU4nmjLIr88AAImgQYQ/640?wx_fmt=other)

Progressive JPEG

![](https://mmbiz.qpic.cn/mmbiz/83d3vL8fIicYZiaeUv2pUDs0pAw8kTwo0egZJxmA8mdfWL6uvJwRbibBiaE437Ff1GtD7F1kicO153sEZyOAFIib5ibtw/640?wx_fmt=other)

Progressive JPEG çš„ä¼˜ç‚¹ï¼š

*   ç”¨æˆ·ä½“éªŒï¼šä¸€ä¸ªä»¥ progressive æ–¹å¼ç¼–ç çš„ jpeg æ–‡ä»¶ï¼Œåœ¨æµè§ˆå™¨ä¸Šçš„æ¸²æŸ“æ–¹å¼æ˜¯ç”±æ¨¡ç³Šåˆ°æ¸…æ™°çš„ã€‚ç”¨æˆ·èƒ½åœ¨æ¸å˜çš„å›¾åƒå½“ä¸­è·å¾—æ‰€éœ€ä¿¡æ¯çš„åé¦ˆã€‚å¦‚æœå†…å®¹ä¸æ˜¯ç”¨æˆ·æ‰€æœŸå¾…çš„ï¼Œç”¨æˆ·å°±èƒ½æå‰å‰å¾€æ–°çš„é¡µé¢ã€‚
    
*   æ–‡ä»¶å¤§å°ï¼šæœ‰å®éªŒè¯æ˜ï¼Œåœ¨ JPEG æ–‡ä»¶å°äº 10KB çš„æ—¶å€™ï¼Œä½¿ç”¨æ ‡å‡†å‹ç¼–ç ï¼ˆHuffman è¡¨å·²ç»è¢«ä¼˜åŒ–ï¼‰çš„ JPEG æ–‡ä»¶è¦å°äºä½¿ç”¨æ¸å˜å¼ç¼–ç çš„ JPEG æ–‡ä»¶ï¼ˆå‘ç”Ÿæ¦‚ç‡ä¸º 75%ï¼‰ã€‚å½“æ–‡ä»¶å¤§äº 10KB æ—¶ï¼Œæ¸å˜å¼ç¼–ç çš„ JPEG æ–‡ä»¶æœ‰ 94% çš„æ¦‚ç‡æ‹¥æœ‰æ¯”æ ‡å‡†ç¼–ç çš„æ–‡ä»¶æ›´å°çš„ä½“ç§¯ã€‚
    

### å‡å°‘ä¸å¿…è¦çš„å“åº”å¼æ•°æ®

å¤§å®¶éƒ½çŸ¥é“ vue ä¸­å“åº”å¼æ•°æ®éœ€è¦é¢å¤–çš„å¯¹å…¶ç»‘å®š getã€get å¤„ç†å‡½æ•°ï¼Œå¦‚æœä½ çš„æŸäº›æ•°æ®ä¸ä¼šå‘ç”Ÿå˜åŒ–æˆ–è€…ä½ ä¸å¸Œæœ›å®ƒçš„å˜åŒ–ä¼šå¯¼è‡´ä»»ä½•å‰¯ä½œç”¨ï¼ˆæ›´æ–°è§†å›¾æˆ–è€…å…¶ä»–ï¼‰ã€‚ä¸€èˆ¬æˆ‘ä¼šè¿™æ ·å®šä¹‰ä»–ã€‚

```
exportÂ defaultÂ {Â Â data()Â {Â Â Â Â this.versionÂ =Â '10';Â //Â ä¸ä¼šè¢«åšå“åº”å¼å¤„ç†Â Â Â Â returnÂ {Â Â Â Â Â Â Â Â /*Â ...Â */Â Â Â Â }Â Â }}
```

> Tips: å…¶å®è¿™ç§æ–¹å¼å¹¶ä¸æ˜¯æœ€å¥½çš„ï¼Œå› ä¸ºè¿™ä¼šå°†æ•°æ®ç›´æ¥ç»‘å®šåˆ° vue å®ä¾‹ä¸Šï¼Œè€Œ vue æ›´å¸Œæœ›æ•°æ®èƒ½å¤Ÿç»Ÿä¸€åœ¨ data ä¸­ï¼Œç„¶åé€šè¿‡ä»£ç†åˆ° vue å®ä¾‹ä¸Šçš„æ–¹å¼æ¥è®¿é—®ã€‚æ‰€ä»¥æ›´å¥½çš„æ–¹å¼åº”è¯¥æ˜¯å¯¹ data ä¸­çš„æ•°æ®è¿›è¡Œå†»ç»“ã€‚

> åœ¨ Vue3 ä¸­æ— æ³•é€šè¿‡ä»¥ä¸Šæ–¹å¼æ¥è§£å†³ï¼Œå› ä¸º Proxy ä»£ç†çš„ç²’åº¦æ˜¯æ•´ä¸ªå¯¹è±¡è€Œä¸æ˜¯æŸä¸€ä¸ªå±æ€§ã€‚

### é‡‡ç”¨åˆç†çš„æ•°æ®å¤„ç†ç®—æ³•

è¿™ä¸ªç›¸å¯¹æ¯”è¾ƒè€ƒéªŒ æ•°æ®ç»“æ„å’Œç®—æ³• çš„åŠŸåº• ä¾‹å¦‚ä¸€ä¸ªå°†æ•°ç»„è½¬åŒ–ä¸ºå¤šçº§ç»“æ„çš„æ–¹æ³•

```
/**Â *Â æ•°ç»„è½¬æ ‘å½¢ç»“æ„,æ—¶é—´å¤æ‚åº¦O(n)Â *Â @paramÂ listÂ æ•°ç»„Â *Â @paramÂ idKeyÂ å…ƒç´ idé”®Â *Â @paramÂ parIdKeyÂ å…ƒç´ çˆ¶idé”®Â *Â @paramÂ parIdÂ ç¬¬ä¸€çº§æ ¹èŠ‚ç‚¹çš„çˆ¶idå€¼Â *Â @returnÂ {[]}Â */functionÂ listToTreeÂ (list,idKey,parIdKey,parId)Â {Â Â Â Â letÂ mapÂ =Â {};Â Â Â Â letÂ resultÂ =Â [];Â Â Â Â letÂ lenÂ =Â list.length;Â Â Â Â //Â æ„å»ºmapÂ Â Â Â forÂ (letÂ iÂ =Â 0;Â iÂ <Â len;Â i++)Â {Â Â Â Â Â Â Â Â //å°†æ•°ç»„ä¸­æ•°æ®è½¬ä¸ºé”®å€¼å¯¹ç»“æ„Â (è¿™é‡Œçš„æ•°ç»„å’Œobjä¼šç›¸äº’å¼•ç”¨ï¼Œè¿™æ˜¯ç®—æ³•å®ç°çš„é‡ç‚¹)Â Â Â Â Â Â Â Â map[list[i][idKey]]Â =Â list[i];Â Â Â Â }Â Â Â Â //Â æ„å»ºæ ‘å½¢æ•°ç»„Â Â Â Â for(letÂ i=0;Â iÂ <Â len;Â i++)Â {Â Â Â Â Â Â Â Â letÂ itemParIdÂ =Â list[i][parIdKey];Â Â Â Â Â Â Â Â //Â é¡¶çº§èŠ‚ç‚¹Â Â Â Â Â Â Â Â if(itemParIdÂ ===Â parId)Â {Â Â Â Â Â Â Â Â Â Â Â Â result.push(list[i]);Â Â Â Â Â Â Â Â Â Â Â Â continue;Â Â Â Â Â Â Â Â }Â Â Â Â Â Â Â Â //Â å­¤å„¿èŠ‚ç‚¹ï¼Œèˆå¼ƒ(ä¸å­˜åœ¨å…¶çˆ¶èŠ‚ç‚¹)Â Â Â Â Â Â Â Â if(!map[itemParId]){Â Â Â Â Â Â Â Â Â Â Â Â continue;Â Â Â Â Â Â Â Â }Â Â Â Â Â Â Â Â //Â å°†å½“å‰èŠ‚ç‚¹æ’å…¥åˆ°çˆ¶èŠ‚ç‚¹çš„childrenä¸­ï¼ˆç”±äºæ˜¯å¼•ç”¨æ•°æ®ç±»å‹ï¼Œobjä¸­å¯¹äºèŠ‚ç‚¹å˜åŒ–ï¼Œresultä¸­å¯¹åº”èŠ‚ç‚¹ä¼šè·Ÿç€å˜åŒ–ï¼‰Â Â Â Â Â Â Â Â if(map[itemParId].children)Â {Â Â Â Â Â Â Â Â Â Â Â Â map[itemParId].children.push(list[i]);Â Â Â Â Â Â Â Â }Â elseÂ {Â Â Â Â Â Â Â Â Â Â Â Â map[itemParId].childrenÂ =Â [list[i]];Â Â Â Â Â Â Â Â }Â Â Â Â }Â Â Â Â returnÂ result;}
```

### å…¶ä»–

é™¤äº†ä¸Šé¢è¯´çš„æ–¹æ³•ä»¥å¤–è¿˜æœ‰å¾ˆå¤šä¼˜åŒ–æŠ€å·§ï¼Œåªæ˜¯æˆ‘åœ¨é¡¹ç›®å¹¶ä¸æ˜¯å¤ªå¸¸ç”¨ğŸ¤£

*   å†»ç»“å¯¹è±¡ï¼ˆé¿å…ä¸éœ€è¦å“åº”å¼çš„æ•°æ®å˜æˆå“åº”å¼ï¼‰
    
*   é•¿åˆ—è¡¨æ¸²æŸ“ - åˆ†æ‰¹æ¸²æŸ“
    
*   é•¿åˆ—è¡¨æ¸²æŸ“ - åŠ¨æ€æ¸²æŸ“ï¼ˆvue-virtual-scrollerï¼‰ ...
    

### é¦–å± / ä½“ç§¯ä¼˜åŒ–

æˆ‘åœ¨é¡¹ç›®ä¸­å…³äºé¦–å±ä¼˜åŒ–ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªä¼˜åŒ–æ–¹å‘

*   ä½“ç§¯
    
*   ä»£ç åˆ†å‰²
    
*   ç½‘ç»œ
    

### ä½“ç§¯ä¼˜åŒ–

*   å‹ç¼©æ‰“åŒ…ä»£ç : webpack å’Œ vite çš„ç”Ÿäº§ç¯å¢ƒæ‰“åŒ…é»˜è®¤å°±ä¼šå‹ç¼©ä½ çš„ä»£ç ï¼Œè¿™ä¸ªä¸€èˆ¬ä¸éœ€è¦ç‰¹æ®Šå¤„ç†ï¼Œwebpack ä¹Ÿå¯ä»¥é€šè¿‡å¯¹åº”çš„å‹ç¼©æ’ä»¶æ‰‹åŠ¨å®ç°
    
*   å–æ¶ˆ source-map: å¯ä»¥æŸ¥çœ‹ä½ çš„æ‰“åŒ…äº§ç‰©ä¸­æ˜¯å¦æœ‰ .map æ–‡ä»¶ï¼Œå¦‚æœæœ‰ä½ å¯ä»¥å°† source-map çš„å€¼è®¾ç½®ä¸º false æˆ–è€…ç©ºæ¥å…³é—­ä»£ç æ˜ å°„ï¼ˆè¿™ä¸ªå ç”¨çš„ä½“ç§¯æ˜¯çœŸçš„å¤§ï¼‰
    
*   æ‰“åŒ…å¯ç”¨ gizp å‹ç¼©: è¿™ä¸ªéœ€è¦æœåŠ¡å™¨ä¹Ÿå¼€å¯å…è®¸ gizp ä¼ è¾“ï¼Œä¸ç„¶å¯ç”¨äº†ä¹Ÿæ²¡å•¥ç”¨ï¼ˆ webpack æœ‰å¯¹åº”çš„ gzip å‹ç¼©æ’ä»¶ï¼Œä¸å¤ªç‰ˆæœ¬çš„ webpack å‹ç¼©æ’ä»¶å¯èƒ½ä¸åŒï¼Œå»ºè®®å…ˆåˆ°å®˜ç½‘æŸ¥è¯¢ï¼‰
    

### ä»£ç åˆ†å‰²

ä»£ç åˆ†å‰²çš„ä½œç”¨çš„å°†æ‰“åŒ…äº§ç‰©åˆ†å‰²ä¸ºä¸€ä¸ªä¸€ä¸ªçš„å°äº§ç‰©ï¼Œå…¶ä¾èµ– esModuleã€‚æ‰€ä»¥å½“ä½ ä½¿ç”¨ import() å‡½æ•°æ¥å¯¼å…¥ä¸€ä¸ªæ–‡ä»¶æˆ–è€…ä¾èµ–ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–‡ä»¶æˆ–è€…ä¾èµ–å°±ä¼šè¢«å•ç‹¬æ‰“åŒ…ä¸ºä¸€ä¸ªå°äº§ç‰©ã€‚è·¯ç”±æ‡’åŠ è½½ å’Œ å¼‚æ­¥ç»„ä»¶ éƒ½æ˜¯ä½¿ç”¨è¿™ä¸ªåŸç†ã€‚

*   è·¯ç”±æ‡’åŠ è½½
    
*   å¼‚æ­¥ç»„ä»¶
    

å¯¹äº UI åº“ æˆ‘ä¸€èˆ¬ä¸ä¼šä½¿ç”¨æŒ‰éœ€åŠ è½½ç»„ä»¶ï¼Œè€Œæ˜¯æ¯”è¾ƒå–œæ¬¢ CDN å¼•å…¥çš„æ–¹å¼æ¥ä¼˜åŒ–ã€‚

### ç½‘ç»œ

*   CDNï¼šé¦–å…ˆå°±æ˜¯ä¸Šé¢çš„è¯´çš„ CDN å¼•å…¥æŠŠï¼Œå¼€å‘é˜¶æ®µä½¿ç”¨æœ¬åœ°åº“ï¼Œé€šè¿‡é…ç½® å¤–éƒ¨æ‰©å±• (Externals) æ‰“åŒ…æ—¶æ¥æ’é™¤è¿™äº›ä¾èµ–ã€‚ç„¶ååœ¨ html æ–‡ä»¶ä¸­é€šè¿‡ CDN çš„æ–¹å¼æ¥å¼•å…¥å®ƒä»¬
    
*   Server Pushï¼šHTTP2 å·²ç»ç›¸å¯¹æˆç†Ÿäº†ï¼›ç»è¿‡ä¸Šé¢çš„ CDN å¼•å…¥ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ç½‘ç«™ä½¿ç”¨ HTTP2 çš„ Server Push åŠŸèƒ½æ¥è®©æµè§ˆå™¨æå‰åŠ è½½ è¿™äº› CDN å’Œ å…¶ä»–æ–‡ä»¶ã€‚
    
*   å¼€å¯ gzipï¼šè¿™ä¸ªä¸Šé¢å·²ç»è¯´è¿‡äº†ï¼Œå…¶åŸç†å°±æ˜¯å½“å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½æ”¯æŒ gzip ä¼ è¾“æ—¶ï¼ŒæœåŠ¡ç«¯ä¼šä¼˜å…ˆå‘é€ç»è¿‡ gzip å‹ç¼©è¿‡çš„æ–‡ä»¶ï¼Œç„¶åå®¢æˆ·ç«¯æ¥æ”¶åˆ°åœ¨è¿›è¡Œè§£å‹ã€‚
    
*   å¼€å¯ç¼“å­˜ï¼šä¸€èˆ¬æˆ‘ä½¿ç”¨çš„æ˜¯åå•†ç¼“å­˜ï¼Œä½†æ˜¯è¿™å¹¶ä¸é€‚ç”¨äºæ‰€æœ‰æƒ…å†µï¼Œä¾‹å¦‚å¯¹äºä½¿ç”¨äº† Server Push çš„æ–‡ä»¶ï¼Œå°±ä¸èƒ½éšæ„çš„ä¿®æ”¹å…¶æ–‡ä»¶åã€‚æ‰€ä»¥æˆ‘ä¸€èˆ¬è¿˜ä¼šå°†ç”Ÿäº§çš„ä¸»è¦æ–‡ä»¶å›ºå®šæ–‡ä»¶å
    

### ç”¨æˆ·ä½“éªŒä¼˜åŒ–

æˆ‘ä»¬å¯ä»¥åœ¨æ ¸å¿ƒæ–‡ä»¶åŠ è½½å®Œæˆä¹‹å‰ï¼Œé€šè¿‡å±•ç¤º loading æˆ–è€…éª¨æ¶å±ç­‰æ–¹å¼æ¥æå‡ç”¨æˆ·ä½“éªŒã€‚å³å¯ç¼©çŸ­ç™½å±æ—¶é—´ã€‚

ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé¡µé¢åˆšå¼€å§‹åŠ è½½æ—¶æœ‰è®¸å¤šèµ„æºéœ€è¦åŠ è½½ï¼Œå¦‚æœå°† loading ç›¸å…³çš„èµ„æºæ”¾åˆ° dom åçš„è¯ï¼Œæœ‰å¯èƒ½ä¼šå¯¼è‡´ loading çš„èµ„æºè¢«å…¶ä»–èµ„æºé˜»å¡ã€‚

æ‰€ä»¥æ¨è loading ç›¸å…³çš„ css æˆ–è€… js ä»£ç æœ€å¥½æ˜¯å†…è”åˆ° html ä¸­çš„å¤´éƒ¨ï¼Œè¿™æ ·å³å¯ä¿è¯å±•ç¤º loading æ—¶å¯¹åº”çš„ css å’Œ js å·²ç»åŠ è½½å®Œæˆã€‚å¹¶ä¸”ä¸æ¨è loading ä¸­ä½¿ç”¨é«˜æ€§èƒ½æˆ–è€…é«˜ç½‘ç»œæ¶ˆåŒ–çš„é€»è¾‘ï¼Œè¿™æ ·ä¼šå»¶é•¿åé¢å…¶ä»–èµ„æºçš„è§£ææˆ–è€…åŠ è½½æ—¶é—´ã€‚

2 å†™åœ¨æœ€å
------

å¯’æ°”æ¥äº†ï¼ŒæŠ±å›¢å–æš–ã€‚

æœ¬æ–‡å¼•è‡ªï¼šhttps://juejin.cn/post/7005880217684148231

  

å¾€æœŸå›é¡¾

  

#

[å¦‚ä½•ä½¿ç”¨ TypeScript å¼€å‘ React å‡½æ•°å¼ç»„ä»¶ï¼Ÿ](http://mp.weixin.qq.com/s?__biz=MjM5MDc4MzgxNA==&mid=2458468369&idx=1&sn=710836a0f836c1591b4953ecf09bb9bb&chksm=b1c2603886b5e92ec64f82419d9fd8142060ee99fd48b8c3a8905ee6840f31e33d423c34c60b&scene=21#wechat_redirect)

#

[11 ä¸ªéœ€è¦é¿å…çš„ React é”™è¯¯ç”¨æ³•](http://mp.weixin.qq.com/s?__biz=MjM5MDc4MzgxNA==&mid=2458468180&idx=1&sn=63da1eb9e4d8ba00510bf344eb408e49&chksm=b1c21f7d86b5966b160bf65b193b62c46bc47bf0b3965ff909a34d19d3dc9f16c86598792501&scene=21#wechat_redirect)

#

[6 ä¸ª Vue3 å¼€å‘å¿…å¤‡çš„ VSCode æ’ä»¶](http://mp.weixin.qq.com/s?__biz=MjM5MDc4MzgxNA==&mid=2458467984&idx=1&sn=f9f71530f15124fe44cd22eff3170981&chksm=b1c21eb986b597af806837a37b87b1e8bc06b26b16af578deddd8bb503a768f78f5a7acdb909&scene=21#wechat_redirect)

#

[3 æ¬¾éå¸¸å®ç”¨çš„ Node.js ç‰ˆæœ¬ç®¡ç†å·¥å…·](http://mp.weixin.qq.com/s?__biz=MjM5MDc4MzgxNA==&mid=2458467880&idx=1&sn=ca7e12574d88a6b36ccfd47d9ddc7a4f&chksm=b1c21e0186b5971758792950721938b4a4efbc3024b0b01965c25a4ea73ec838767783ade6ea&scene=21#wechat_redirect)

#

[6 ä¸ªä½ å¿…é¡»æ˜ç™½ Vue3 çš„ ref å’Œ reactive é—®é¢˜](http://mp.weixin.qq.com/s?__biz=MjM5MDc4MzgxNA==&mid=2458467756&idx=1&sn=902e85685a50ba7cdc75e410e10b9718&chksm=b1c21d8586b5949326c8836132b20dc4294af449473b6db4592cbfd00788345534a07d77fa6d&scene=21#wechat_redirect)

#

[6 ä¸ªæ„æƒ³ä¸åˆ°çš„ JavaScript é—®é¢˜](http://mp.weixin.qq.com/s?__biz=MjM5MDc4MzgxNA==&mid=2458467612&idx=1&sn=44ea5238a6500f44a47ea316c634bcf6&chksm=b1c21d3586b594237333a306f00353fba450514076e54ac32df7485ae358d0cefb25a6c1f329&scene=21#wechat_redirect)

#

[è¯•ç€æ¢ä¸ªè§’åº¦ç†è§£ä½ä»£ç å¹³å°è®¾è®¡çš„æœ¬è´¨](http://mp.weixin.qq.com/s?__biz=MjM5MDc4MzgxNA==&mid=2458467471&idx=2&sn=7990678e19544372ff43b5a84f491337&chksm=b1c21ca686b595b07b097c764f9304887282d737b4dd0a2634c47b25c8f223c785a6c8714382&scene=21#wechat_redirect)

![](https://mmbiz.qpic.cn/mmbiz_gif/dy9CXeZLlCXukR16d8fyyeJ4icloLCW0cvbCvibfaBxbY22lN51mYaLeKictjOeobKmxCVfb3AwIZ3t6eKicIicTtow/640?wx_fmt=gif)

å›å¤ â€œ**åŠ ç¾¤**â€ï¼Œä¸€èµ·å­¦ä¹ è¿›æ­¥